$(window).on("load",function(){var e,t,n,r,i,s,o,u,a,f,l={};e={lengthOfPrefixes:3,prefixOption:"opt_",legalLocalStorageKeys:new Array,Utilities:{programVersion:{key:"int_utlProgramVersion",value:140908},lastLocalResetTimestamp:{key:"int_utlLastLocalResetTimestamp",value:0}},Options:{enu_Language:"en",bol_hideChecked:false,bol_expandEvents:true,bol_useCountdown:true,int_setClock:0,int_setDimming:0,int_setPredictor:0,bol_tourPrediction:true,bol_showChainPaths:true,bol_showMap:true,bol_showWorldCompletion:false,bol_displaySectors:true,bol_displayWaypoints:true,bol_displayPOIs:true,bol_displayVistas:true,bol_displaySkills:true,bol_displayHearts:true,int_setAlarm:0,bol_alertAtStart:true,bol_alertAtEnd:true,bol_alertChecked:false,int_alertSubscribedFirst:5,int_alertSubscribedSecond:15,int_sizeNotepadFont:12,int_sizeNotepadHeight:500,bol_refreshPrices:true,int_numTradingCalculators:25,int_numTradingResults:15,int_secTradingRefresh:30,bol_clearChainChecklistOnReset:true,bol_clearPersonalChecklistOnReset:true,bol_use24Hour:true,bol_detectDST:true,bol_useSiteTag:true},OptionRange:{},OptionEnum:{Language:{Default:"en",English:"en",German:"de",Spanish:"es",French:"fr",Czech:"cs",Italian:"it",Polish:"pl",Portuguese:"pt",Russian:"ru",Mandarin:"zh"}},IntEnum:{Predictor:{Auto:0,Min:1,MinAvg:2,Avg:3},Clock:{Compact:0,Full:1,Bar:2,None:3},Alarm:{Off:0,Checklist:1,Subscription:2}},validateEnum:function(t,n){var r;var i=e.OptionEnum[e.getVariableSuffix(t)];for(r in i){if(i[r]===n){return n}}return e.Options[t]},TypeEnum:{isBoolean:"bol",isInteger:"int",isFloat:"flt",isEnum:"enu",isString:"str"},getVariableSuffix:function(e){return e.split("_")[1]},getVariablePrefix:function(e){return e.split("_")[0]},enforceProgramVersion:function(){var t=e.Utilities.programVersion.value;var n=parseInt(localStorage[e.Utilities.programVersion.key]);if(isFinite(n)&&n!==t){var r=20;if(l.ModeCurrent===l.ModeEnum.Overlay){r=10}l.clear();l.write(l.cSiteName+" was updated since your last visit.<br />"+"This version: "+t+"<br />"+"Your version: "+n+"<br />"+"Would you like to see the <a class='urlUpdates' href='"+f.URL_META.News+"'>changes</a>?<br />"+"<br />"+"New in this version:<br />"+"- Trading Post calculator (Beta) <a href='http://gw2timer.com/tp'>http://gw2timer.com/tp</a><br />"+"- Uses new official API to retrieve current prices every few seconds!<br />"+"Use it with the <a class='urlUpdates' href='"+f.URL_META.Overlay+"'>overlay app</a> in game!<br />",r);f.convertExternalLink(".urlUpdates")}localStorage[e.Utilities.programVersion.key]=e.Utilities.programVersion.value},initializeLegalLocalStorageKeys:function(){var n;for(n in e.Utilities){e.legalLocalStorageKeys.push(e.Utilities[n].key)}for(n in e.Options){e.legalLocalStorageKeys.push(n)}for(n in t.Checklists){e.legalLocalStorageKeys.push(t.Checklists[n].key)}for(n in t.Textlists){e.legalLocalStorageKeys.push(t.Textlists[n].key)}},cleanLocalStorage:function(){var t,n;var r;var i;for(t=0;t<localStorage.length;t++){r=localStorage.key(t);for(n in e.legalLocalStorageKeys){if(r===e.legalLocalStorageKeys[n]){i=true;break}}if(i!==true){localStorage.removeItem(r)}else{i=false}}},convertLocalStorageDataType:function(e){var t=e.toLowerCase();if(t==="true"){return true}if(t==="false"){return false}if(isFinite(t)){if(t%0===0){return parseInt(t)}return parseFloat(t)}return e},intToBool:function(e){if(e>0){return true}return false},boolToInt:function(e){if(e){return 1}return 0},objToBool:function(e){if(e){return true}return false},updateLocalResetTimestamp:function(){e.Utilities.lastLocalResetTimestamp.value=u.getUNIXSeconds();localStorage[e.Utilities.lastLocalResetTimestamp.key]=e.Utilities.lastLocalResetTimestamp.value},checkResetTimestamp:function(){var t=u.getUNIXSeconds()-u.getTimeOffsetSinceMidnight(u.ReferenceEnum.UTC,u.UnitEnum.Seconds);if(e.Utilities.lastLocalResetTimestamp.value<t){e.clearServerSensitiveOptions()}},getIndexOfSelectedRadioButton:function(e){var t=$("fieldset[name="+e+"] "+"input:radio[name="+e+"]");return t.index(t.filter(":checked"))},initializeOptions:function(){e.initializeLegalLocalStorageKeys();var t;var n;var r;for(t in e.Options){$("#"+e.prefixOption+t).each(function(){n=$(this).attr("type");r=e.getVariablePrefix(t);if(n==="radio"){e.OptionRange[t]=new Array(0,$("fieldset[name="+t+"] input").length-1)}else if(n==="number"||n==="range"){e.OptionRange[t]=new Array($(this).prop("min"),$(this).prop("max"))}});if(l.isProgramEmbedded){if(f.Args[t]!==undefined){e.Options[t]=e.convertLocalStorageDataType(f.sanitizeURLOptionsValue(t,f.Args[t]))}}else{if(f.Args[t]!==undefined){localStorage[t]=f.sanitizeURLOptionsValue(t,f.Args[t])}if(localStorage[t]===undefined){localStorage[t]=e.Options[t]}else{e.Options[t]=e.convertLocalStorageDataType(localStorage[t])}}$("#"+e.prefixOption+t).each(function(){n=$(this).attr("type");r=e.getVariablePrefix(t);if(n==="checkbox"){$(this).prop("checked",e.Options[t])}else if(n==="number"||n==="range"){$(this).val(e.Options[t])}else if(n==="radio"){$("input:radio[name="+t+"]:eq("+e.Options[t]+")").prop("checked",true)}if(n==="radio"){$("fieldset[name="+t+"]").change(function(){var t=$(this).attr("name");e.Options[t]=e.getIndexOfSelectedRadioButton(t);localStorage[t]=e.Options[t]})}else{$(this).change(function(){var t=$(this).attr("type");var n=$(this).attr("id").slice(e.prefixOption.length);if(t==="checkbox"){e.Options[n]=$(this).prop("checked")}else if(t==="number"||t==="range"){var r=$(this).val();var i=parseInt(r);if(isFinite(r)&&i>=e.OptionRange[n][0]&&i<=e.OptionRange[n][1]){e.Options[n]=i}else{e.Options[n]=e.OptionRange[n][0]}$(this).val(e.Options[n])}else{e.Options[n]=$(this).val()}localStorage[n]=e.Options[n]})}})}e.bindOptionsInputs();f.initializeAPIURLs()},clearServerSensitiveOptions:function(){var n=10;l.write("Daily Reset / Timestamp Expired!",n);var r;if(e.Options.bol_clearChainChecklistOnReset){var s;for(r in i.Chains){s=i.Chains[r];$("#chnCheck_"+s.nexus).removeClass("chnChecked");$("#barChain_"+s.nexus).css({opacity:1});if(t.getChecklistItem(t.Checklists.Chain,s.nexus)!==t.ChecklistEnum.Disabled){$("#barChain_"+s.nexus).show()}}t.clearChecklist(t.Checklists.Chain,t.ChecklistJob.UncheckTheChecked)}if(e.Options.bol_clearPersonalChecklistOnReset){t.clearChecklist(t.Checklists.Dungeon,t.ChecklistJob.UncheckTheChecked);t.clearChecklist(t.Checklists.Custom,t.ChecklistJob.UncheckTheChecked)}l.write("",n);e.updateLocalResetTimestamp()},bindOptionsInputs:function(){var n;for(n in e.Enact){(function(t){var n;var r=e.prefixOption+t;var i=$("#"+r).attr("type");if(i==="radio"){n="fieldset[name="+t+"]"}else{n="#"+r}$(n).change(function(){e.Enact[t]()})})(n)}$("#opt_bol_showWorldCompletion").change(function(){if(e.Options.bol_showWorldCompletion===true&&s.isMappingIconsGenerated===false){location.reload()}$("#mapOptionsDisplay label input").each(function(){t.setCheckboxEnumState($(this),t.boolToChecklistEnum(e.Options.bol_showWorldCompletion))})});$("#mapOptionsDisplay label input").each(function(){$(this).change(function(){if(s.isAPIRetrieved_MAPFLOOR){var e=s.ZoneCurrent.center;s.showCurrentZone(s.getZoneCenter("dry"));s.showCurrentZone(s.getZoneCenter("rata"));s.showCurrentZone(e)}})});e.Enact.int_setAlarm();e.Enact.bol_hideChecked();e.Enact.bol_detectDST();e.Enact.bol_useSiteTag();if(l.ModeCurrent!==l.ModeEnum.Simple){e.Enact.int_setClock();e.Enact.int_setDimming();e.Enact.bol_showMap()}$("#optRestoreAllChains").click(function(){var e;for(var n in i.Chains){e=i.Chains[n];$("#chnCheck_"+e.nexus).removeClass("chnChecked");$("#barChain_"+e.nexus).show().css({opacity:1})}t.clearChecklist(t.Checklists.Chain);for(n=0;n<u.cNUM_TIMEFRAMES_IN_HOUR;n++){a.checkoffChainIcon(u.getStandardChain(n).nexus);var r=u.getHardcoreChain(n);if(r){a.checkoffChainIcon(r.nexus)}}$("#menuChains").trigger("click")});$("#optClearLocalStorage").click(function(){if(confirm(l.cSiteName+" Reset: This is will clear all options and everything you have written in this website. Continue?")){localStorage.clear();location.reload()}});$("#optPrintLocalStorage").click(function(){var e;var t=new Array;for(e=0;e<localStorage.length;e++){var n=f.escapeHTML(localStorage.key(e));t.push(n)}t.sort();var r="";for(e in t){var i=f.escapeHTML(localStorage.getItem(t[e]));r+=t[e]+": "+i+"<br />"}l.write(r,30,true)})},Enact:{int_setAlarm:function(){var t="img/ui/placeholder.png";switch(e.Options.int_setAlarm){case e.IntEnum.Alarm.Checklist:t="img/ui/check.png";break;case e.IntEnum.Alarm.Subscription:t="img/ui/subscription.png";break}$("#optAlarmIcon").attr("src",t)},bol_hideChecked:function(){$(".barChain").each(function(){if(t.getChecklistItem(t.Checklists.Chain,f.getSubintegerFromHTMLID($(this)))===t.ChecklistEnum.Checked){if(e.Options.bol_hideChecked){$(this).hide()}else{$(this).show()}}})},bol_expandEvents:function(){for(var t in i.CurrentChains){$("#chnDetails_"+i.CurrentChains[t].nexus).toggle(e.Options.bol_expandEvents)}},bol_use24Hour:function(){i.initializeTimetableHTML();i.updateChainsTimeHTML()},bol_detectDST:function(){u.DST_IN_EFFECT=e.Options.bol_detectDST?1:0},int_setClock:function(){a.setClock()},int_setDimming:function(){switch(e.Options.int_setDimming){case 1:$("#paneClockBackground").css({opacity:1});break;case 2:$("#paneClockBackground").css({opacity:0});break}},bol_useCountdown:function(){i.updateChainsTimeHTML()},bol_showChainPaths:function(){s.setEntityGroupDisplay(s.ChainPathEntities,e.Options.bol_showChainPaths);s.setEntityGroupDisplay(s.StoryEventActive,e.Options.bol_showChainPaths)},bol_showMap:function(){if(e.Options.bol_showMap){$("#paneMap").show();s.refreshMap()}else{$("#paneMap").hide()}},bol_refreshPrices:function(){if(e.Options.bol_refreshPrices&&n.isTradingCalculatorsInitialized){n.loopRefresh()}else{n.cancelLoopRefresh()}},bol_useSiteTag:function(){if(e.Options.bol_useSiteTag){l.siteTagCurrent=l.siteTagDefault}else{l.siteTagCurrent=""}}}};f={URL_META:{News:"http://forum.renaka.com/topic/5500046/",Overlay:"http://forum.renaka.com/topic/5546166/"},URL_API:{Tiles:"https://tiles.guildwars2.com/1/1/{z}/{x}/{y}.jpg",MapFloor:"https://api.guildwars2.com/v1/map_floor.json?continent_id=1&floor=1",EventNames:"https://api.guildwars2.com/v1/event_names.json",EventDetails:"https://api.guildwars2.com/v1/event_details.json",ItemListing:"https://api.guildwars2.com/v2/commerce/listings/",ItemDetails:"https://api.guildwars2.com/v1/item_details.json?item_id=",ItemRender:"https://render.guildwars2.com/file/",CoinPrice:"https://api.guildwars2.com/v2/commerce/exchange/gems?quantity=",GemPrice:"https://api.guildwars2.com/v2/commerce/exchange/coins?quantity=",ItemSearch:"http://www.gw2spidy.com/api/v0.9/json/item-search/",ItemData:"http://www.gw2spidy.com/api/v0.9/json/item/"},URL_IMG:{Placeholder:"img/ui/placeholder.png",Waypoint:"img/map/waypoint.png",WaypointOver:"img/map/waypoint_h.png",Landmark:"img/map/landmark.png",LandmarkOver:"img/map/landmark_h.png",Vista:"img/map/vista.png",Skill:"img/map/skill.png",Heart:"img/map/heart.png"},initializeAPIURLs:function(){var e=r.getFullySupportedLanguage();f.URL_API.MapFloor+="&lang="+e;f.URL_API.EventNames+="?lang="+e;f.URL_API.EventDetails+="?lang="+e},Args:{},KeyEnum:{Page:"page",Section:"section",Article:"article",Mode:"mode",Go:"go"},CaseEnum:{None:0,Lower:1,Sentence:2,Title:3,Every:4,All:5},isEnumWithin:function(e,t){for(var n in t){if(t[n].toLowerCase()===e.toLowerCase()){return true}}return false},getURLArguments:function(){var e=window.location.search.substr(1).split("&");if(e===""){return{}}var t={};for(var n=0;n<e.length;++n){var r=e[n].split("=");if(r.length!==2){continue}t[r[0]]=decodeURIComponent(r[1].replace(/\+/g," "))}return t},enforceURLArgumentsFirst:function(){f.Args=f.getURLArguments();f.enforceURLArgumentsSpecial();var e;var t=f.Args[f.KeyEnum.Mode];if(t){for(e in l.ModeEnum){if(l.ModeEnum[e].toLowerCase()===t.toLowerCase()){l.ModeCurrent=l.ModeEnum[e];break}}}if(l.ModeCurrent===null){l.ModeCurrent=l.ModeEnum.Website}l.ArticleCurrent=parseInt(f.Args[f.KeyEnum.Article]);if(isFinite(l.ArticleCurrent)){l.ArticleCurrent=l.ArticleCurrent-1}},enforceURLArgumentsLast:function(){f.openPageFromURL()},enforceURLArgumentsSpecial:function(){var e,n;var r;var i=function(e){$("body").hide();document.location=e};var o=f.Args[f.KeyEnum.Page];if(o&&f.isEnumWithin(o,l.PageEnum)===false){o=o.toLowerCase();if(o==="navi"||o==="overlay"){i(f.URL_META.Overlay)}else if(o==="m"||o==="simple"){f.Args[f.KeyEnum.Mode]=l.ModeEnum.Simple}else if(o==="chests"){f.Args[t.Checklists.Collectible1.urlkey]="true"}else{for(e in l.SectionEnum){r=l.SectionEnum[e];for(n in r){if(n.toLowerCase()===o){f.Args[f.KeyEnum.Page]=e;f.Args[f.KeyEnum.Section]=n;return}}}for(e in s.Zones){if(o.indexOf(e)!==-1){f.Args[f.KeyEnum.Go]=e;return}}}}var u=f.Args[t.Checklists.Collectible1.urlkey];if(u){f.Args[f.KeyEnum.Page]=l.PageEnum.Map;f.Args[f.KeyEnum.Section]=l.SectionEnum.Map.Collectible;f.Args[f.KeyEnum.Article]="2";f.Args[f.KeyEnum.Go]="4816,16443,1"}},sanitizeURLOptionsValue:function(t,n){var r=t.substring(0,e.lengthOfPrefixes);var i=n.toLowerCase();switch(r){case e.TypeEnum.isBoolean:{if(i==="true"||i==="false"){return i}return e.Options[t].toString()}break;case e.TypeEnum.isInteger:{if(isFinite(i)){var s=parseInt(i);if(s>=e.OptionRange[t][0]&&s<=e.OptionRange[t][1]){return s.toString()}}return e.Options[t].toString()}break;case e.TypeEnum.isFloat:{if(isFinite(i)){var o=parseFloat(i);if(o>=e.OptionRange[t][0]&&o<=e.OptionRange[t][1]){return o.toString()}}return e.Options[t].toString()}break;case e.TypeEnum.isEnum:{return e.validateEnum(t,n)}break;case e.TypeEnum.isString:{return f.escapeHTML(n)}break}return"null"},stripToAlphanumeric:function(e){return e.replace(/\W/g,"")},stripToSentence:function(e){return e.replace(/[^\w\s\'\"\:\,]/gi,"")},toFirstUpperCase:function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},changeCase:function(e,t){var n;var r=[];if(t===undefined||t===f.CaseEnum.None){return e}if(t===f.CaseEnum.Title||t===f.CaseEnum.Every){r=e.split(" ")}switch(t){case f.CaseEnum.Lower:return e.toLowerCase();case f.CaseEnum.Sentence:return f.toFirstUpperCase(e);case f.CaseEnum.Title:{if(r.length>1){r[0]=f.toFirstUpperCase(r[0]);for(n=1;n<r.length;n++){if(r[n].length!==2){r[n]=f.toFirstUpperCase(r[n])}}return r.join(" ")}else{return f.toFirstUpperCase(e)}};case f.CaseEnum.Every:{if(r.length>1){for(n in r){r[n]=f.toFirstUpperCase(r[n])}return r.join(" ")}else{return f.toFirstUpperCase(e)}};case f.CaseEnum.All:return e.toUpperCase()}},wrapSubstringHTML:function(e,t,n){var r=e.toLowerCase().indexOf(t.toLowerCase());var i=r+t.length;var s="";if(r!==-1){if(n===undefined){n="u"}s=e.substring(0,r)+"<"+n+">"+e.substring(r,i)+"</"+n+">"+e.substring(i,e.length)}else{s=e}return s},escapeHTML:function(e){return e.replace(/&/g,"&").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},replaceCharAt:function(e,t,n){return e.substr(0,t)+n+e.substr(t+n.length)},repeatChar:function(e,t){return Array(t+1).join(e)},updateAddressBar:function(e){history.replaceState("",null,e);a.reapplyFilters()},updateQueryString:function(){if(l.PageCurrent!==""){var e=l[l.sectionPrefix+l.PageCurrent];var t=f.Args[f.KeyEnum.Article];var n=f.Args[f.KeyEnum.Go];var r="?"+f.KeyEnum.Page+"="+l.PageCurrent;var i="";var s="";var o="";if(e){i="&"+f.KeyEnum.Section+"="+e}if(t){s="&"+f.KeyEnum.Article+"="+t}if(n){o="&"+f.KeyEnum.Go+"="+n}f.updateAddressBar(r+i+s+o)}},openSectionFromURL:function(){setTimeout(function(){if(f.Args[f.KeyEnum.Section]!==undefined){var e=f.stripToAlphanumeric(f.Args[f.KeyEnum.Section]);var t=$(l.cHeaderPrefix+l.PageCurrent+"_"+f.toFirstUpperCase(e));if(!t.length){t=$(l.cHeaderPrefix+l.PageCurrent+"_"+e.toUpperCase())}t.trigger("click")}},0)},openPageFromURL:function(){if(f.Args[f.KeyEnum.Page]!==undefined){var e=f.stripToAlphanumeric(f.Args[f.KeyEnum.Page]);$(l.cMenuPrefix+f.toFirstUpperCase(e)).trigger("click")}},convertExternalLink:function(e){if(l.ModeCurrent!==l.ModeEnum.Overlay){$(e).each(function(){$(this).attr("href",l.cSiteURL+"out?"+escape($(this).attr("href")));$(this).attr("target","_blank")})}},openExternalURL:function(e){var t=e;if(l.ModeCurrent!==l.ModeEnum.Overlay){t=l.cSiteURL+"out?"+escape(e)}window.open(t,"_blank")},getSubstringFromHTMLID:function(t){return e.getVariableSuffix(t.attr("id"))},getSubintegerFromHTMLID:function(t){return parseInt(e.getVariableSuffix(t.attr("id")))},getImageHosted:function(e){return l.cImageHost+e+l.cPNG},getWikiLink:function(e){e=e.replace(/ /g,"_");return"http://wiki.guildwars2.com/wiki/"+escape(e)},getWikiLanguageLink:function(e){e=e.replace(/ /g,"_");return"http://wiki-"+r.getFullySupportedLanguage()+".guildwars2.com/wiki/"+escape(e)},getWikiSearchLink:function(e){e=e.replace(/ /g,"+");return"http://wiki.guildwars2.com/index.php?title=Special%3ASearch&search="+escape(e)},getYouTubeLink:function(e){return"http://www.youtube.com/results?search_query="+escape(e)},getTradingSearchLink:function(e){return"http://www.gw2spidy.com/search/"+escape(e)},getTradingItemLink:function(e,t){return"http://www.gw2spidy.com/item/"+escape(e)+"#"+f.stripToSentence(t)},getChatlinkFromPoiID:function(e){var t=String.fromCharCode(4);for(var n=0;n<4;n++){t+=String.fromCharCode(e>>n*8&255)}return"[&"+btoa(t)+"]"},getChatlinkFromItemID:function(e){return"[&"+btoa(String.fromCharCode(2)+String.fromCharCode(1)+String.fromCharCode(e%256)+String.fromCharCode(Math.floor(e/256))+String.fromCharCode(0)+String.fromCharCode(0))+"]"},getAssetIconURL:function(e){return f.URL_API.ItemRender+e.icon_file_signature+"/"+e.icon_file_id+".png"}};t={Checklists:{Chain:{key:"str_chlChain",value:""},ChainSubscription:{key:"str_chlChainSubscription",value:""},JP:{key:"str_chlJP",value:""},Dungeon:{key:"str_chlDungeon",value:"",money:0},Custom:{key:"str_chlCustom",value:""},Collectible0:{key:"str_chlDiveMaster",urlkey:"divemaster",value:"",cushion:new Array},Collectible1:{key:"str_chlBuriedChest",urlkey:"chests",value:"",cushion:new Array},Collectible2:{key:"str_chlCoinProspect",urlkey:"coinprospect",value:"",cushion:new Array},Collectible3:{key:"str_chlCoinUplands",urlkey:"coinuplands",value:"",cushion:new Array},Collectible4:{key:"str_chlCoinChallenger",urlkey:"coinchallenger",value:"",cushion:new Array},TradingOverwrite:{key:"str_chlTradingOverwrite",value:""},TradingNotify:{key:"str_chlTradingNotify",value:""}},ChecklistEnum:{Unchecked:"0",Checked:"1",Disabled:"2",Unfound:"0",Tracked:"1",Found:"2"},ChecklistJob:{AllUnchecked:0,AllChecked:1,UncheckTheChecked:2},Textlists:{CustomText:{key:"str_txlCustomText",value:new Array,valueDefault:new Array},NotepadText:{key:"str_txlNotepadText",value:new Array,valueDefault:new Array},TradingItem:{key:"str_txlTradingItem",value:new Array},TradingName:{key:"str_txlTradingName",value:new Array},TradingBuy:{key:"str_txlTradingBuy",value:new Array},TradingSell:{key:"str_txlTradingSell",value:new Array},TradingQuantity:{key:"str_txlTradingQuantity",value:new Array},NotifyBuyLow:{key:"str_txlNotifyBuyLow",value:new Array},NotifyBuyHigh:{key:"str_txlNotifyBuyHigh",value:new Array},NotifySellLow:{key:"str_txlNotifySellLow",value:new Array},NotifySellHigh:{key:"str_txlNotifySellHigh",value:new Array},ExchangeUnit:{key:"str_txlExchangeUnit",value:new Array}},boolToChecklistEnum:function(e){if(e){return t.ChecklistEnum.Checked}return t.ChecklistEnum.Unchecked},initializeChecklist:function(e,n,r,i){var s;var o;var u;var a=localStorage[e.key];e.length=n;if(r){t.clearChecklist(e);o=r.split(",");for(s in o){u=parseInt(o[s]);if(isFinite(u)){t.setChecklistItem(e,u-1,t.ChecklistEnum.Checked)}}}else if(a===undefined){t.clearChecklist(e,i)}else if(a.length>n){localStorage[e.key]=a.substring(0,n)}else if(a.length<n){var l=f.repeatChar(n-a.length,t.ChecklistEnum.Unchecked);localStorage[e.key]=a+l}e.value=localStorage[e.key]},setChecklistItem:function(e,t,n){t=parseInt(t);var r=n.toString();if(r.length===1&&e.value[t]!==r&&t>=0&&t<e.value.length){var i=f.replaceCharAt(e.value,t,r);localStorage[e.key]=i;e.value=i}},trackChecklistItem:function(e,n){n=parseInt(n);var r=e.value.charAt(n);switch(r){case t.ChecklistEnum.Unfound:r=t.ChecklistEnum.Tracked;break;case t.ChecklistEnum.Tracked:r=t.ChecklistEnum.Found;break;case t.ChecklistEnum.Found:r=t.ChecklistEnum.Unfound;break;default:r=t.ChecklistEnum.Unfound}var i=f.replaceCharAt(e.value,n,r);localStorage[e.key]=i;e.value=i;return r},getChecklistItem:function(t,n,r){var i=t.value.charAt(n);if(r===undefined){return i}if(r===e.TypeEnum.isInteger){return parseInt(i)}if(r===e.TypeEnum.isBoolean){return e.intToBool(parseInt(i))}return i},isChecked:function(e,n){var r=f.getSubintegerFromHTMLID(n);if(t.getChecklistItem(e,r)===t.ChecklistEnum.Checked){return true}return false},getCheckedIndexes:function(e){var n;var r="";var i=e.value;for(n=0;n<i.length;n++){if(i[n]===t.ChecklistEnum.Checked){r+=n+1+","}}r=r.slice(0,-1);return r},clearChecklist:function(e,n){var r;var i="";var s="";switch(n){case t.ChecklistJob.AllChecked:{for(r=0;r<e.length;r++){i+=t.ChecklistEnum.Checked}}break;case t.ChecklistJob.UncheckTheChecked:{if(localStorage[e.key]!==undefined){s=localStorage[e.key]}else{s=e.value}for(r=0;r<s.length;r++){if(s[r]===t.ChecklistEnum.Checked){i+=t.ChecklistEnum.Unchecked}else{i+=s[r]}}}break;default:{for(r=0;r<e.length;r++){i+=t.ChecklistEnum.Unchecked}}}e.value=i;localStorage[e.key]=i},getCheckboxEnumState:function(e){if(e.prop("disabled")===true){return t.ChecklistEnum.Disabled}if(e.prop("checked")===true){return t.ChecklistEnum.Checked}return t.ChecklistEnum.Unchecked},setCheckboxEnumState:function(e,n){switch(n){case t.ChecklistEnum.Disabled:{e.prop("disabled",true);e.prop("checked",false)}break;case t.ChecklistEnum.Checked:{e.prop("checked",true)}break;default:e.prop("checked",false)}e.trigger("change")},triggerCheckbox:function(e,n){var r=t.getCheckboxEnumState(e);if(n===t.ChecklistEnum.Checked&&r===t.ChecklistEnum.Unchecked||n===t.ChecklistEnum.Unchecked&&r===t.ChecklistEnum.Checked){e.trigger("click")}else if(n===t.ChecklistEnum.Disabled&&r!==t.ChecklistEnum.Disabled){e.trigger("dblclick")}},triggerCheckboxEnumState:function(e,n,r){var i=t.getChecklistItem(e,n);t.triggerCheckbox(r,i)},styleCheckbox:function(e,n,r){var i=t.getChecklistItem(e,n);switch(i){case t.ChecklistEnum.Disabled:{r.parent().removeClass("chlCheckboxChecked").addClass("chlCheckboxDisabled")}break;case t.ChecklistEnum.Checked:{r.parent().removeClass("chlCheckboxDisabled").addClass("chlCheckboxChecked")}break;default:{r.parent().removeClass("chlCheckboxDisabled").removeClass("chlCheckboxChecked")}}},initializeCheckboxlist:function(e,n,r){t.initializeChecklist(e,n.length,null,r);n.each(function(n){$(this).change(function(){var r=t.getCheckboxEnumState($(this));t.setChecklistItem(e,n,r)});t.triggerCheckboxEnumState(e,n,$(this))})},initializeTextlist:function(e,t,n,r,i){t.each(function(){var t=$(this).val();e.value.push(t);if(e.valueDefault){e.valueDefault.push(t)}});var s;if(localStorage[e.key]===undefined){localStorage[e.key]=e.value.join(l.cTextDelimiterChar)}else{var o=localStorage[e.key].split(l.cTextDelimiterChar);for(s=0;s<e.value.length;s++){if(o[s]){e.value[s]=o[s]}else{e.value[s]=""}}localStorage[e.key]=e.value.join(l.cTextDelimiterChar)}var u=function(){t.each(function(t){e.value[t]=$(this).val().replace(l.cTextDelimiterRegex,"")});localStorage[e.key]=e.value.join(l.cTextDelimiterChar)};t.each(function(t){$(this).attr("maxlength",r);$(this).val(e.value[t]);$(this).change(function(){if(n){l.write(n+" #"+(t+1)+" updated.")}u()})});if(i){i.click(function(){t.each(function(t){$(this).val(e.valueDefault[t]).trigger("change")})})}},initializeChainChecklist:function(){var n;var r;t.initializeChecklist(t.Checklists.Chain,i.Chains.length);t.initializeChecklist(t.Checklists.ChainSubscription,i.Chains.length);for(n in i.Chains){r=i.Chains[n];var s=$("#barChain_"+r.nexus);var o=$("#chnCheck_"+r.nexus);var u=$("#chnTime_"+r.nexus);switch(t.getChecklistItem(t.Checklists.Chain,r.nexus)){case t.ChecklistEnum.Unchecked:{}break;case t.ChecklistEnum.Checked:{s.css({opacity:a.iconOpacityChecked});o.addClass("chnChecked");if(e.Options.bol_hideChecked){s.hide()}}break;case t.ChecklistEnum.Disabled:{s.hide()}break}if(t.getChecklistItem(t.Checklists.ChainSubscription,r.nexus)===t.ChecklistEnum.Checked){u.addClass("chnTimeSubscribed")}u.click(function(){var e=f.getSubintegerFromHTMLID($(this));if(t.getChecklistItem(t.Checklists.ChainSubscription,e)===t.ChecklistEnum.Checked){$(this).removeClass("chnTimeSubscribed");t.setChecklistItem(t.Checklists.ChainSubscription,e,t.ChecklistEnum.Unchecked)}else{$(this).addClass("chnTimeSubscribed");t.setChecklistItem(t.Checklists.ChainSubscription,e,t.ChecklistEnum.Checked)}});o.click(function(){var n=f.getSubintegerFromHTMLID($(this));var r=$("#barChain_"+n);switch(t.getChecklistItem(t.Checklists.Chain,n)){case t.ChecklistEnum.Unchecked:{r.css({opacity:1}).animate({opacity:a.iconOpacityChecked},a.iconOpacitySpeed);$("#chnDetails_"+n).hide("fast");$(this).addClass("chnChecked");t.setChecklistItem(t.Checklists.Chain,n,t.ChecklistEnum.Checked)}break;case t.ChecklistEnum.Checked:{r.css({opacity:1}).show("fast");r.css({opacity:a.iconOpacityChecked}).animate({opacity:1},a.iconOpacitySpeed);$("#chnDetails_"+n).show("fast");$(this).removeClass("chnChecked");t.setChecklistItem(t.Checklists.Chain,n,t.ChecklistEnum.Unchecked)}break;case t.ChecklistEnum.Disabled:{r.css({opacity:1}).show("fast");$("#chnDetails_"+n).show("fast");$(this).removeClass("chnChecked");t.setChecklistItem(t.Checklists.Chain,n,t.ChecklistEnum.Unchecked)}break}if(t.getChecklistItem(t.Checklists.Chain,n)===t.ChecklistEnum.Checked){if(e.Options.bol_hideChecked){r.hide("fast")}else{r.show("fast")}}a.checkoffChainIcon(n)});$("#chnDelete_"+r.nexus).click(function(){var e=f.getSubintegerFromHTMLID($(this));var n=$("#barChain_"+e);n.hide("slow");t.setChecklistItem(t.Checklists.Chain,e,t.ChecklistEnum.Disabled);a.checkoffChainIcon(e)})}},getChainChecklistState:function(e){return t.getChecklistItem(t.Checklists.Chain,e.nexus)},initializeDungeonChecklist:function(){t.initializeChecklist(t.Checklists.Dungeon,$("#chlDungeon input").length);$("#chlDungeon .chlDungeonBar").each(function(){$(this).prepend("<img src='img/dungeon/"+$(this).data("name").toLowerCase()+l.cPNG+"' />")});var e=function(){var e=t.Checklists.Dungeon.money;var r=~~(e/n.Exchange.COPPER_IN_GOLD);var i=~~(e/n.Exchange.SILVER_IN_GOLD)%n.Exchange.COPPER_IN_SILVER;var s=e%n.Exchange.COPPER_IN_SILVER;$("#chlDungeonCalculator_Gold").text(r);$("#chlDungeonCalculator_Silver").text(i);$("#chlDungeonCalculator_Copper").text(s)};$("#chlDungeon input").each(function(n){$(this).change(function(){var r=t.getCheckboxEnumState($(this));t.setChecklistItem(t.Checklists.Dungeon,n,r);t.styleCheckbox(t.Checklists.Dungeon,n,$(this));var i=$("#chlDungeonCalculator");var s=t.Checklists.Dungeon.money;var o=$(this).data("money");switch($(this).data("mode")){case"E":o+=i.data("moneyaddexp");break}switch(r){case t.ChecklistEnum.Disabled:{t.Checklists.Dungeon.money=s-o}break;case t.ChecklistEnum.Checked:{t.Checklists.Dungeon.money=s+o}break;default:{t.Checklists.Dungeon.money=s-o}}e()})});$("#chlDungeon label").each(function(e){$(this).dblclick(function(){var n=$(this).find("input:first-child");if(n.prop("disabled")===false){if(n.prop("checked")===true){t.triggerCheckbox(n,t.ChecklistEnum.Unchecked)}n.prop("disabled",true).prop("checked",false)}else{n.prop("disabled",false)}t.setChecklistItem(t.Checklists.Dungeon,e,t.getCheckboxEnumState(n));t.styleCheckbox(t.Checklists.Dungeon,e,n)})});$("#chlDungeon input").each(function(e){t.triggerCheckboxEnumState(t.Checklists.Dungeon,e,$(this))});$("#chlDungeonUncheck").click(function(){t.clearChecklist(t.Checklists.Dungeon,t.ChecklistJob.UncheckTheChecked);$("#chlDungeon input").each(function(e){if($(this).prop("checked")===true){$(this).trigger("click")}t.styleCheckbox(t.Checklists.Dungeon,e,$(this))})})},initializeCustomChecklist:function(){var e=$("#chlCustom input:checkbox");t.initializeChecklist(t.Checklists.Custom,e.length);e.each(function(e){$(this).change(function(){var n=t.getCheckboxEnumState($(this));t.setChecklistItem(t.Checklists.Custom,e,n);t.styleCheckbox(t.Checklists.Custom,e,$(this));if(n===t.ChecklistEnum.Checked){$(this).parent().next().addClass("chlCustomTextChecked")}else{$(this).parent().next().removeClass("chlCustomTextChecked")}});t.triggerCheckboxEnumState(t.Checklists.Custom,e,$(this))});$("#chlCustomUncheck").click(function(){t.clearChecklist(t.Checklists.Custom,t.ChecklistJob.UncheckTheChecked);$("#chlCustom input:checkbox").each(function(e){if($(this).prop("checked")===true){$(this).trigger("click")}t.styleCheckbox(t.Checklists.Custom,e,$(this))})});var n=$("#chlCustom input:text");var r=$("#chlCustomRestore");t.initializeTextlist(t.Textlists.CustomText,n,"Custom checklist item",48,r)},initializeNotepad:function(){$("#chlNotepadButtons button").each(function(e){$(this).click(function(){$("#chlNotepadSheets textarea").hide().eq(e).show().css({opacity:.5}).animate({opacity:1},400);$("#chlNotepadButtons button").removeClass("btnFocused");$(this).addClass("btnFocused")})}).first().click();var n=$("#chlNotepadSheets textarea");var r=$("#chlNotepadRestore");t.initializeTextlist(t.Textlists.NotepadText,n,"Notepad sheet",4096,r);n.css("height",e.Options.int_sizeNotepadHeight);n.css("font-size",e.Options.int_sizeNotepadFont);n.first().show()}};n={Exchange:{COPPER_IN_SILVER:100,COPPER_IN_GOLD:1e4,SILVER_IN_GOLD:100,CENTS_IN_DOLLAR:100,GEM_PER_DOLLAR:.8,DOLLAR_PER_GEM:1.25},Rarity:{Junk:0,Basic:1,Fine:2,Masterwork:3,Rare:4,Exotic:5,Ascended:6,Legendary:7},cNUM_ITEM_RARITIES:8,cREFRESH_LIMIT:5e3,cSEARCH_LIMIT:750,cEXCHANGE_LIMIT:250,isTradingCalculatorsInitialized:false,RefreshTimeout:{},copper:function(e){return"<copper>"+e+"</copper>"},silver:function(e){return"<silver>"+e+"</silver>"},gold:function(e){return"<gold>"+e+"</gold>"},parseCoinString:function(e){if(e===undefined||e===null){return 0}var t=e.split(".");var r=t.length;var i=0,s=0,o=0;if(r===0){return 0}if(r===1){s=parseInt(t[0])}if(r>=2){i=parseInt(t[r-1]);s=parseInt(t[r-2])}if(r===2&&t[r-1].length===1){i=i*u.cBASE_10}if(r>=3){o=parseInt(t[r-3])}if(!isFinite(i)){i=0}if(!isFinite(s)){s=0}if(!isFinite(o)){o=0}return parseInt(i+s*n.Exchange.COPPER_IN_SILVER+o*n.Exchange.COPPER_IN_GOLD)},parseQuantityString:function(e){var t=parseInt(e);if(!isFinite(t)){t=1}return t},createCoinString:function(e){if(e===undefined||isFinite(e)===false){return"0.00"}e=parseInt(e);var t=Math.abs(~~(e/n.Exchange.COPPER_IN_GOLD));var r=Math.abs(~~(e/n.Exchange.SILVER_IN_GOLD)%n.Exchange.COPPER_IN_SILVER);var i=Math.abs(e%n.Exchange.COPPER_IN_SILVER);var s=e<0?"−":"";if(t>0&&r<u.cBASE_10){r="0"+r}if(i<u.cBASE_10){i="0"+i}if(t>0){return s+t+"."+r+"."+i}if(r>0){return s+r+"."+i}return s+"0."+i},parseMoneyString:function(e){if(e===undefined||e===null){return 0}var t=e.split(".");var r=t.length;var i=0,s=0;if(r===0){return 0}if(r===1){s=parseInt(t[0])}if(r>=2){i=parseInt(t[r-1]);s=parseInt(t[r-2])}if(r>=2&&t[r-1].length===1){i=i*u.cBASE_10}else if(r>=2&&t[r-1].length>=2){i=parseInt(i.toString().substring(0,2))}if(!isFinite(i)){i=0}if(!isFinite(s)){s=0}return parseInt(i+s*n.Exchange.CENTS_IN_DOLLAR)},createMoneyString:function(e){if(e===undefined||isFinite(e)===false){return"0.00"}e=parseInt(e);var t=Math.abs(~~(e/n.Exchange.CENTS_IN_DOLLAR));var r=Math.abs(e%n.Exchange.CENTS_IN_DOLLAR);var i=e<0?"−":"";if(r<u.cBASE_10){r="0"+r}return i+t+"."+r},createPercentString:function(e,t){if(e===undefined||isFinite(e)===false){return"0%"}if(t===undefined){t=0}var n=e<0?"−":"";return n+Math.abs(e*100).toFixed(t)+"%"},setRarityClass:function(e,t){e.each(function(){for(var e=0;e<n.cNUM_ITEM_RARITIES;e++){$(this).removeClass("rarity"+e.toString())}});if(n.Rarity[t]!==undefined){e.addClass("rarity"+n.Rarity[t].toString())}},animateValue:function(e,t,n){if(n<t){e.css({color:"#ff2200"}).animate({color:"#ffeebb"},5e3)}else if(n>t){e.css({color:"#44dd44"}).animate({color:"#ffeebb"},5e3)}else{e.css({"border-radius":32}).animate({"border-radius":4},1e3)}},calculateTrading:function(e){var t=.05;var r=.1;var i=t+r;var s=1-i;var o=n.parseCoinString(e.find(".trdBuy").val());var u=n.parseCoinString(e.find(".trdSell").val());var a=n.parseQuantityString(e.find(".trdQuantity").val());var f=e.find(".trdCost");var l=e.find(".trdTax");var c=e.find(".trdRevenue");var h=e.find(".trdProfit");var p=e.find(".trdBreak");var d=e.find(".trdMargin");var v=(u-u*i-o)*a;var m=(u-u*r)*a;var g=o*a;var y=u*t*a;var b=u*r*a;f.val("−"+n.createCoinString(Math.round(g)));l.val("−"+n.createCoinString(Math.round(y))+" + −"+n.createCoinString(Math.round(b)));p.val(n.createCoinString(Math.round(o/s)));c.val(n.createCoinString(Math.round(m)));h.val(n.createCoinString(Math.round(v)));d.val(n.createPercentString(m/(g+y)-1,2));$([h,d]).each(function(){var e=Math.round(v);$(this).removeClass("trdZero trdGain trdLoss");if(e===0){$(this).addClass("trdZero")}else if(e>0){$(this).addClass("trdGain")}else if(e<0){$(this).addClass("trdLoss")}})},updateTradingDetails:function(e){var t=e.find(".trdName").val();var r=e.find(".trdItem").val();if(isFinite(parseInt(r))===false||t.length===0){return}$.getJSON(f.URL_API.ItemDetails+r,function(t){n.setRarityClass(e.find(".trdName"),t.rarity);e.find(".trdIcon").attr("src",f.getAssetIconURL(t));e.find(".trdLink").val(f.getChatlinkFromItemID(r))})},updateTradingPrices:function(e){var i=f.escapeHTML(e.find(".trdName").val());var s=e.find(".trdItem").val();if(isFinite(parseInt(s))===false||i.length===0){return}var o=0,u=0;var a=0,c=0;var h=e.find(".trdCurrentBuy");var p=e.find(".trdCurrentSell");var d=e.find(".trdNotifyBuyLow");var v=e.find(".trdNotifyBuyHigh");var m=e.find(".trdNotifySellLow");var g=e.find(".trdNotifySellHigh");var y=n.parseCoinString(d.val());var b=n.parseCoinString(v.val());var w=n.parseCoinString(m.val());var S=n.parseCoinString(g.val());$.getJSON(f.URL_API.ItemListing+s,function(r){o=n.parseCoinString(e.find(".trdCurrentBuy").first().val());u=n.parseCoinString(e.find(".trdCurrentSell").first().val());if(r.buys!==undefined){a=parseInt(r.buys[r.buys.length-1].unit_price)}if(r.sells!==undefined){c=parseInt(r.sells[0].unit_price)}h.val(n.createCoinString(a));p.val(n.createCoinString(c));if(t.getChecklistItem(t.Checklists.TradingOverwrite,f.getSubintegerFromHTMLID(e))===t.ChecklistEnum.Checked){e.find(".trdBuy").val(h.val()).trigger("change").trigger("input");e.find(".trdSell").val(p.val()).trigger("change").trigger("input")}}).done(function(){n.animateValue(h,o,a);n.animateValue(p,u,c);if(t.isChecked(t.Checklists.TradingNotify,e)){if(a<=y&&y!==0&&a!==0){d.addClass("trdMatched");r.speak(r.getString("buy low")+" "+i)}else{d.removeClass("trdMatched")}if(a>=b&&b!==0&&a!==0){v.addClass("trdMatched");r.speak(r.getString("buy high")+" "+i)}else{v.removeClass("trdMatched")}if(c<=w&&w!==0&&c!==0){m.addClass("trdMatched");r.speak(r.getString("sell low")+" "+i)}else{m.removeClass("trdMatched")}if(c>=S&&S!==0&&c!==0){g.addClass("trdMatched");r.speak(r.getString("sell high")+" "+i)}else{g.removeClass("trdMatched")}}}).fail(function(){l.write("Error retrieving API data for "+f.escapeHTML(e.find(".trdName").val()))})},updateAllTradingDetails:function(){$("#trdList .trdEntry").each(function(){n.updateTradingDetails($(this))})},updateAllTradingPrices:function(){$("#trdList .trdEntry").each(function(){n.updateTradingPrices($(this))})},clearCalculator:function(e){n.setRarityClass(e.find(".trdName"));e.find(".trdIcon").attr("src",f.URL_IMG.Placeholder);e.find(".trdItem").val("").trigger("change");e.find(".trdCurrentBuy").val("");e.find(".trdCurrentSell").val("");e.find(".trdResultsContainer").remove();e.find(".trdNotifyBuyLow").val("").trigger("change").removeClass("trdMatched");e.find(".trdNotifyBuyHigh").val("").trigger("change").removeClass("trdMatched");e.find(".trdNotifySellLow").val("").trigger("change").removeClass("trdMatched");e.find(".trdNotifySellHigh").val("").trigger("change").removeClass("trdMatched")},initializeTrading:function(){var i;var s="";var o,u,a,c;for(i=0;i<e.Options.int_numTradingCalculators;i++){s="#trdEntry_"+i;$("#trdList").append("<div id='trdEntry_"+i+"' class='trdEntry'>"+"<div class='trdAccordion trdAccordionShut'>"+"<samp><img class='trdIcon' src='"+f.URL_IMG.Placeholder+"' /></samp>"+"<input class='trdItem' type='text' />"+"<div class='trdResultsFocus'><input class='trdName' type='text' /></div>"+"<div class='trdButtons'>"+"<button class='trdSearch' tabindex='-1'>S</button><button class='trdWiki' tabindex='-1'>W</button><br />"+"</div>"+"<div class='trdExpand'>"+"<samp>$~O</samp><input class='trdBuy' type='text' />"+"<samp>−$~</samp><input class='trdCost trdOutput' type='text' tabindex='-1' /><br />"+"<samp>O~$</samp><input class='trdSell' type='text' />"+"<samp>$=$</samp><input class='trdBreak trdOutput' type='text' tabindex='-1' /><br />"+"<samp>×</samp><input class='trdQuantity' type='text' />"+"<samp>−$%</samp><input class='trdTax trdOutput' type='text' tabindex='-1' /><br />"+"<samp>+$</samp><input class='trdProfit trdOutput' type='text' tabindex='-1' />"+"<samp>=$</samp><input class='trdRevenue trdOutput' type='text' tabindex='-1' /><br />"+"<samp>+$%</samp><input class='trdMargin trdOutput' type='text' tabindex='-1' />"+"<samp>[]</samp><input class='trdLink trdOutput' type='text' tabindex='-1' /><br />"+"<samp>$~!</samp>"+"<input class='trdNotifyBuyHigh' type='text' />"+"<input class='trdCurrentBuy trdOutput' type='text' tabindex='-1' />"+"<input class='trdNotifyBuyLow' type='text' />"+"<label title='<dfn>"+r.getSentence("overwrite")+"</dfn>: Replace the calculator buy and sell prices with the current prices when refreshing.'>"+"<input class='trdOverwrite' type='checkbox' tabindex='-1' />&zwnj;</label>"+"<samp>!~$</samp>"+"<input class='trdNotifySellHigh' type='text' />"+"<input class='trdCurrentSell trdOutput' type='text' tabindex='-1' />"+"<input class='trdNotifySellLow' type='text' />"+"<label title='<dfn>"+r.getSentence("notify")+"</dfn>: Turn on sound notification for this item.'>"+"<input class='trdNotify' type='checkbox' tabindex='-1' />&zwnj;</label>"+"<br /><br /></div>"+"</div>"+"<div class='trdPreview'>"+"<input class='trdCurrentBuy trdOutput' type='text' tabindex='-1' />"+"<input class='trdCurrentSell trdOutput' type='text' tabindex='-1' />"+"</div>"+"</div>");l.qTip.init($(s+" .trdOverwrite").parent());l.qTip.init($(s+" .trdNotify").parent());o=$(s+" .trdName");u=$(s+" .trdBuy");a=$(s+" .trdSell");c=$(s+" .trdQuantity");$(s+" input").click(function(){$(this).select()});$(s+" .trdWiki").click(function(){var e=$(this).parents(".trdEntry").find(".trdName").val();f.openExternalURL(f.getWikiLanguageLink(e))});$(s+" .trdSearch").click(function(){var e=$(this).parents(".trdEntry").find(".trdItem").val();var t=$(this).parents(".trdEntry").find(".trdName").val();if(e.length===0){f.openExternalURL(f.getTradingSearchLink(t))}else{f.openExternalURL(f.getTradingItemLink(e,t))}});$([u,a,c]).each(function(){$(this).on("input",function(){n.calculateTrading($(this).parent())})});$(o).on("input",$.throttle(n.cSEARCH_LIMIT,function(){var t=$(this).val();var r=$(this).parents(".trdEntry");var i,s;if(t.length<3){n.clearCalculator(r);return}$.getJSON(f.URL_API.ItemSearch+t,function(o){r.find(".trdResultsContainer").remove();var u;var a,l;if(o.results.length>0){i=$("<div class='trdResultsContainer jsRemovable'></div>").insertAfter(r.find(".trdName"));s=$("<div class='trdResults cntPopup'></div>").appendTo(i);for(u=0;u<o.results.length&&u<e.Options.int_numTradingResults;u++){a=o.results[u];l=$("<ins class='rarity"+a.rarity+"' data-id='"+a.data_id+"' "+"data-buy='"+n.createCoinString(a.max_offer_unit_price)+"' "+"data-sell='"+n.createCoinString(a.min_sale_unit_price)+"'>"+"<img src='"+a.img+"'>"+f.wrapSubstringHTML(a.name,t,"u")+"</ins>").appendTo(s);l.click(function(){var e=$(this).parents(".trdResultsContainer");var t=e.parents(".trdEntry");t.find(".trdItem").val($(this).data("id")).trigger("change");t.find(".trdName").val($(this).text()).trigger("change");n.updateTradingDetails(t);n.updateTradingPrices(t);e.remove()})}}})})).onEnterKey(function(){f.openExternalURL(f.getTradingSearchLink($(this).val()))}).onEscapeKey(function(){$(this).parents(".trdEntry").find(".trdResultsContainer").remove()}).click(function(){$(this).trigger("input")})}s="#trdEntry_"+0;$(s+" .trdIcon").attr("src","img/ui/faq.png");$(s+" .trdName").val("Bifrost");$(s+" .trdBuy").val("4500.37.68");$(s+" .trdSell").val("550037.68");$(s+" .trdQuantity").val("1");$(s).css("margin-bottom","6px");var h=function(e,t,n){if(n===undefined){n=""}else{n=": "+n}$(s+" .trd"+e).attr("title","<dfn>"+r.getString(t)+"</dfn>"+n)};h("Name","name");h("Buy","your buy");h("Sell","your sell");h("Quantity","quantity");h("Cost","cost","Money needed to buy the items.");h("Break","breakpoint","Sell higher than this to make a profit.");h("Tax","tax","Pay 5% fee of sell price to list, and deduct 10% tax of sell price when sold.");h("Profit","profit","Gains after losses from buying and tax.");h("Margin","margin","Revenue over cost and fee.");h("Revenue","revenue","What you will receive at the trader.");h("Link","chatlink","Paste this in game chat to see the item.");h("NotifyBuyLow","buy low","Notify you if current BUY price is LOWER than this.");h("NotifyBuyHigh","buy high","Notify you if current BUY price is HIGHER than this.");h("NotifySellLow","sell low","Notify you if current SELL price is LOWER than this.");h("NotifySellHigh","sell high","Notify you if current SELL price is HIGHER than this.");h("CurrentBuy","current buy");h("CurrentSell","current sell");l.qTip.init($(s+" input"));t.initializeTextlist(t.Textlists.TradingItem,$("#trdList .trdItem"),null,16);t.initializeTextlist(t.Textlists.TradingName,$("#trdList .trdName"),null,64);t.initializeTextlist(t.Textlists.TradingBuy,$("#trdList .trdBuy"),null,16);t.initializeTextlist(t.Textlists.TradingSell,$("#trdList .trdSell"),null,16);t.initializeTextlist(t.Textlists.TradingQuantity,$("#trdList .trdQuantity"),null,16);t.initializeTextlist(t.Textlists.NotifyBuyLow,$("#trdList .trdNotifyBuyLow"),null,16);t.initializeTextlist(t.Textlists.NotifyBuyHigh,$("#trdList .trdNotifyBuyHigh"),null,16);t.initializeTextlist(t.Textlists.NotifySellLow,$("#trdList .trdNotifySellLow"),null,16);t.initializeTextlist(t.Textlists.NotifySellHigh,$("#trdList .trdNotifySellHigh"),null,16);t.initializeCheckboxlist(t.Checklists.TradingOverwrite,$("#trdList .trdOverwrite"),t.ChecklistJob.AllChecked);t.initializeCheckboxlist(t.Checklists.TradingNotify,$("#trdList .trdNotify"),t.ChecklistJob.AllChecked);$("#trdList .trdSell").trigger("input");n.updateAllTradingDetails();n.updateAllTradingPrices();$("#trdToggle").click(function(){if($("#trdEntry_0 .trdBuy").is(":visible")){$(".trdAccordion").addClass("trdAccordionShut").removeClass("trdAccordionOpen");$(".trdPreview").removeClass("cssHidden")}else{$(".trdAccordion").removeClass("trdAccordionShut").addClass("trdAccordionOpen");$(".trdPreview").addClass("cssHidden")}});$("#trdRefresh").click($.throttle(n.cREFRESH_LIMIT,function(){n.loopRefresh()}));$("#trdMute").click(function(){r.resetSpeechQueue()})},updateCoinTo:function(e){var t=0,r=0;var i=0,s=0;var o=$("#trdExchange .trdCoinTo");var u=$("#trdExchange .trdCoinToGem");var a=$("#trdExchange .trdCoinToMoney");var l=n.parseCoinString(o.val());if(l===0){u.val("");a.val("")}else{$.getJSON(f.URL_API.GemPrice+l,function(e){t=parseInt(u.val());i=n.parseMoneyString(a.val());if(e.quantity!==undefined){r=parseInt(e.quantity);s=parseInt(r*n.Exchange.DOLLAR_PER_GEM);u.val(r);a.val(n.createMoneyString(s))}}).always(function(){if(e===undefined||e){n.animateValue(u,t,r);n.animateValue(a,i,s)}if(r===0){u.val("0");a.val("0")}})}},updateGemTo:function(e){var t=0,r=0;var i=0,s=0;var o=$("#trdExchange .trdGemTo");var u=$("#trdExchange .trdGemToCoin");var a=$("#trdExchange .trdGemToMoney");var l=o.val();if(l===0){u.val("");a.val("")}else{$.getJSON(f.URL_API.CoinPrice+l,function(e){t=n.parseCoinString(u.val());i=n.parseMoneyString(a.val());if(e.quantity!==undefined){r=parseInt(e.quantity);s=parseInt(l*n.Exchange.DOLLAR_PER_GEM);u.val(n.createCoinString(r));a.val(n.createMoneyString(s))}}).always(function(){if(e===undefined||e){n.animateValue(u,t,r);n.animateValue(a,i,s)}if(r===0){u.val("0");a.val("0")}})}},updateMoneyTo:function(e){var t=0,r=0;var i=0,s=0;var o=$("#trdExchange .trdMoneyTo");var u=$("#trdExchange .trdMoneyToGem");var a=$("#trdExchange .trdMoneyToCoin");var l=n.parseMoneyString(o.val());var c=l*n.Exchange.GEM_PER_DOLLAR;if(l===0){u.val("");a.val("")}else{$.getJSON(f.URL_API.CoinPrice+c,function(e){t=parseInt(u.val());i=n.parseCoinString(a.val());if(e.quantity!==undefined){r=c;s=parseInt(e.quantity);u.val(c);a.val(n.createCoinString(s))}}).always(function(){if(e===undefined||e){n.animateValue(u,t,r);n.animateValue(a,i,s)}if(s===0){u.val("0");a.val("0")}})}},updateAllExchange:function(){n.updateCoinTo();n.updateGemTo();n.updateMoneyTo()},initializeExchange:function(){var e=$("#trdExchange .trdCoinTo");var r=$("#trdExchange .trdGemTo");var i=$("#trdExchange .trdMoneyTo");e.val("200..");r.val("4000");i.val("50");$("#trdExchange input").click(function(){$(this).select()});e.on("input",$.throttle(n.cEXCHANGE_LIMIT,function(){n.updateCoinTo(false)})).onEnterKey($.throttle(n.cEXCHANGE_LIMIT,function(){n.updateCoinTo()}));r.on("input",$.throttle(n.cEXCHANGE_LIMIT,function(){n.updateGemTo(false)})).onEnterKey($.throttle(n.cEXCHANGE_LIMIT,function(){n.updateGemTo()}));i.on("input",$.throttle(n.cEXCHANGE_LIMIT,function(){n.updateMoneyTo(false)})).onEnterKey($.throttle(n.cEXCHANGE_LIMIT,function(){n.updateMoneyTo()}));t.initializeTextlist(t.Textlists.ExchangeUnit,$([e,r,i]),null,16);n.isTradingCalculatorsInitialized=true;n.loopRefresh()},cancelLoopRefresh:function(){window.clearTimeout(n.RefreshTimeout);$(".trdProgress").stop().css({width:"100%"})},loopRefresh:function(){n.cancelLoopRefresh();if(e.Options.bol_refreshPrices){n.updateAllTradingPrices();n.updateAllExchange();var t=e.Options.int_secTradingRefresh*u.cMILLISECONDS_IN_SECOND;$(".trdProgress").animate({width:"0%"},t);n.RefreshTimeout=setTimeout(n.loopRefresh,t)}}};r={Phrase:{s_TEMPLATE:{de:"",es:"",fr:"",cs:"",it:"",pl:"",pt:"",ru:"",zh:""},s_h:{de:"s",es:"h",fr:"h",cs:"h",it:"o",pl:"g",pt:"h",ru:"ч",zh:"時"},s_m:{de:"m",es:"m",fr:"m",cs:"m",it:"m",pl:"m",pt:"m",ru:"м",zh:"分"},s_s:{de:"s",es:"s",fr:"s",cs:"s",it:"s",pl:"s",pt:"s",ru:"с",zh:"秒"},s_hour:{de:"stunde",es:"hora",fr:"heure",cs:"hodina",it:"ora",pl:"godzinę",pt:"hora",ru:"час",zh:"時"},s_minute:{de:"minute",es:"minuto",fr:"minute",cs:"minuta",it:"minuto",pl:"minuta",pt:"minuto",ru:"минута",zh:"分"},s_second:{de:"sekunde",es:"segundo",fr:"seconde",cs:"sekunda",it:"secondo",pl:"sekund",pt:"segundo",ru:"секунду",zh:"秒"},s_hours:{de:"studen",es:"horas",fr:"heures",cs:"hodin",it:"secondi",pl:"godzin",pt:"horas",ru:"часов",zh:"時"},s_minutes:{de:"minuten",es:"minutos",fr:"minutes",cs:"minut",it:"minuti",pl:"minut",pt:"minutos",ru:"минут",zh:"分"},s_seconds:{de:"sekunden",es:"segundos",fr:"secondes",cs:"sekund",it:"ore",pl:"sekund",pt:"segundos",ru:"секунд",zh:"秒"},s_half_an_hour:{de:"eine halbe stunde",es:"media hora",fr:"demi-heure",cs:"půl hodiny",it:"mezz'ora",pl:"pół godziny",pt:"meia hora",ru:"полчаса",zh:"半小時"},s_world_boss:{de:"weltboss",es:"jefe mundo",fr:"chef monde",cs:"svět boss",it:"boss mondo",pl:"świat szef",pt:"chefe mundo",ru:"мир босс",zh:"世界頭目"},s_section:{de:"paragraph",es:"sección",fr:"section",cs:"oddíl",it:"sezione",pl:"sekcja",pt:"seção",ru:"параграф",zh:"節"},s_Vista:{de:"Aussichtspunkt",es:"Vista",fr:"Panorama"},s_Skill_Challenge:{de:"Fertigkeitspunkt",es:"Desafío de habilidad",fr:"Défi de compétence"},s_checklist:{de:"prüfliste",es:"lista de comprobación",fr:"liste de contrôle",cs:"kontrolní seznam",it:"elenco di controllo",pl:"lista kontrolna",pt:"lista de verificação",ru:"контрольный список",zh:"檢查清單"},s_subscription:{de:"abonnement",es:"suscripción",fr:"abonnement",cs:"předplatné",it:"sottoscrizione",pl:"abonament",pt:"assinatura",ru:"подписка",zh:"訂閱"},s_alarm:{de:"alarm",es:"alarma",fr:"alarme",cs:"alarmu",it:"allarme",pl:"alarmu",pt:"alarme",ru:"будильник",zh:"鬧鐘"},s_mode:{de:"modus",es:"modo",fr:"mode",cs:"režim",it:"modalità",pl:"tryb",pt:"modo",ru:"режим",zh:"方式"},s_chatlink:{de:"chatlink",es:"vínculo chat",fr:"lien chat",cs:"chat odkaz",it:"collegamento chat",pl:"czat łącze",pt:"link bate-papo",ru:"чат связь",zh:"連結聊天"},s_is:{de:"ist",es:"es",fr:"est",cs:"je",it:"è",pl:"jest",pt:"é",ru:"является",zh:"是"},s_subscribe:{de:"abonnieren",es:"subscribir",fr:"abonner",cs:"předplatit si",it:"sottoscrivere",pl:"abonować",pt:"assinar",ru:"подписываться",zh:"訂閱"},s_will_start:{de:"wird starten",es:"se iniciará",fr:"débutera",cs:"začne",it:"inizierà",pl:"rozpocznie się",pt:"começará",ru:"начнется",zh:"開始"},s_ago:{de:"vor",es:"hace",fr:"il ya",cs:"před",it:"fa",pl:"temu",pt:"há",ru:"назад",zh:"前"},s_also:{de:"auch",es:"también",fr:"aussi",cs:"také",it:"anche",pl:"też",pt:"também",ru:"то́же",zh:"也"},s_checked:{de:"abgehakt",es:"visto",fr:"coché",cs:"odškrtnout",it:"controllato",pl:"zakończony",pt:"marcado",ru:"галочка",zh:"勾掉"},s_current:{de:"aktuelle",es:"actual",fr:"actuel",cs:"současný",it:"corrente",pl:"bieżący",pt:"corrente",ru:"текущий",zh:"活期"},s_next:{de:"nächste",es:"siguiente",fr:"prochain",cs:"příští",it:"seguente",pl:"następny",pt:"próximo",ru:"следующий",zh:"下一"},s_off:{de:"aus",es:"desactivado",fr:"désactivé",cs:"vypnuto",it:"disattivato",pl:"wyłączany",pt:"desativado",ru:"выключено",zh:"關"},s_subscribed:{de:"abonniert",es:"suscrito",fr:"souscrit",cs:"odebírané",it:"sottoscritti",pl:"subskrypcji",pt:"assinado",ru:"подписал",zh:"訂閱"},s_then:{de:"dann",es:"luego",fr:"puis",cs:"pak",it:"poi",pl:"potem",pt:"então",ru:"затем",zh:"接著"},s_and:{de:"und",es:"y",fr:"et",cs:"a",it:"e",pl:"i",pt:"e",ru:"и",zh:"和"},s_in:{de:"in",es:"en",fr:"en",cs:"za",it:"in",pl:"w",pt:"em",ru:"в",zh:"在"},s_Scheduled_Bosses:{de:"Geplant",es:"Programado",fr:"Planifié",cs:"Plánované",it:"Pianificata",pl:"Zaplanowane",pt:"Agendado",ru:"Запланирован",zh:"已排程"},s_Legacy_Bosses:{de:"Legacy",es:"Heredado",fr:"Hérité",cs:"Starší",it:"Legacy",pl:"Starsze",pt:"Herdado",ru:"Устаревший",zh:"舊版"},s_Orr_Temples:{de:"Tempel",es:"Templos",fr:"Temples",cs:"Chrámy",it:"Templi",pl:"Świątynie",pt:"Templos",ru:"Храмы",zh:"寺廟"},s_Full_Timetable:{de:"Zeitplan",es:"Horario",fr:"Horaire",cs:"Plán",it:"Programma",pl:"Harmonogram",pt:"Horário",ru:"Расписание",zh:"時間表"},s_news:{de:"nachrichten",es:"noticias",fr:"actualités",cs:"zprávy",it:"notizie",pl:"wiadomości",pt:"notícias",ru:"новости",zh:"新聞"},s_simple_mode:{de:"einfach modus",es:"modo simple",fr:"mode simple",cs:"prostý režim",it:"modalità semplice",pl:"prosty tryb",pt:"modo simples",ru:"простой режим",zh:"方式簡單"},s_chests:{de:"schatztruhen",es:"cofres del tesoro",fr:"coffres au trésor",cs:"truhly",it:"scrigni del tesoro",pl:"skrzynie",pt:"baús de tesouro",ru:"сундуки с сокровищами",zh:"寶箱"},s_your:{de:"dein",es:"tu",fr:"ton",cs:"tvůj",it:"tuo",pl:"twój",pt:"teu",ru:"твой",zh:"你的"},s_name:{de:"namen",es:"nombre",fr:"nom",cs:"název",it:"nome",pl:"nazwa",pt:"nome",ru:"имя",zh:"名"},s_buy:{de:"kaufen",es:"comprar",fr:"acheter",cs:"koupit",it:"comprare",pl:"kupić",pt:"comprar",ru:"купить",zh:"買"},s_sell:{de:"verkaufen",es:"vender",fr:"vendre",cs:"prodat",it:"vendere",pl:"sprzedać",pt:"vender",ru:"продать",zh:"賣"},s_quantity:{de:"quantität",es:"cantidad",fr:"quantité",cs:"množství",it:"quantità",pl:"ilość",pt:"quantidade",ru:"количество",zh:"量"},s_profit:{de:"gewinn",es:"beneficio",fr:"profit",cs:"zisk",it:"profitto",pl:"zysk",pt:"lucro",ru:"прибыль",zh:"利潤"},s_cost:{de:"kosten",es:"costo",fr:"coût",cs:"náklady",it:"costo",pl:"koszt",pt:"custo",ru:"стоимость",zh:"成本"},s_breakpoint:{de:"gewinnschwelle",es:"punto muerto",fr:"seuil de rentabilité",cs:"bod zvratu",it:"punto di pareggio",pl:"próg rentowności",pt:"ponto de equilíbrio",ru:"точка безубыточности",zh:"收支平衡點"},s_tax:{de:"steuer",es:"impuestos",fr:"impôt",cs:"daň",it:"fiscale",pl:"podatek",pt:"fiscal",ru:"налог",zh:"稅"},s_revenue:{de:"einnahmen",es:"ingresos",fr:"revenus",cs:"příjmy",it:"entrate",pl:"dochody",pt:"receita",ru:"доходов",zh:"收入"},s_margin:{de:"marge",es:"margen",fr:"marge",cs:"marže",it:"margine",pl:"marża",pt:"margem",ru:"валовая",zh:"邊際"},s_low:{de:"niedrigen",es:"bajo",fr:"bas",cs:"nízký",it:"bassa",pl:"niski",pt:"baixa",ru:"низкая",zh:"低"},s_high:{de:"hohen",es:"alta",fr:"haut",cs:"vysoký",it:"alta",pl:"wysoki",pt:"alta",ru:"высокая",zh:"高"},s_notify:{de:"benachrichtigen",es:"notificar",fr:"notifier",cs:"oznámit",it:"notifica",pl:"powiadom",pt:"notificar",ru:"уведомить",zh:"通知"},s_overwrite:{de:"überschreiben",es:"sobrescribir",fr:"remplacer",cs:"přepsat",it:"sovrascrivi",pl:"zastąp",pt:"substituir",ru:"перезаписать",zh:"覆寫"}},Element:{s_TEMPLATE:{de:"",es:"",fr:"",cs:"",it:"",pl:"",pt:"",ru:"",zh:""},s_menuChains:{de:"Ketten",es:"Cadenas",fr:"Chaînes",cs:"Řetězy",it:"Catene",pl:"Łańcuchy",pt:"Cadeias",ru:"Цепи",zh:"鏈"},s_menuMap:{de:"Werkzeuge",es:"Útiles",fr:"Outils",cs:"Nástroje",it:"Strumenti",pl:"Narzędzia",pt:"Ferramentas",ru:"Средства",zh:"工具"},s_menuWvW:{de:"WvW",es:"WvW",fr:"WvW",cs:"WvW",it:"WvW",pl:"WvW",pt:"WvW",ru:"WvW",zh:"WvW"},s_menuHelp:{de:"Hilfe",es:"Ayuda",fr:"Assistance",cs:"Pomoci",it:"Guida",pl:"Pomoc",pt:"Ajuda",ru:"Помощь",zh:"輔助"},s_menuOptions:{de:"Optionen",es:"Opciónes",fr:"Options",cs:"Možnosti",it:"Opzioni",pl:"Opcje",pt:"Opções",ru:"Параметры",zh:"選項"}},getTranslation:function(t,n){if(e.Options.enu_Language===e.OptionEnum.Language.Default){return t}var r;var i;var s=t;if(s.indexOf(" ")!==-1){s=s.replace(/ /g,"_")}var r=n["s_"+s];if(r){i=r[e.Options.enu_Language];if(i){return i}return t}return"notranslation"},getPhrase:function(e){return r.getTranslation(e,r.Phrase)},getSentence:function(e){return f.toFirstUpperCase(r.getTranslation(e,r.Phrase))},getElement:function(e){return r.getTranslation(e,r.Element)},getString:function(e,t){if(t===undefined){t=f.CaseEnum.Every}var n=e.split(" ");for(var i in n){n[i]=r.getTranslation(n[i],r.Phrase)}return f.changeCase(n.join(" "),t)},getModifiedWord:function(e,t,n){var i="";if(t){var s=r.getPhrase(e);var o=r.getPhrase(t);i=r.isLanguageModifierFirst()?o+" "+s:s+" "+o}else{i=r.getPhrase(e)}return f.changeCase(i,n)},translatePageHeader:function(t){if(e.Options.enu_Language!==e.OptionEnum.Language.Default){$("#layer"+t+" .cntHeader").text(r.getElement("menu"+t))}},translateAfter:function(){if(e.Options.enu_Language!==e.OptionEnum.Language.Default){$(".jsTranslate").each(function(){$(this).text(r.getPhrase($(this).text()))});$(".menuButton").each(function(){$(this).attr("title","<dfn>"+r.getElement($(this).attr("id"))+"</dfn>");l.qTip.init($(this))});r.translatePageHeader(l.PageEnum.Options)}$("#optAlarmLegend").text(r.getModifiedWord("mode","alarm",f.CaseEnum.Every));$("#opt_int_setAlarm").after(" "+r.getSentence("off"));$("#optAlarmChecklist").after(" "+r.getSentence("checklist"));$("#optAlarmSubscription").after(" "+r.getSentence("subscription"))},isLanguageFullySupported:function(){if(e.Options.enu_Language===e.OptionEnum.Language.English||e.Options.enu_Language===e.OptionEnum.Language.German||e.Options.enu_Language===e.OptionEnum.Language.Spanish||e.Options.enu_Language===e.OptionEnum.Language.French){return true}return false},getFullySupportedLanguage:function(){if(r.isLanguageFullySupported()){return e.Options.enu_Language}return e.OptionEnum.Language.Default},isLanguageSecondary:function(){if(e.Options.enu_Language===e.OptionEnum.Language.German||e.Options.enu_Language===e.OptionEnum.Language.Spanish||e.Options.enu_Language===e.OptionEnum.Language.French){return true}return false},isLanguageModifierFirst:function(){if(e.Options.enu_Language===e.OptionEnum.Language.French||e.Options.enu_Language===e.OptionEnum.Language.Spanish||e.Options.enu_Language===e.OptionEnum.Language.Italian||e.Options.enu_Language===e.OptionEnum.Language.Portuguese||e.Options.enu_Language===e.OptionEnum.Language.Mandarin){return false}return true},isLanguageLogographic:function(){if(e.Options.enu_Language===e.OptionEnum.Language.Mandarin){return true}return false},ChainTitle:[{en:"Fire Elemental",de:"Feuerelementar",es:"Elemental de Fuego",fr:"Elémentaire de Feu",cs:"Ohnivý Elementál",it:"Elementale del Fuoco",pl:"Ognisty Żywioł",pt:"Fogo Elemental",ru:"Огонь Элементаль",zh:"火元素"},{en:"Golem Mark II",de:"Golem Typ II",es:"Gólem Serie II",fr:"Golem Marque II",cs:"Golem Typu II",it:"Golem Tipo II",pl:"Golem Model II",pt:"Golem Tipo II",ru:"Голем Тип II",zh:"Golem 2型"},{en:"Claw of Jormag",de:"Klaue Jormags",es:"Garra de Jormag",fr:"Griffe de Jormag",cs:"Dráp Jormag",it:"Artiglio di Jormag",pl:"Szpon Jormaga",pt:"Garra de Jormag",ru:"Йормаг Коготь",zh:"爪的 Jormag"},{en:"Svanir Shaman",de:"Schamanenoberhaupt der Svanir",es:"Jefe Chamán Svanir",fr:"Chef Chamane de Svanir",cs:"Hlavní Svanir Šaman",it:"Capo Sciamano Svanir",pl:"Wódz Szamanów Svanira",pt:"Chefe Xamã Svanir",ru:"Главный Шаман Сванир",zh:"Svanir 的首席薩滿"},{en:"Megadestroyer",de:"Megazerstörer",es:"Megadestructor",fr:"Mégadestructeur",cs:"Meganičitel",it:"Megadistruttore",pl:"Wielkiniszczyciel",pt:"Megadestruidor",ru:"Мегадеструктор",zh:"Megadestroyer"},{en:"Shadow Behemoth",de:"Schatten-Behemoth",es:"Behemot de las Sombras",fr:"Béhémoth des Ombres",cs:"Stín Behemoth",it:"Behemoth d'Ombra",pl:"Mroczny Behemot",pt:"Behemoth de Sombra",ru:"Бегемот из Тени",zh:"影子的巨獸"},{en:"The Shatterer",de:"Den Zerschmetterer",es:"El Asolador",fr:"Le Destructeur",cs:"Shatterer",it:"Il Shatterer",pl:"Shatterer",pt:"O Shatterer",ru:"Шаттерер",zh:"Shatterer"},{en:"Taidha Covington",de:"Taidha Covington",es:"Taidha Covington",fr:"Taidha Covington",cs:"Taidha Covington",it:"Taidha Covington",pl:"Taidha Covington",pt:"Taidha Covington",ru:"Таидха Цовингтон",zh:"Taidha Covington"},{en:"Modniir Ulgoth",de:"Ulgoth den Modniir",es:"Ulgoth el Modniir",fr:"Ulgoth le Modniir",cs:"Ulgoth na Modniir",it:"Ulgoth il Modniir",pl:"Modniir Ulgoth",pt:"Ulgoth o Modniir",ru:"Улготх в Модниир",zh:"Ulgoth 的 Modniir"},{en:"Great Jungle Wurm",de:"Großen Dschungelwurm",es:"Gran Sierpe de la Selva",fr:"Grande Guivre de la Jungle",cs:"Velká Džungle Červ",it:"Grande Verme Giungla",pl:"Wielki Robak z Dżungli",pt:"Grande Verme Selva",ru:"Великий Червь из Джунглей",zh:"大叢林蠕蟲"},{en:"Karka Queen",de:"Karka-Königin",es:"Reina Karka",fr:"Reine Karka",cs:"Karka Královna",it:"Regina Karka",pl:"Karka Królowa",pt:"Rainha Karka",ru:"Карка Королева",zh:"女王 Karka"},{en:"Tequatl the Sunless",de:"Tequatl den Sonnenlosen",es:"Tequatl el Sombrío",fr:"Tequatl le Sans-soleil",cs:"Tequatl Bez Slunce",it:"Tequatl il Senza Sole",pl:"Tequatl ma Słońca",pt:"Tequatl o Sem Sol",ru:"Теqуатл Тусклый",zh:"Tequatl 沒有陽光"},{en:"Triple Wurm",de:"Dreifach Wurm",es:"Sierpe Triple",fr:"Guivre Triple",cs:"Trojitý Červ",it:"Verme Triplo",pl:"Potrójne Robak",pt:"Verme Triplo",ru:"Тройной Червь",zh:"三蟲"},{en:"Dry Top Q1",de:"Trockenkuppe Q1",es:"Cima Seca Q1",fr:"Col Aride Q1"},{en:"Dry Top Q2",de:"Trockenkuppe Q2",es:"Cima Seca Q2",fr:"Col Aride Q2"},{en:"Dry Top Q3",de:"Trockenkuppe Q3",es:"Cima Seca Q3",fr:"Col Aride Q3"},{en:"Dry Top Q4",de:"Trockenkuppe Q4",es:"Cima Seca Q4",fr:"Col Aride Q4"},{en:"Lyssa",de:"Verderbte Hohepriesterin der Lyssa",es:"Suma Sacerdotisa Corrupta de Lyssa",fr:"Grande Prêtresse Corrompue de Lyssa",cs:"Lyssa Chrám",it:"Tempio di Lyssa",pl:"Lyssa Świątynia",pt:"Templo de Lyssa",ru:"Лысса Храм",zh:"Lyssa 的寺廟"},{en:"Dwayna",de:"Besessene Dwayna-Statue",es:"Estatua Poseída de Dwayna",fr:"Statue Possédée de Dwayna",cs:"Dwayna Chrám",it:"Tempio di Dwayna",pl:"Dwayna Świątynia",pt:"Templo de Dwayna",ru:"Дwаына Храм",zh:"Dwayna 的寺廟"},{en:"Melandru",de:"Auferstandenen Priester der Melandru",es:"Sacerdote de Melandru Resurgido",fr:"Prêtre Revenant de Melandru",cs:"Melandru Chrám",it:"Tempio di Melandru",pl:"Melandru Świątynia",pt:"Templo de Melandru",ru:"Меландру Храм",zh:"Melandru 的寺廟"},{en:"Grenth",de:"Auferstandenen Priester des Grenth",es:"Sacerdote de Grenth Resurgido",fr:"Prêtre Revenant de Grenth",cs:"Grenth Chrám",it:"Tempio di Grenth",pl:"Grenth Świątynia",pt:"Templo de Grenth",ru:"Грентх Храм",zh:"Grenth 的寺廟"},{en:"Arah",de:"Tore von Arah",es:"Puertas de Arah",fr:"Portes d'Arah",cs:"Arah Brány",it:"Porte di Arah",pl:"Arah Bramy",pt:"Portões de Ará",ru:"Ворота Арах",zh:"Arah 的寺廟"},{en:"Balthazar",de:"Auferstandenen Priester des Balthasar",es:"Sacerdote de Balthazar Resurgido",fr:"Prêtre Revenant de Balthazar",cs:"Balthazar Chrám",it:"Tempio di Balthazar",pl:"Świątynia Balthazar",pt:"Templo de Balthazar",ru:"Балтхазар Храм",zh:"Balthazar 的寺廟"},{en:"Balthazar North",de:"Nord Invasion von Orr",es:"Invasión del Norte de Orr",fr:"Invasion du Nord de Orr",cs:"Severní Invaze Orr",it:"Invasione Settentrionale di Orr",pl:"Północnej Inwazja Orr",pt:"Invasão Norte de Orr",ru:"Северная Вторжение Орр",zh:"北部入侵 Orr"},{en:"Balthazar Central",de:"Zentral Invasion von Orr",es:"Invasión Central de Orr",fr:"Invasion Central de Orr",cs:"Centrální Invaze Orr",it:"Invasione Centrale di Orr",pl:"Centralny Inwazja Orr",pt:"Invasão Central Orr",ru:"Центральный Вторжение Орр",zh:"中部入侵 Orr"},{en:"Balthazar South",de:"Invasion der Südlichen Orr",es:"Invasión del Sur de Orr",fr:"Invasion du Sud de Orr",cs:"Jižní Invaze Orr",it:"Invasione del Sud di Orr",pl:"Południowej Inwazja Orr",pt:"Invasão do Sul de Orr",ru:"Южный Вторжение Орр",zh:"南部入侵 Orr"},{en:"Fire Shaman",de:"Feuerschamanen",es:"Chamán de Fuego",fr:"Chamane de Feu",cs:"Požární Šaman",it:"Sciamano Fuoco",pl:"Ognia Szaman",pt:"Xamã Fogo",ru:"Oгня Шаман",zh:"火薩滿"},{en:"Rhendak the Crazed",de:"Rhendak den Verrückten",es:"Rhendak el Perturbado",fr:"Rhendak le Fou",cs:"Poblázněný Rhendak",it:"Rhendak il Folle",pl:"Szalony Rhendak",pt:"Rhendak o Enlouquecido",ru:"Сумасшедший Рхендак",zh:"瘋狂 Rhendak"},{en:"Foulbear Chieftain",de:"Faulbär-Häuptling",es:"Cabecilla de Osoinmundo",fr:"Chef Oursefol",cs:"Foulbear Náčelník",it:"Capo Foulbear",pl:"Faulwódz Niedźwiedź",pt:"Chefe Foulbear",ru:"Фолмедведь Вождь",zh:"臭熊頭目"},{en:"Dredge Commissar",de:"Schaufler-Kommissar",es:"Comisario Draga",fr:"Kommissar Draguerre",cs:"Vybagrovat Komisař",it:"Commissario Dragare",pl:"Pogłębiarka Komisarza",pt:"Comissário Dragar",ru:"Драги Комиссар",zh:"疏浚政委"},{en:"Nebo Terrace",de:"Nebo-Terrasse",es:"Terraza de Nebo",fr:"Terrasse de Nebo",cs:"Nebo Terasa",it:"Terrazzo di Nebo",pl:"Nebo Taras",pt:"Esplanada de Nebo",ru:"Нево Терраса",zh:"階地 Nebo"},{en:"Eye of Zhaitan",de:"Auge des Zhaitan",es:"Ojo de Zhaitan",fr:"Œil de Zhaïtan",cs:"Oko Zhaitan",it:"Occhio Zhaitan",pl:"Oko Zhaitan",pt:"Olho de Zhaitan",ru:"Глаз Жаитан",zh:"眼的 Zhaitan"}],getChainTitle:function(t){if(i.Chains[t].series===i.ChainSeriesEnum.Story){if(r.isLanguageFullySupported()){return r.ChainTitle[t][e.Options.enu_Language]}else{return r.ChainTitle[t][e.OptionEnum.Language.Default]}}if(e.Options.enu_Language===e.OptionEnum.Language.Default){return i.Chains[t].title}return r.ChainTitle[t][e.Options.enu_Language]},getChainTitleAny:function(t){if(i.Chains[t].series===i.ChainSeriesEnum.Story){return i.Chains[t].title}return r.ChainTitle[t][e.Options.enu_Language]},getChainAlias:function(t){if(e.Options.enu_Language===e.OptionEnum.Language.Default){return i.Chains[t].alias}return r.getChainTitle(t)},getEventName:function(t){if(t["name_"+e.Options.enu_Language]){return t["name_"+e.Options.enu_Language]}return t["name_en"]},speechWait:0,speak:function(t,n){var i=function(t){var n;var r;if(l.BrowserUser===l.BrowserEnum.Chrome){r=document.getElementById("jsTTSFrame");n="http://translate.google.com/translate_tts?tl="+e.Options.enu_Language+"&q="+t;r.src=n}else{r=document.getElementById("jsTTSAudio");n="http://tts-api.com/tts.mp3?q="+t;r.src=n;r.load();r.play()}};if(n===undefined){var s=r.isLanguageLogographic()?4:12;n=1+Math.round(t.length/s)}var o=n*u.cMILLISECONDS_IN_SECOND;if(r.speechWait===0){r.speechWait+=o;i(t);setTimeout(function(){r.speechWait-=o},o)}else{r.speechWait+=o;setTimeout(function(){if(r.speechWait>0){i(t);r.speechWait-=o}},r.speechWait-o)}},isSpeaking:function(){if(r.speechWait===0){return false}return true},stopSpeech:function(){document.getElementById("jsTTSFrame").src="";document.getElementById("jsTTSAudio").src=""},resetSpeechQueue:function(e){if(e===undefined){e=0}if(r.speechWait>e*u.cMILLISECONDS_IN_SECOND){r.speechWait=0;r.stopSpeech()}},getSpeech:function(e,t){if(l.BrowserUser===l.BrowserEnum.Chrome){if(t){return r.getModifiedWord(e,t)}return r.getPhrase(e)}else{if(t){return t+e}return e}},getChainPronunciation:function(t){if(e.Options.enu_Language===e.OptionEnum.Language.Default||l.BrowserUser!==l.BrowserEnum.Chrome){return i.Chains[t.nexus].pronunciation}return r.getChainTitle(t.nexus)}};i={Chains:GW2T_CHAIN_DATA,cIndexSynonym:"nexus",CurrentChainSD:{},NextChainSD1:{},NextChainSD2:{},NextChainSD3:{},NextChainSD4:{},CurrentChainHC:{},NextChainHC1:{},NextChainHC2:{},NextChainHC3:{},NextChainHC4:{},CurrentChains:[],PreviousChains1:[],PreviousChains2:[],NextChains1:[],cChainTitleCharLimit:30,ScheduledChains:[],StoryChains:[],LegacyChains:[],TempleChains:[],ChainSeriesEnum:{Temple:0,Legacy:1,ScheduledCutoff:1,Standard:2,Hardcore:3,Story:4},EventPrimacyEnum:{Optional:0,Normal:1,Primary:2,Boss:3},isChainScheduled:function(e){if(e.series>i.ChainSeriesEnum.ScheduledCutoff){return true}return false},parseChainAlias:function(e){if(e.indexOf("XXX")!==-1){return e.split("XXX")[0]}return e},getEventStepNumber:function(e){if(e.length===1){return e}else{var t;var n="";for(t=0;t<e.length;t++){if(isFinite(e.charAt(t))){n+=e.charAt(t)}else{return n}}return n}},truncateTitleString:function(e,t,n){n=n||"";if(e.length>t){return e.substring(0,t)+n}return e},styleBarIcon:function(e){document.getElementById("chnIcon_"+e.nexus).src="img/chain/"+i.parseChainAlias(e.alias).toLowerCase()+l.cPNG},initializeChainAndHTML:function(e){var t,n;var s;var o="";switch(e.series){case i.ChainSeriesEnum.Standard:{o="#listChainsScheduled";i.ScheduledChains.push(e)}break;case i.ChainSeriesEnum.Hardcore:{o="#listChainsScheduled";i.ScheduledChains.push(e)}break;case i.ChainSeriesEnum.Story:{o="#listChainsScheduled";i.ScheduledChains.push(e);i.StoryChains.push(e)}break;case i.ChainSeriesEnum.Legacy:{o="#listChainsLegacy";i.LegacyChains.push(e)}break;case i.ChainSeriesEnum.Temple:{o="#listChainsTemple";i.TempleChains.push(e)}break}$(o).append("<div id='barChain_"+e.nexus+"' class='barChain'>"+"<div class='chnTitle'>"+"<img id='chnIcon_"+e.nexus+"' src='' />"+"<div id='chnCheck_"+e.nexus+"' class='chnCheck'></div>"+"<h1 id='chnTitle_"+e.nexus+"'>"+i.truncateTitleString(r.getChainTitle(e.nexus),i.cChainTitleCharLimit)+"</h1>"+"<time id='chnTime_"+e.nexus+"' class='chnTimeFutureFar'></time>"+"</div>"+"<div id='chnDetails_"+e.nexus+"' class='chnDetails'>"+"<ol id='chnEvents_"+e.nexus+"' class='chnEvents'></ol>"+"<div class='chnDetailsLinks'>"+"<ins id='chnDelete_"+e.nexus+"' title='Permanently hide this event chain (can undo in Options).'>[x]</ins>"+"</div>"+"</div>");if(i.isChainScheduled(e)){i.styleBarIcon(e)}var a=function(e,t){var n=t;var s="&lt;br /&gt;";var o=function(e){return"&lt;dfn&gt;"+e+"&lt;/dfn&gt;"};var u="";if(e.series===i.ChainSeriesEnum.Story){u=o("Event Number: ")+n.num+s+o("Start Time: ")+n.lim+s+s+"&quot;"+r.getEventName(n).replace(/["']/g,"")+"&quot;"}else{u=o("Event Number: ")+n.num+s+o("If Success Go To: ")+n.sGotoNum+s+o("If Failure Go To: ")+n.fGotoNum+s+o("If Success Wait: ")+n.sInterim+s+o("If Failure Wait: ")+n.fInterim+s+o("Time Limit: ")+n.lim+s+o("Avg to Complete: ")+n.avg+s+o("Min to Complete: ")+n.min+s+o("Max to Complete: ")+n.max+s+s+"&quot;"+r.getEventName(n).replace(/["']/g,"")+"&quot;"}var a=0;var f=44;var c=function(){a=12;f=40};var h=i.getEventStepNumber(n.num);if(h.length!==n.num.length){var p=n.num.slice(h.length);if(n.num.indexOf(".")!==-1){c()}else if(n.num.length===2){if(p.indexOf("A")===-1&&p.indexOf("a")===-1){c()}}else if(p.indexOf("A1")===-1&&p.indexOf("a1")===-1){c()}}$("#chnEvents_"+e.nexus).append("<li id='chnEvent_"+e.nexus+"_"+n.num+"' class='chnStep_"+e.nexus+"_"+n.step+"' style='margin-left:"+a+"px'>"+"<img src='img/event/"+n.icon+l.cPNG+"' title='"+u+"'/>"+"<span>"+i.truncateTitleString(r.getEventName(n),f,"..")+"</span>"+"</li>")};for(t in e.events){s=e.events[t];if(s.primacy===i.EventPrimacyEnum.Primary){e.primaryEvents.push(s)}else if(s.primacy===i.EventPrimacyEnum.Boss){e.primaryEvents.push(s);e.primaryEvents[0].minSum=0;e.primaryEvents[0].avgSum=0;e.primaryEvents[0].minavgSum=0;break}}for(t=1;t<e.primaryEvents.length;t++){var f=u.parseEventTime(e.primaryEvents[t-1].sInterim[0]);e.primaryEvents[t].minSum=u.parseEventTime(e.primaryEvents[t-1].min)+f+e.primaryEvents[t-1].minSum;e.primaryEvents[t].avgSum=u.parseEventTime(e.primaryEvents[t-1].avg)+f+e.primaryEvents[t-1].avgSum;e.primaryEvents[t].minavgSum=e.primaryEvents[t].minSum+~~(Math.abs(e.primaryEvents[t].avgSum-e.primaryEvents[t].minSum)/2)}t--;e.minFinish=e.primaryEvents[t].minSum+u.parseEventTime(e.primaryEvents[t].min);e.avgFinish=e.primaryEvents[t].avgSum+u.parseEventTime(e.primaryEvents[t].avg);e.minavgFinish=e.minFinish+~~(Math.abs(e.avgFinish-e.minFinish)/2);n=0;if(!i.isChainScheduled(e)){for(t in e.events){a(e,e.events[t])}}else{for(t in e.events){if(e.events[t].primacy!==i.EventPrimacyEnum.Optional){if(i.getEventStepNumber(e.events[t].num)!==i.getEventStepNumber(e.primaryEvents[n].num)){n++}a(e,e.events[t])}if(e.events[t].primacy===i.EventPrimacyEnum.Boss){break}}}},initializeAllChains:function(){for(var e in i.Chains){for(var t in i.Chains[e].events){i.Chains[e].events[t].step=parseInt(i.getEventStepNumber(i.Chains[e].events[t].num))-1}i.Chains[e].nexus=parseInt(e);i.Chains[e].isSorted=false;i.Chains[e].primaryEvents=new Array;i.Chains[e].scheduleKeys=new Array;i.initializeChainAndHTML(i.Chains[e])}$(".chnDetails").hide();$("#listChainsScheduled .barChain h1").addClass("chnTitleFutureFar")},isChainCurrent:function(e){for(var t in i.CurrentChains){if(e.nexus===i.CurrentChains[t].nexus){return true}}return false},isChainUnchecked:function(e){if(t.getChainChecklistState(e)===t.ChecklistEnum.Unchecked){return true}return false},isChainSubscribed:function(e){if(t.getChecklistItem(t.Checklists.ChainSubscription,e.nexus)===t.ChecklistEnum.Checked){return true}return false},updateChainTimeTooltipHTML:function(e){var t="";var n;var s="<dfn>"+r.getSentence("subscribe")+"?</dfn><br />";if(e.series===i.ChainSeriesEnum.Story){s=""}for(var o in e.scheduleKeys){n=parseInt(o)===0?s:" <br /> ";t=t+n+u.getTimeFormatted({wantSeconds:false,customTimeInSeconds:u.convertScheduleKeyToLocalSeconds(e.scheduleKeys[o])})}$("#chnTime_"+e.nexus).prop("title",t)},updateChainsTimeHTML:function(){var t;var n;var r;var s=false;for(t in i.ScheduledChains){n=i.ScheduledChains[t];i.updateChainTimeTooltipHTML(n);if(i.isChainCurrent(n)){continue}if(e.Options.bol_useCountdown){r=u.getSecondsUntilChainStarts(n);s=true}else{r=u.convertScheduleKeyToLocalSeconds(n.scheduleKeys[0]);s=false}$("#chnTime_"+n.nexus).text(u.getTimeFormatted({wantLetters:s,wantSeconds:false,customTimeInSeconds:r}))}l.qTip.init(".chnTitle time")},updateCurrentChainTimeHTML:function(e){var t=u.getCurrentTimeframeElapsedTime();var n=e.countdownToFinish-t;var r=n;var s="-";if(e.series===i.ChainSeriesEnum.Story){$("#chnTime_"+e.nexus).text(u.getTimeFormatted({reference:u.ReferenceEnum.UTC,want24:true,wantHours:false}))}else{if(n<=0){r=u.cSECONDS_IN_TIMEFRAME-t;s="−"}$("#chnTime_"+e.nexus).text(s+u.getTimeFormatted({wantHours:false,wantLetters:true,customTimeInSeconds:r}))}},initializeTimetableHTML:function(){$("#listChainsTimetable").empty();var e,t;var n;var s;var o;for(e in u.Schedule){n=u.getScheduleSlotChainsByKey(e);for(t in n){s=n[t];if(s.series!==i.ChainSeriesEnum.Standard&&s.series!==i.ChainSeriesEnum.Hardcore){break}o=u.getTimeFormatted({wantSeconds:false,customTimeInSeconds:u.convertScheduleKeyToLocalSeconds(e)});$("#listChainsTimetable").append("<div class='barChainDummy barChainDummy_"+e+"'>"+"<div class='chnTitle'>"+"<img src='img/chain/"+i.parseChainAlias(s.alias).toLowerCase()+l.cPNG+"' />"+"<h1>"+i.truncateTitleString(r.getChainTitleAny(s.nexus),i.cChainTitleCharLimit)+"</h1>"+"<time>"+o+"</time>"+"</div>"+"</div>")}}$("#listChainsTimetable .barChainDummy_"+u.getTimeframeKey()).addClass("chnBarCurrent");$("#listChainsTimetable .barChainDummy_"+u.getTimeframeKey()+" .chnTitle h1").addClass("chnTitleCurrent");$("#listChainsTimetable .barChainDummy_"+u.getTimeframeKey(1)+" .chnTitle h1").addClass("chnTitleFuture")},sortChainsListHTML:function(){var t=0;var n=i.ScheduledChains.length;var r=0;var s=0;var o;var a;while(t<n){o=u.getTimeframeChains(r);for(s in o){if(t>=n){break}a=o[s];if(a.isSorted===false){$("#barChain_"+a.nexus).appendTo("#listChainsScheduled");a.isSorted=true;a.scheduleKeyImmediate=u.getTimeframeKey(r);t++}}r++}for(r in i.ScheduledChains){a=i.ScheduledChains[r];a.isSorted=false;for(s in a.scheduleKeys){if(a.scheduleKeys[s]===a.scheduleKeyImmediate){a.scheduleKeys=a.scheduleKeys.slice(s,a.scheduleKeys.length).concat(a.scheduleKeys.slice(0,s));break}}}e.Enact.bol_useCountdown();for(r in i.CurrentChains){a=i.CurrentChains[r];$("#barChain_"+a.nexus).addClass("chnBarCurrent");if(i.isChainUnchecked(a)&&e.Options.bol_expandEvents){$("#chnDetails_"+a.nexus).show("fast")}$("#barChain_"+a.nexus+" h1").first().removeClass("chnTitleFuture chnTitleFutureFar").addClass("chnTitleCurrent");$("#barChain_"+a.nexus+" time").first().removeClass("chnTimeFuture chnTimeFutureFar").addClass("chnTimeCurrent")}for(r in i.PreviousChains1){a=i.PreviousChains1[r];$("#barChain_"+a.nexus).removeClass("chnBarCurrent").addClass("chnBarPrevious");if(e.Options.bol_expandEvents){$("#chnDetails_"+a.nexus).hide()}$("#barChain_"+a.nexus+" h1").first().removeClass("chnTitleCurrent").addClass("chnTitleFutureFar");$("#barChain_"+a.nexus+" time").first().removeClass("chnTimeCurrent").addClass("chnTimeFutureFar")}for(r in i.PreviousChains2){a=i.PreviousChains2[r];$("#barChain_"+a.nexus).removeClass("chnBarPrevious")}for(r in i.NextChains1){a=i.NextChains1[r];$("#barChain_"+a.nexus+" h1").first().removeClass("chnTitleFutureFar").addClass("chnTitleFuture");$("#barChain_"+a.nexus+" time").first().removeClass("chnTimeFutureFar").addClass("chnTimeFuture")}$("#listChainsTimetable .barChainDummy_"+u.getTimeframeKey(-1)).removeClass("chnBarCurrent");$("#listChainsTimetable .barChainDummy_"+u.getTimeframeKey()).addClass("chnBarCurrent");$("#listChainsTimetable .barChainDummy_"+u.getTimeframeKey(-1)+" .chnTitle h1").removeClass("chnTitleCurrent");$("#listChainsTimetable .barChainDummy_"+u.getTimeframeKey()+" .chnTitle h1").removeClass("chnTitleFuture").addClass("chnTitleCurrent");$("#listChainsTimetable .barChainDummy_"+u.getTimeframeKey(1)+" .chnTitle h1").addClass("chnTitleFuture")},queueEventsHighlight:function(e){var t;var n=e;var r=u.getCurrentTimeframeElapsedTime();var s;var o=false;if(r>0){$(".barChain:not(.barChainCurrent) .chnEvents li").addClass("chnEventPast");for(t in n.primaryEvents){s=i.getSumBasedOnOptions(n,t);if(s>=r){if(t>0){i.highlightEvents(n,parseInt(t-1));o=true;break}}}if(o===false){s=i.getSumBasedOnOptions(n,-1);if(s>=r){i.highlightEvents(n,t)}else{i.highlightEvents(n,-1)}}}for(t in n.primaryEvents){s=i.getSumBasedOnOptions(n,t);if(s>=r){s=s-r;setTimeout(function(e,t){return function(){i.highlightEvents(e,t)}}(n,parseInt(t)),s*u.cMILLISECONDS_IN_SECOND)}}s=i.getSumBasedOnOptions(n,-1);if(s>=r){s=s-r;setTimeout(function(e){return function(){i.highlightEvents(e,-1)}}(n),s*u.cMILLISECONDS_IN_SECOND)}},highlightEvents:function(t,n){var o;var a=500;var f=320;var c=t.primaryEvents.length-1;var h;if(t.series===i.ChainSeriesEnum.Story){for(o in t.events){h=t.events[o];h.eventicon._icon.style.display="none";h.eventring._icon.style.display="none"}s.StoryEventActive=null;s.StoryEventActive=new Array}if(n>-1){t.CurrentPrimaryEvent=t.primaryEvents[n];for(o=0;o<n;o++){$(".chnStep_"+t.nexus+"_"+o).removeClass("chnEventCurrent").addClass("chnEventPast")}$(".chnStep_"+t.nexus+"_"+(n-1)).css({opacity:1}).animate({opacity:.5},a);$(".chnStep_"+t.nexus+"_"+n).each(function(){$(this).removeClass("chnEventPast chnEventFuture").addClass("chnEventCurrent").css({width:0,opacity:.5}).animate({width:f,opacity:1},a).css({width:"auto"});if(t.series===i.ChainSeriesEnum.Story){h=t.events[$(this).attr("data-eventindex")];s.StoryEventActive.push(h.eventicon);s.StoryEventActive.push(h.eventring);if(l.PageCurrent!==l.PageEnum.Map){h.eventicon._icon.style.display="block";h.eventring._icon.style.display="block"}}s.burySubmaps()});if(n<t.primaryEvents.length){for(o=n+1;o<t.primaryEvents.length;o++){$(".chnStep_"+t.nexus+"_"+o).removeClass("chnEventCurrent").addClass("chnEventFuture")}}if(e.Options.bol_tourPrediction&&l.PageCurrent===l.PageEnum.Chains&&s.isMapAJAXDone&&i.isChainUnchecked(t)){$("#chnEvent_"+t.nexus+"_"+t.CurrentPrimaryEvent.num).trigger("click")}}else{t.CurrentPrimaryEvent=t.primaryEvents[c];$("#chnEvents_"+t.nexus+" li").removeClass("chnEventCurrent").addClass("chnEventPast");$(".chnStep_"+t.nexus+"_"+c).css({opacity:1}).animate({opacity:.5},a);if(e.Options.int_setAlarm===e.IntEnum.Alarm.Checklist&&e.Options.bol_alertAtEnd&&l.isProgramLoaded&&t.nexus===i.CurrentChainSD.nexus&&t.series!==i.ChainSeriesEnum.Story){var p=", "+r.getSpeech("checked");var d="";var v="";var m=e.objToBool(i.NextChainSD1);var g=e.objToBool(i.NextChainHC1);var y=r.getSpeech("world boss","next")+" "+r.getSpeech("is")+" ";if(i.NextChainSD1&&!i.isChainUnchecked(i.NextChainSD1)){d=p}if(i.NextChainHC1&&!i.isChainUnchecked(i.NextChainHC1)){v=p}if(e.Options.bol_alertChecked===false){if(d.length>0){m=false}if(v.length>0){g=false}}if(m&&g){r.speak(y+r.getChainPronunciation(i.NextChainSD1)+d,5);r.speak(r.getSpeech("also")+", "+r.getChainPronunciation(i.NextChainHC1)+v,3)}else if(m){r.speak(y+r.getChainPronunciation(i.NextChainSD1)+d,5)}else if(g){r.speak(y+r.getChainPronunciation(i.NextChainHC1)+v,5)}if(m||g){r.speak(u.getTimeTillChainFormatted(i.NextChainSD1,"speech"),3)}}}},getSumBasedOnOptions:function(t,n){var r=u.getTimeOffsetSinceMidnight(u.ReferenceEnum.Server,u.UnitEnum.Hours);if(n>-1){switch(e.Options.int_setPredictor){case e.IntEnum.Predictor.Auto:{if(r>=16&&r<20){return t.primaryEvents[n].minSum}if(r>=20&&r<23){return t.primaryEvents[n].minavgSum}if(r>=23||r<12){return t.primaryEvents[n].avgSum}if(r>=12&&r<16){return t.primaryEvents[n].minavgSum}}break;case e.IntEnum.Predictor.Min:{return t.primaryEvents[n].minSum}break;case e.IntEnum.Predictor.MinAvg:{return t.primaryEvents[n].minavgSum}break;case e.IntEnum.Predictor.Avg:{return t.primaryEvents[n].avgSum}break}}else{switch(e.Options.int_setPredictor){case e.IntEnum.Predictor.Auto:{if(r>=16&&r<20){t.countdownToFinish=t.minFinish;return t.minFinish}if(r>=20&&r<23){t.countdownToFinish=t.minavgFinish;return t.minavgFinish}if(r>=23||r<12){t.countdownToFinish=t.avgFinish;return t.avgFinish}if(r>=12&&r<16){t.countdownToFinish=t.minavgFinish;return t.minavgFinish}}break;case e.IntEnum.Predictor.Min:{t.countdownToFinish=t.minFinish;return t.minFinish}break;case e.IntEnum.Predictor.MinAvg:{t.countdownToFinish=t.minavgFinish;return t.minavgFinish}break;case e.IntEnum.Predictor.Avg:{t.countdownToFinish=t.avgFinish;return t.avgFinish}break}}}};s={Zones:GW2T_ZONE_DATA,ZoneAssociations:GW2T_ZONE_ASSOCIATION,Regions:GW2T_REGION_DATA,cInitialZone:"lion",Map:{},Resources:{},Collectibles:{},ZoneCurrent:{},currentIconSize:32,currentRingSize:256,cICON_SIZE_STANDARD:32,cRING_SIZE_MAX:256,isMapInitialized:false,isMouseOnHUD:false,isMapAJAXDone:false,isAPIRetrieved_MAPFLOOR:false,isMappingIconsGenerated:false,cLEAFLET_PATH_OPACITY:.5,cMAP_BOUND:32768,cMAP_CENTER:[16384,16384],cMAP_MOUSEMOVE_RATE:100,cZoomLevelFactor:2,ZoomLevelEnum:{Min:0,Default:3,Space:3,Sky:5,Bird:6,Ground:7,Max:7},cZIndexBury:-999999,PinPersonal:{},PinProgram:{},PinEvent:{},PinOver:{},MappingEnum:{Sector:0,Waypoint:1,Landmark:2,Vista:3,Skill:4,Heart:5},APIPOIEnum:{Sector:"sectors",Waypoint:"waypoint",Landmark:"landmark",Vista:"vista",Skill:"skill_challenges",Heart:"tasks"},PinEntities:new Array,DailyEntities:new Array,JPEntities:new Array,ChainPathEntities:new Array,isShowingIconsForDaily:true,isShowingIconsForResource:false,isShowingIconsForJP:true,isShowingIconsForCollectible:false,SubmapEntities:new Array,SubmapTemp:{},StoryEventIcons:new Array,StoryEventRings:new Array,StoryEventActive:new Array,getZoneFromID:function(e){return s.Zones[s.ZoneAssociations[e]]},getZoneName:function(e){var t;if(typeof e==="string"&&s.Zones[e]){t=s.Zones[e]}else if(e["name"]){t=e}else{return"nozonename"}if(s.isAPIRetrieved_MAPFLOOR&&r.isLanguageSecondary()===true){return t["name_"+r.getFullySupportedLanguage()]}else{return t["name"]}},getRegionName:function(t){var n=s.Regions[t];if(r.isLanguageSecondary()===true){return n[r.getFullySupportedLanguage()]}else{return n[e.OptionEnum.Language.Default]}},initializeMap:function(){s.Map=L.map("paneMap",{minZoom:s.ZoomLevelEnum.Min,maxZoom:s.ZoomLevelEnum.Max,inertiaThreshold:100,doubleClickZoom:false,zoomControl:false,attributionControl:false,crs:L.CRS.Simple}).setView([-128,128],s.ZoomLevelEnum.Default);L.tileLayer(f.URL_API.Tiles,{continuousWorld:true}).addTo(s.Map);for(var e in s.Zones){s.Zones[e].ZoneEntities=new Array;s.Zones[e].center=s.getZoneCenter(e);s.Zones[e].nick=e}s.ZoneCurrent=s.Zones[s.cInitialZone];s.bindHUDEventCanceler();o.generateSubmaps();o.populateMap();o.drawChainPaths();s.Map.on("click",function(e){if(s.isMouseOnHUD){return}var t=s.convertLCtoGC(e.latlng);$("#mapCoordinatesCopy").val("["+t[0]+", "+t[1]+"]").select()});s.Map.on("dblclick",function(e){if(s.isMouseOnHUD){return}s.PinPersonal.setLatLng(e.latlng)});$("#mapCoordinatesCopy").onEnterKey(function(){var e=s.parseCoordinates($(this).val());e[0]=Math.floor(e[0]);e[1]=Math.floor(e[1]);$("#mapCoordinatesCopy").val("["+e[0]+", "+e[1]+"]").select();if(e[0]!==""&&e.length===2){s.goToView(e,s.PinPersonal)}});$("#mapDisplayButton").click(function(){$("#panelRight").toggle();s.refreshMap()});s.isMapInitialized=true},refreshMap:function(){if(s.isMapInitialized){s.Map.invalidateSize()}},bindHUDEventCanceler:function(){var e=document.getElementById("paneHUD");e.onmouseover=function(){s.isMouseOnHUD=true};e.onmouseout=function(){s.isMouseOnHUD=false}},bindMapVisualChanges:function(){s.Map.on("mousemove",$.throttle(s.cMAP_MOUSEMOVE_RATE,function(e){if(s.isMouseOnHUD){return}s.showCurrentZone(s.convertLCtoGC(e.latlng))}));s.Map.on("zoomstart",function(e){if(s.SubmapEntities.length>0){s.setEntityGroupDisplay(s.SubmapEntities,"hide")}});s.Map.on("zoomend",function(e){s.adjustZoomMapping();s.adjustZoomEvent()})},showCurrentZone:function(t){document.getElementById("mapCoordinatesMouse").value=t[0]+", "+t[1];if(t[0]>=s.ZoneCurrent.rect[0][0]&&t[1]>=s.ZoneCurrent.rect[0][1]&&t[0]<=s.ZoneCurrent.rect[1][0]&&t[1]<=s.ZoneCurrent.rect[1][1]){return}var n,r,i;var o=s.ZoneCurrent.nick;var u="";var a;var f;for(n in s.Zones){if(t[0]>=s.Zones[n].rect[0][0]&&t[1]>=s.Zones[n].rect[0][1]&&t[0]<=s.Zones[n].rect[1][0]&&t[1]<=s.Zones[n].rect[1][1]){for(r in s.Zones[o].ZoneEntities){s.Zones[o].ZoneEntities[r]._icon.style.display="none"}s.ZoneCurrent=s.Zones[n];u=s.getZoneName(s.ZoneCurrent);document.getElementById("mapCoordinatesName").value=u;for(i in s.ZoneCurrent.ZoneEntities){a=s.ZoneCurrent.ZoneEntities[i];f=a.options.mappingtype;if(f===s.MappingEnum.Waypoint&&e.Options.bol_displayWaypoints||f===s.MappingEnum.Landmark&&e.Options.bol_displayPOIs||f===s.MappingEnum.Vista&&e.Options.bol_displayVistas||f===s.MappingEnum.Skill&&e.Options.bol_displaySkills||f===s.MappingEnum.Heart&&e.Options.bol_displayHearts||f===s.MappingEnum.Sector&&e.Options.bol_displaySectors){a._icon.style.display="block"}}s.adjustZoomMapping();break}}},getZoneCenter:function(e){var t=s.Zones[e].rect;var n=t[0][0]+~~((t[1][0]-t[0][0])/2);var r=t[0][1]+~~((t[1][1]-t[0][1])/2);return[n,r]},scaleDimension:function(e,t){t=t||s.Map.getZoom();return parseInt(e/Math.pow(s.cZoomLevelFactor,s.ZoomLevelEnum.Max-t))},adjustZoomMapping:function(){var t;var n;var r=s.Map.getZoom();var i,o;var u,a;switch(r){case 7:i=40;o=32;break;case 6:i=32;o=24;break;case 5:i=26;o=16;break;case 4:i=20;o=0;break;case 3:i=16;o=0;break;default:{i=0;o=0}}for(t in s.ZoneCurrent.ZoneEntities){n=s.ZoneCurrent.ZoneEntities[t];switch(n.options.mappingtype){case s.MappingEnum.Waypoint:{s.changeMarkerIcon(n,f.URL_IMG.Waypoint,i)}break;case s.MappingEnum.Landmark:{s.changeMarkerIcon(n,f.URL_IMG.Landmark,o);if(r<s.ZoomLevelEnum.Max){n._icon.style.opacity=.6}else{n._icon.style.opacity=.8}}break;case s.MappingEnum.Vista:{s.changeMarkerIcon(n,f.URL_IMG.Vista,o)}break;case s.MappingEnum.Skill:{s.changeMarkerIcon(n,f.URL_IMG.Skill,o)}break;case s.MappingEnum.Heart:{s.changeMarkerIcon(n,f.URL_IMG.Heart,o)}break;case s.MappingEnum.Sector:{switch(r){case 7:u="28px";a=.9;break;case 6:u="20px";a=.6;break;case 5:u="16px";a=.3;break;default:{u="0px";a=0}}n._icon.style.fontSize=u;n._icon.style.opacity=a;n._icon.style.zIndex=s.cZIndexBury+1;if(e.Options.bol_displaySectors){n._icon.style.display="table"}}break}}s.burySubmaps()},adjustZoomEvent:function(){var e;var t=s.Map.getZoom();var n;var r;var i;var o;switch(t){case 7:s.currentIconSize=32;break;case 6:s.currentIconSize=28;break;case 5:s.currentIconSize=24;break;case 4:s.currentIconSize=20;break;case 3:s.currentIconSize=16;break;default:{s.currentIconSize=0}}if(s.SubmapEntities.length>0){s.setEntityGroupDisplay(s.SubmapEntities,"show");for(e in s.SubmapEntities){r=s.SubmapEntities[e];i=s.scaleDimension(r.spatiality.maxwidth);o=s.scaleDimension(r.spatiality.maxheight);r.setIcon(new L.icon({iconUrl:r._icon.src,iconSize:[i,o],iconAnchor:[0,0]}));s.SubmapEntities[e]._icon.style.zIndex=s.cZIndexBury}}if(s.StoryEventIcons.length>0){s.currentRingSize=s.scaleDimension(s.cRING_SIZE_MAX);for(e in s.StoryEventIcons){n=s.StoryEventIcons[e];s.changeMarkerIcon(n,n._icon.src,s.currentIconSize);n=s.StoryEventRings[e];s.changeMarkerIcon(n,n._icon.src,s.currentRingSize);s.StoryEventIcons[e]._icon.style.zIndex=1e3;s.StoryEventRings[e]._icon.style.zIndex=1}}},burySubmaps:function(){if(s.SubmapEntities.length>0){for(var e in s.SubmapEntities){s.SubmapEntities[e]._icon.style.zIndex=s.cZIndexBury}}},changeMarkerIcon:function(e,t,n){if(n===undefined){n=s.cICON_SIZE_STANDARD}e.setIcon(new L.icon({iconUrl:t,iconSize:[n,n],iconAnchor:[n/2,n/2]}))},setEntityGroupDisplay:function(e,t){var n;var r;var i;if(t===false||t==="hide"||t<0){r="none"}else{r="block"}for(n in e){i=e[n];if(i._container!==undefined){i._container.style.display=r}else{i._icon.style.display=r}}},goToView:function(e,t,n){if(t===undefined){t=s.PinProgram}if(t!==null){t.setLatLng(s.convertGCtoLC(e))}var r;if(n){r=n}else{r=s.ZoomLevelEnum.Ground}s.Map.setView(s.convertGCtoLC(e),r);s.showCurrentZone(e)},goToURLCoords:function(){var e=f.Args[f.KeyEnum.Go];var t=[];var n;if(e){t=s.parseCoordinates(e);if(t.length===2){if(isFinite(t[0])&&isFinite(t[1])){s.goToView(t,s.PinPersonal)}}else if(t.length>=3){if(isFinite(t[0])&&isFinite(t[1])&&isFinite(t[2])){var r=s.ZoomLevelEnum.Max-u.wrapInteger(t[2],s.ZoomLevelEnum.Max);s.goToView([t[0],t[1]],s.PinPersonal,r)}}else{n=e.toLowerCase();if(s.Zones[n]){s.goToView(s.getZoneCenter(n),null,s.ZoomLevelEnum.Bird)}}}f.Args[f.KeyEnum.Go]=null},convertGCtoLC:function(e){return s.Map.unproject(e,s.Map.getMaxZoom())},convertGCtoLCMulti:function(e,t){t=t||0;var n;var r=new Array;for(n=t;n<e.length;n++){r.push(s.convertGCtoLC(e[n]))}return r},convertLCtoGC:function(e){var t=s.Map.project(e,s.ZoomLevelEnum.Max);return[Math.floor(t.x),Math.floor(t.y)]},parseCoordinates:function(e){var t=e.replace(/[^\d,-.]/g,"");return t.split(",")},getElementCoordinates:function(e){return s.parseCoordinates(e.attr("data-coord"))},bindMapLinks:function(e){$(e+" ins").each(function(){$(this).text("["+$(this).text()+"]");s.bindMapLinkBehavior($(this),s.PinProgram)})},bindMapLinkBehavior:function(e,t,n){e.click(function(){var e=s.getElementCoordinates($(this));s.goToView(e,t,n)});e.mouseover(function(){var e=s.getElementCoordinates($(this));s.PinOver.setLatLng(s.convertGCtoLC(e))});e.mouseout(function(){s.PinOver.setLatLng(s.convertGCtoLC([0,0]))})},bindMarkerZoomBehavior:function(e,t){e.on(t,function(e){if(s.Map.getZoom()===s.ZoomLevelEnum.Max){s.Map.setZoom(s.ZoomLevelEnum.Default)}else{s.Map.setView(e.latlng,s.ZoomLevelEnum.Max)}})},bindMappingZoomBehavior:function(e,t){e.on(t,function(e){if(s.Map.getZoom()===s.ZoomLevelEnum.Max){s.Map.setZoom(s.ZoomLevelEnum.Sky)}else{s.Map.setView(e.latlng,s.ZoomLevelEnum.Max)}})},bindZoneList:function(){$("#mapZoneList li").each(function(){var e=$(this).attr("data-zone");$(this).text(s.getZoneName(e));$(this).attr("data-coord",s.getZoneCenter(e).toString());s.bindMapLinkBehavior($(this),null,s.ZoomLevelEnum.Sky)});$("#mapZoneList h2").each(function(){var e=$(this).attr("data-region");$(this).text(s.getRegionName(e))})},displayIcons:function(e,t){var n;if(e===undefined||e===null){if(s.isShowingIconsForDaily){$("#mapToggle_Daily").trigger("click")}if(s.isShowingIconsForResource){$("#mapToggle_Resource").trigger("click")}else{$("#mapToggle_Resource").trigger("click").trigger("click")}if(s.isShowingIconsForCollectible){$("#mapToggle_Collectible").trigger("click")}else{$("#mapToggle_Collectible").trigger("click").trigger("click")}if(s.isShowingIconsForJP){$("#mapToggle_JP").trigger("click")}}else{if(t){if(!s["isShowingIconsFor"+e]){$("#mapToggle_"+e).trigger("click")}if(l.ArticleCurrent>=0){switch(e){case"Collectible":{for(n in s.Collectibles){if("Collectible"+l.ArticleCurrent!==n){$("#ned_"+n).trigger("click")}}}break}f.Args[f.KeyEnum.Article]=null}}else{if(e==="Resource"){if(s["isShowingIconsFor"+e]){$("#mapToggle_"+e).trigger("click")}else{$("#mapToggle_"+e).trigger("click").trigger("click")}}else if(e==="Collectible"){if(s["isShowingIconsFor"+e]){$("#mapToggle_"+e).trigger("click")}else{$("#mapToggle_"+e).trigger("click").trigger("click")}}else{if(s["isShowingIconsFor"+e]){$("#mapToggle_"+e).trigger("click")}}}}}};o={generateSubmaps:function(){s.SubmapTemp=o.createSubmap([2048,1536],[3713,15681],"http://i.imgur.com/nB9kM3O.jpg")},createSubmap:function(e,t,n){var r=s.scaleDimension(e[0]);var i=s.scaleDimension(e[1]);var o=L.marker(s.convertGCtoLC([t[0],t[1]]),{icon:L.icon({iconUrl:n,iconSize:[r,i],iconAnchor:[0,0]}),draggable:false,clickable:false}).addTo(s.Map);o.spatiality={maxwidth:e[0],maxheight:e[1]};s.SubmapEntities.push(o);return o},createPin:function(e){return L.marker(s.convertGCtoLC([0,0]),{icon:L.icon({iconUrl:e,iconSize:[32,32],iconAnchor:[16,16]}),draggable:true}).addTo(s.Map)},populateMap:function(){$.getJSON(f.URL_API.MapFloor,function(t){var n;var i,o,u,a,l;var c;var h;var p;var d;var v;var m;for(i in t.regions){o=t.regions[i];for(u in o.maps){if(!s.ZoneAssociations[u]){continue}a=o.maps[u];if(r.isLanguageSecondary()){s.getZoneFromID(u)["name_"+r.getFullySupportedLanguage()]=a.name}c=a.points_of_interest.length;for(n=0;n<c;n++){l=a.points_of_interest[n];switch(l.type){case s.APIPOIEnum.Waypoint:{v=s.MappingEnum.Waypoint;p=f.URL_IMG.Waypoint;d="mapWp";m=l.name}break;case s.APIPOIEnum.Landmark:{if(e.Options.bol_showWorldCompletion===false){continue}v=s.MappingEnum.Landmark;p=f.URL_IMG.Landmark;d="mapPoi";m=l.name}break;case s.APIPOIEnum.Vista:{if(e.Options.bol_showWorldCompletion===false){continue}v=s.MappingEnum.Vista;p=f.URL_IMG.Vista;d="mapPoi";m=r.getPhrase("Vista")}break;default:continue}h=L.marker(s.convertGCtoLC(l.coord),{title:"<span class='"+d+"'>"+m+"</span>",entityname:l.name,mappingtype:v,icon:L.icon({iconUrl:p,iconSize:[16,16],iconAnchor:[8,8]}),link:f.getChatlinkFromPoiID(l.poi_id)}).addTo(s.Map);h._icon.style.display="none";switch(l.type){case"waypoint":{h.on("mouseout",function(){this._icon.src=f.URL_IMG.Waypoint});h.on("mouseover",function(){this._icon.src=f.URL_IMG.WaypointOver})}break;case"landmark":{h.on("mouseout",function(){this._icon.src=f.URL_IMG.Landmark});h.on("mouseover",function(){this._icon.src=f.URL_IMG.LandmarkOver})}break}if(l.type==="waypoint"||l.type==="landmark"){h.on("click",function(){$("#mapCoordinatesCopy").val(this.options.link).select();$("#mapCoordinatesName").val(this.options.entityname)});s.bindMappingZoomBehavior(h,"dblclick")}else{s.bindMappingZoomBehavior(h,"click")}s.getZoneFromID(u).ZoneEntities.push(h)}if(e.Options.bol_showWorldCompletion){c=a.skill_challenges.length;for(n=0;n<c;n++){l=a.skill_challenges[n];h=L.marker(s.convertGCtoLC(l.coord),{title:"<span class='"+"mapPoi"+"'>"+r.getPhrase("Skill Challenge")+"</span>",mappingtype:s.MappingEnum.Skill,icon:L.icon({iconUrl:f.URL_IMG.Skill,iconSize:[16,16],iconAnchor:[8,8]})}).addTo(s.Map);h._icon.style.display="none";s.bindMappingZoomBehavior(h,"click");s.getZoneFromID(u).ZoneEntities.push(h)}c=a.tasks.length;for(n=0;n<c;n++){l=a.tasks[n];h=L.marker(s.convertGCtoLC(l.coord),{title:"<span class='"+"mapPoi"+"'>"+l.objective+" ("+l.level+")"+"</span>",task:l.objective,mappingtype:s.MappingEnum.Heart,icon:L.icon({iconUrl:f.URL_IMG.Heart,iconSize:[16,16],iconAnchor:[8,8]})}).addTo(s.Map);h._icon.style.display="none";h.on("click",function(e){var t=this.options.task;if(t.indexOf(".")===t.length-1){t=t.slice(0,-1)}f.openExternalURL(f.getWikiLanguageLink(t))});s.getZoneFromID(u).ZoneEntities.push(h)}c=a.sectors.length;for(n=0;n<c;n++){l=a.sectors[n];h=L.marker(s.convertGCtoLC(l.coord),{clickable:false,mappingtype:s.MappingEnum.Sector,icon:L.divIcon({className:"mapSec",html:"<span class='mapSecIn'>"+l.name+"</span>",iconSize:[512,64],iconAnchor:[256,32]})}).addTo(s.Map);h._icon.style.display="none";s.getZoneFromID(u).ZoneEntities.push(h)}s.isMappingIconsGenerated=true}}}}).done(function(){s.isAPIRetrieved_MAPFLOOR=true;if(e.Options.bol_showChainPaths===true&&l.PageCurrent!==l.PageEnum.Map){s.setEntityGroupDisplay(s.ChainPathEntities,"show")}if(e.Options.bol_tourPrediction&&l.PageCurrent===l.PageEnum.Chains&&f.Args[f.KeyEnum.Go]===undefined){s.showCurrentZone(s.getZoneCenter(s.cInitialZone));$("#chnEvent_"+i.CurrentChainSD.nexus+"_"+i.CurrentChainSD.CurrentPrimaryEvent.num).trigger("click")}l.qTip.init(".leaflet-marker-icon")}).fail(function(){if(l.ModeCurrent===l.ModeEnum.Website){l.write("Guild Wars 2 API server is unreachable.<br />"+"Reasons could be:<br />"+"- The GW2 server is down for maintenance.<br />"+"- Your browser is too old (if IE then need 11+).<br />"+"- Your computer's time is out of sync.<br />"+"- This website's code encountered a bug.<br />"+"Map features will be limited.<br />",15)}}).always(function(){s.isMapAJAXDone=true;s.bindMapVisualChanges();s.adjustZoomMapping();s.adjustZoomEvent();s.goToURLCoords()});s.PinPersonal=o.createPin("img/map/pin_white.png");s.PinProgram=o.createPin("img/map/pin_blue.png");s.PinEvent=o.createPin("img/map/pin_green.png");s.PinOver=L.marker(s.convertGCtoLC([0,0]),{icon:L.icon({iconUrl:"img/map/pin_over.png",iconSize:[128,128],iconAnchor:[64,64]}),draggable:true}).addTo(s.Map);s.PinEntities.push(s.PinPersonal);s.PinEntities.push(s.PinProgram);s.PinEntities.push(s.PinEvent);s.PinEntities.push(s.PinOver);for(var t in s.PinEntities){s.PinEntities[t].on("click",function(){var e=s.convertLCtoGC(this.getLatLng());$("#mapCoordinatesCopy").val("["+e[0]+", "+e[1]+"]").select()});s.PinEntities[t].on("dblclick",function(){this.setLatLng(s.convertGCtoLC([0,0]))})}},drawChainPaths:function(){var e,t;var n,o,u;var a;var f;for(e in i.Chains){n=i.Chains[e];for(t=0;t<n.primaryEvents.length;t++){u=n.primaryEvents[t];switch(t){case 0:a="red";break;case 1:a="orange";break;case 2:a="yellow";break;case 3:a="lime";break;case 4:a="cyan";break;case 5:a="blue";break;case 6:a="violet";break;case 7:a="purple";break;default:a="white"}f=s.convertGCtoLCMulti(u.path,1);s.ChainPathEntities.push(L.polyline(f,{color:a}).addTo(s.Map))}var c;for(t in n.events){o=n.events[t];c=o.num;if(c.indexOf(".")!==-1){c=c.replace(".","\\.")}$("#chnEvent_"+n.nexus+"_"+c).each(function(){var e=o.path[0];$(this).attr("data-coord",e[0]+","+e[1]);$(this).attr("data-eventindex",t);s.bindMapLinkBehavior($(this),s.PinEvent)});if(n.series===i.ChainSeriesEnum.Story){o.eventring=L.marker(s.convertGCtoLC(o.path[0]),{clickable:false,icon:L.icon({iconUrl:"img/ring/"+o.ring+l.cPNG,iconSize:[32,32],iconAnchor:[16,16]})}).addTo(s.Map);o.eventicon=L.marker(s.convertGCtoLC(o.path[0]),{title:"<span class='mapEvent'>"+r.getEventName(o)+"</span>",icon:L.icon({iconUrl:"img/event/"+o.icon+l.cPNG,iconSize:[16,16],iconAnchor:[8,8]})}).addTo(s.Map);o.eventring._icon.style.display="none";o.eventicon._icon.style.display="none";s.StoryEventRings.push(o.eventring);s.StoryEventIcons.push(o.eventicon)}}}s.setEntityGroupDisplay(s.ChainPathEntities,"hide")},generateAndInitializeDailies:function(){$(".mapDailyLists dt").each(function(){s.bindMapLinkBehavior($(this),null);var e=s.getElementCoordinates($(this));var t=f.getSubstringFromHTMLID($(this).parent());var n=L.marker(s.convertGCtoLC(e),{title:"<div class='mapLoc'><dfn>Daily:</dfn> "+t+"</div>"}).addTo(s.Map);n.setIcon(new L.icon({iconUrl:"img/daily/"+t.toLowerCase()+l.cPNG,iconSize:[32,32],iconAnchor:[16,16]}));n._icon.style.opacity="0.9";s.bindMarkerZoomBehavior(n,"click");s.DailyEntities.push(n)});$("#mapToggle_Daily").click(function(){s.isShowingIconsForDaily=!s.isShowingIconsForDaily;s.setEntityGroupDisplay(s.DailyEntities,s.isShowingIconsForDaily)});l.qTip.init(".leaflet-marker-icon")},generateAndInitializeResourceNodes:function(){s.Resources=GW2T_RESOURCE_DATA;var e,t;var n;var r;var i=function(e,t){e.setIcon(new L.icon({iconUrl:"img/node/"+t.toLowerCase()+l.cPNG,iconSize:[32,32],iconAnchor:[16,16]}));e._icon.style.borderRadius="16px";e._icon.style.opacity="0.9";e._icon.style.border="2px solid lime";s.bindMarkerZoomBehavior(e,"click")};for(e in s.Resources){n=s.Resources[e];n.NodeEntities=new Array;if(n.nodes!==undefined){for(t in n.nodes){r=L.marker(s.convertGCtoLC(n.nodes[t])).addTo(s.Map);i(r,e);if(n.approx===true){r._icon.style.border="2px dotted lime"}n.NodeEntities.push(r)}}else if(n.zones!==undefined){for(t in n.zones){var o=n.zones[t];var u=s.getZoneCenter(o);u[0]+=n.offset[0];u[1]+=n.offset[1];r=L.marker(s.convertGCtoLC(u)).addTo(s.Map);i(r,e);r._icon.style.border="2px dashed lime";n.NodeEntities.push(r)}}}for(e in s.Resources){n=s.Resources[e];$("#mapResource_"+n.type).append("<label><input id='nod_"+e+"' type='checkbox' /> <img src='img/node/"+e.toLowerCase()+l.cPNG+"' /> "+e+"</label>")}for(e in s.Resources){$("#nod_"+e).change(function(){var e=f.getSubstringFromHTMLID($(this));s.setEntityGroupDisplay(s.Resources[e].NodeEntities,$(this).prop("checked"))})}$("#mapToggle_Resource").click(function(){s.isShowingIconsForResource=!s.isShowingIconsForResource;for(e in s.Resources){$("#nod_"+e).prop("checked",s.isShowingIconsForResource);s.setEntityGroupDisplay(s.Resources[e].NodeEntities,s.isShowingIconsForResource)}})},styleJPMarkers:function(e,t){var n="2px solid lime";switch(t){case 1:n="2px solid orange";break;case 2:n="2px solid red";break}e._icon.style.border=n},generateAndInitializeJPs:function(){t.Checklists.JP.length=$(".mapJPList dt").length;var e;var n=function(e,t,n){var r=s.getElementCoordinates(e);var i=L.marker(s.convertGCtoLC(r),{id:t,dif:n,title:"<div class='mapLoc'><dfn>JP:</dfn> "+e.text()+"<img src='"+f.getImageHosted(e.data("img"))+"' /></div>"}).addTo(s.Map);i.setIcon(new L.icon({iconUrl:"img/ui/jp.png",iconSize:[32,32],iconAnchor:[16,16]}));i._icon.style.borderRadius="50%";i._icon.style.opacity="0.9";o.styleJPMarkers(i,n);s.JPEntities.push(i)};for(e=0;e<t.Checklists.JP.length;e++){$("#mapJP_"+e).each(function(){n($(this),f.getSubstringFromHTMLID($(this)),$(this).parent().data("jpdif"))})}$("#mapToggle_JP").click(function(){s.isShowingIconsForJP=!s.isShowingIconsForJP;s.setEntityGroupDisplay(s.JPEntities,s.isShowingIconsForJP)});l.qTip.init(".leaflet-marker-icon")},generateAndInitializeJPChecklistHTML:function(){$(".mapJPList dt").each(function(){var e=$(this).text();$(this).after("&nbsp;<cite><a href='"+f.getYouTubeLink(e+" "+l.cGameNick)+"' target='_blank'>[Y]</a> <a href='"+f.getWikiLink(e)+"' target='_blank'>[W]</a></cite>");s.bindMapLinkBehavior($(this),null);$(this).after("<label><input type='checkbox' id='mapJPCheck_"+f.getSubstringFromHTMLID($(this))+"' /></label>")});f.convertExternalLink(".mapJPList a");t.initializeChecklist(t.Checklists.JP,t.Checklists.JP.length);var n;for(n=0;n<t.Checklists.JP.length;n++){$("#mapJPCheck_"+n).each(function(){var r=t.getChecklistItem(t.Checklists.JP,n,e.TypeEnum.isBoolean);$(this).prop("checked",r);if(r===false){$(this).parent().prev().removeClass("mapJPListNameHover")}else{$(this).parent().prev().addClass("mapJPListNameHover");s.JPEntities[n]._icon.style.border="2px solid black"}}).change(function(){var e=t.getCheckboxEnumState($(this));var n=f.getSubintegerFromHTMLID($(this));if(e===t.ChecklistEnum.Unchecked){$(this).parent().prev().removeClass("mapJPListNameHover");o.styleJPMarkers(s.JPEntities[n],s.JPEntities[n].options.dif)}else{$(this).parent().prev().addClass("mapJPListNameHover");s.JPEntities[n]._icon.style.border="2px solid black"}t.setChecklistItem(t.Checklists.JP,n,e)}).parent().hover(function(){$(this).prev().css({"text-decoration":"underline"}).trigger("mouseenter")},function(){$(this).prev().css({"text-decoration":"none"}).trigger("mouseleave")});(function(e){s.JPEntities[e].on("click",function(){$("#mapJPCheck_"+e).trigger("click")});s.JPEntities[e].on("dblclick",function(){if(s.Map.getZoom()===s.ZoomLevelEnum.Max){s.Map.setZoom(s.ZoomLevelEnum.Default)}else{$("#mapJP_"+e).trigger("click")}})})(n)}$("#mapJPUncheck").click(function(){var e="";for(n=0;n<t.Checklists.JP.length;n++){$("#mapJPCheck_"+n).prop("checked",false).parent().prev().removeClass("mapJPListNameHover");o.styleJPMarkers(s.JPEntities[n],s.JPEntities[n].options.dif);e+="0"}t.Checklists.JP.value=e;localStorage[t.Checklists.JP.key]=t.Checklists.JP.value})},styleCollectibleMarker:function(e,n){switch(n){case t.ChecklistEnum.Unfound:e._icon.style.border="2px solid lime";break;case t.ChecklistEnum.Tracked:e._icon.style.border="2px solid red";break;case t.ChecklistEnum.Found:e._icon.style.border="2px solid white";break}},generateAndInitializeCollectibles:function(){s.Collectibles=GW2T_COLLECTIBLE_DATA;var e,n,r;var i;var u;var a;var c;var h;var p;var d=function(e,n,r,i){e.setIcon(new L.divIcon({className:"mapNeedle",html:"<span style='color:"+i+"'>"+n+"</span>",iconSize:[16,16],iconAnchor:[8,8]}));e._icon.style.borderRadius="16px";e._icon.style.opacity="0.9";o.styleCollectibleMarker(e,r);e.on("click",function(e){var n=this.options.needleType;var r=this.options.needleKey;var i=this.options.needleIndex;var s=t.trackChecklistItem(t.Checklists[n],i);o.styleCollectibleMarker(this,s);var u=t.getCheckedIndexes(t.Checklists[n]);if(u.length===0){f.updateQueryString()}else{f.updateAddressBar("?"+r+"="+u)}})};for(e in s.Collectibles){i=f.Args[t.Checklists[e].urlkey];t.Checklists[e].length=s.Collectibles[e].needles.length;t.initializeChecklist(t.Checklists[e],t.Checklists[e].length,i);u=s.Collectibles[e];u.NeedleEntities=new Array;for(n in u.needles){r=parseInt(n)+1;a=u.needles[n];c=t.getChecklistItem(t.Checklists[e],n);p="<div class='mapLoc'><dfn>"+u.name+":</dfn> #"+r;if(a.i){p+="<img src='"+f.getImageHosted(a.i)+"' />"}else if(a.t){p+="<br /><span class='mapTip'>"+a.t+" (User Contributed)</span>"}p+="</div>";h=L.marker(s.convertGCtoLC(a.c),{needleIndex:n,needleType:e,needleKey:t.Checklists[e].urlkey,title:p}).addTo(s.Map);d(h,r,c,u.color);t.Checklists[e].cushion.push(h);u.NeedleEntities.push(h)}u=s.Collectibles[e];$("#mapCollectibleList").append("<div><label style='color:"+u.color+"'><input id='ned_"+e+"' type='checkbox' /> "+u.name+"</label>"+"<span class='cssRight'><cite>"+"<a href='"+f.getYouTubeLink(u.name+" "+l.cGameNick)+"'>[Y]</a>&nbsp;"+"<a href='"+u.wiki+"'>[W]</a>&nbsp;"+"<a href='"+u.credit+"'>[C]</a>&nbsp;"+"&nbsp;-&nbsp;&nbsp;</cite>"+"<a id='nedUncheck_"+e+"' class='cssRight'>Reset</a>"+"</span></div>");$("#ned_"+e).change(function(){var e=f.getSubstringFromHTMLID($(this));s.setEntityGroupDisplay(s.Collectibles[e].NeedleEntities,$(this).prop("checked"))});$("#nedUncheck_"+e).click(function(){var e=f.getSubstringFromHTMLID($(this));var n=t.Checklists[e].cushion;for(var r in n){o.styleCollectibleMarker(n[r],t.ChecklistEnum.Unfound)}t.clearChecklist(t.Checklists[e]);f.updateQueryString()})}l.qTip.init(".mapNeedle");f.convertExternalLink("#mapCollectibleList cite a");$("#mapToggle_Collectible").click(function(){s.isShowingIconsForCollectible=!s.isShowingIconsForCollectible;for(e in s.Collectibles){$("#ned_"+e).prop("checked",s.isShowingIconsForCollectible);s.setEntityGroupDisplay(s.Collectibles[e].NeedleEntities,s.isShowingIconsForCollectible)}})}};u={DST_IN_EFFECT:0,SECONDS_TILL_RESET:0,TIMESTAMP_UNIX_SECONDS:0,cUTC_OFFSET_USER:0,cUTC_OFFSET_SERVER:-8,cUTC_OFFSET_HAWAII:-10,cUTC_OFFSET_EASTERN:-4,cMILLISECONDS_IN_SECOND:1e3,cSECONDS_IN_MINUTE:60,cSECONDS_IN_HOUR:3600,cSECONDS_IN_DAY:86400,cMINUTES_IN_HOUR:60,cMINUTES_IN_DAY:1440,cHOURS_IN_MERIDIEM:12,cHOURS_IN_DAY:24,cSECONDS_IN_TIMEFRAME:900,cMINUTES_IN_TIMEFRAME:15,cMINUTES_IN_EVENTFRAME:5,cNUM_TIMEFRAMES_IN_HOUR:4,cSECS_MARK_0:0,cSECS_MARK_1:900,cSECS_MARK_2:1800,cSECS_MARK_3:2700,cSECS_MARK_4:3599,cBASE_10:10,ReferenceEnum:{UTC:0,Local:1,Server:2},UnitEnum:{Milliseconds:0,Seconds:1,Minutes:2,Hours:3},Events:{numOfSets:7,en0:"Supplies@[&BJcHAAA=] Rustbucket@[&BJYHAAA=] TendrilW@[&BIYHAAA=] Shaman@[&BIsHAAA=]"+" Victims@[&BIwHAAA=] Tootsie@[&BHYHAAA=] Crystals@[&BHIHAAA=] TendrilSE@[&BHMHAAA=]",en1:"Beetles@[&BJYHAAA=] Bridge@[&BIkHAAA=] Experiment@[&BIwHAAA=] Golem@[&BIoHAAA=]"+" Nochtli@[&BHkHAAA=] COLOCAL@[&BHwHAAA=] Serene@[&BHQHAAA=] MineE@[&BHsHAAA=]",en2:"Suit@[&BJMHAAA=] Leyline@[&BIMHAAA=] Town@[&BH4HAAA=] Basket@[&BHMHAAA=] MineNE@[&BH0HAAA=]",en3:"Eway@[&BJcHAAA=] Giant@[&BIwHAAA=] Skritts@[&BIwHAAA=] Mites@[&BHUHAAA=] Haze@[&BHIHAAA=] Explosives@[&BH4HAAA=]",en4:"DEVOURER(2)@[&BHkHAAA=] Giant@[&BIwHAAA=]",en5:"Eway@[&BJcHAAA=] Chrii'kkt(4)@[&BIoHAAA=] Skritts@[&BIwHAAA=] Chickenado@[&BI4HAAA=] TWISTER(3)@[&BHoHAAA=] Haze@[&BHIHAAA=]",en6:"Beetle(5)@[&BJcHAAA=] Monster(4)@[&BHoHAAA=]",de0:"Vorräte@[&BJcHAAA=] Schrotteimer@[&BJYHAAA=] DschungelrankeW@[&BIYHAAA=] Schamanin@[&BIsHAAA=]"+" Unfallopfer@[&BIwHAAA=] Tootsie@[&BHYHAAA=] Kristalle@[&BHIHAAA=] DschungelrankeSO@[&BHMHAAA=]",de1:"Käfern@[&BJYHAAA=] Rankenbrücke@[&BIkHAAA=] Experimente@[&BIwHAAA=] Golem@[&BIoHAAA=]"+" Nochtli@[&BHkHAAA=] COLOCAL@[&BHwHAAA=] Serene@[&BHQHAAA=] MinenO@[&BHsHAAA=]",de2:"Aspektanzug@[&BJMHAAA=] Leylinien@[&BIMHAAA=] Kleinstadt@[&BH4HAAA=] Drachenkorb@[&BHMHAAA=] MinenNO@[&BH0HAAA=]",de3:"Eway@[&BJcHAAA=] Riesen@[&BIwHAAA=] Skritt@[&BIwHAAA=] Staubmilben@[&BHUHAAA=] Dunst@[&BHIHAAA=] Sprengstoff@[&BH4HAAA=]",de4:"VERSCHLINGER(2)@[&BHkHAAA=] Riesen@[&BIwHAAA=]",de5:"Eway@[&BJcHAAA=] Chrii'kkt(4)@[&BIoHAAA=] Skritt@[&BIwHAAA=] Hühnado@[&BI4HAAA=] STAUBWIRBELWIND(3)@[&BHoHAAA=] Dunst@[&BHIHAAA=]",de6:"Riesenkäfer(5)@[&BJcHAAA=] Staubmonster(4)@[&BHoHAAA=]",es0:"Suministros@[&BJcHAAA=] Chatarro@[&BJYHAAA=] ZarcilloO@[&BIYHAAA=] Chamán@[&BIsHAAA=]"+" Víctimas@[&BIwHAAA=] Ñique@[&BHYHAAA=] Cristales@[&BHIHAAA=] ZarcilloSE@[&BHMHAAA=]",es1:"Escarabajos@[&BJYHAAA=] Puente@[&BIkHAAA=] Experimento@[&BIwHAAA=] Gólem@[&BIoHAAA=]"+" Nochtli@[&BHkHAAA=] COLOCAL@[&BHwHAAA=] Serene@[&BHQHAAA=] MinaE@[&BHsHAAA=]",es2:"Traje@[&BJMHAAA=] Líneasley@[&BIMHAAA=] Villa@[&BH4HAAA=] Cestas@[&BHMHAAA=] MinaNE@[&BH0HAAA=]",es3:"Eway@[&BJcHAAA=] Gigante@[&BIwHAAA=] Skritt@[&BIwHAAA=] Ácaros@[&BHUHAAA=] Bruma@[&BHIHAAA=] Explosivos@[&BH4HAAA=]",es4:"DEVORADORA(2)@[&BHkHAAA=] Gigante@[&BIwHAAA=]",es5:"Eway@[&BJcHAAA=] Chrii'kkt(4)@[&BIoHAAA=] Skritt@[&BIwHAAA=] Pollonado@[&BI4HAAA=] HURACÁN(3)@[&BHoHAAA=] Bruma@[&BHIHAAA=]",es6:"Escarabajo(5)@[&BJcHAAA=] Monstruo(4)@[&BHoHAAA=]",fr0:"Provisions@[&BJcHAAA=] Tadrouille@[&BJYHAAA=] VrilleO@[&BIYHAAA=] Chamane@[&BIsHAAA=]"+" Survivants@[&BIwHAAA=] Bipbip@[&BHYHAAA=] Cristales@[&BHIHAAA=] VrilleSE@[&BHMHAAA=]",fr1:"Scarabées@[&BJYHAAA=] Pont@[&BIkHAAA=] Expériences@[&BIwHAAA=] Golem@[&BIoHAAA=]"+" Nochtli@[&BHkHAAA=] COLOCAL@[&BHwHAAA=] Serene@[&BHQHAAA=] MineE@[&BHsHAAA=]",fr2:"Combinaison@[&BJMHAAA=] Lignesforce@[&BIMHAAA=] Bourg@[&BH4HAAA=] Panier@[&BHMHAAA=] MineNE@[&BH0HAAA=]",fr3:"Eway@[&BJcHAAA=] Géant@[&BIwHAAA=] Skritts@[&BIwHAAA=] Acarides@[&BHUHAAA=] Haze@[&BHIHAAA=] Explosifs@[&BH4HAAA=]",fr4:"DÉVOREUSE(2)@[&BHkHAAA=] Géant@[&BIwHAAA=]",fr5:"Eway@[&BJcHAAA=] Chrii'kkt(4)@[&BIoHAAA=] Skritts@[&BIwHAAA=] Poulenade@[&BI4HAAA=] TORNADE(3)@[&BHoHAAA=] Haze@[&BHIHAAA=]",fr6:"Scarabée(5)@[&BJcHAAA=] Monstre(4)@[&BHoHAAA=]"},Schedule:{},Hourly:{},getCurrentStoryEvents:function(e){e=e||0;var t=new Date;var n=t.getUTCMinutes();var r=~~(n/u.cMINUTES_IN_EVENTFRAME)*u.cMINUTES_IN_EVENTFRAME+e*u.cMINUTES_IN_EVENTFRAME;return u.Hourly["t"+u.wrapInteger(r,u.cMINUTES_IN_HOUR)]+l.siteTagCurrent},initializeHourly:function(){if(i.StoryChains.length<=0){return}var t;var n=e.OptionEnum.Language.Default;if(r.isLanguageFullySupported()){n=e.Options.enu_Language}for(t=0;t<u.Events.numOfSets;t++){u.Events["Set"+t]=u.Events[n+t]}u.Hourly={t0:":00 "+u.Events.Set0,t5:":05 "+u.Events.Set1,t10:":10 "+u.Events.Set2,t15:":15 "+u.Events.Set0,t20:":20 "+u.Events.Set1,t25:":25 "+u.Events.Set2,t30:":30 "+u.Events.Set0,t35:":35 "+u.Events.Set1,t40:":40 "+u.Events.Set3,t45:":45 "+u.Events.Set4,t50:":50 "+u.Events.Set5,t55:":55 "+u.Events.Set6}},initializeSchedule:function(){i.FE=i.Chains[0];i.Golem=i.Chains[1];i.Jormag=i.Chains[2];i.Maw=i.Chains[3];i.Megades=i.Chains[4];i.SB=i.Chains[5];i.Shatterer=i.Chains[6];i.Taidha=i.Chains[7];i.Ulgoth=i.Chains[8];i.Wurm=i.Chains[9];i.Queen=i.Chains[10];i.Tequatl=i.Chains[11];i.Triple=i.Chains[12];i.Story0=i.Chains[13];i.Story1=i.Chains[14];i.Story2=i.Chains[15];i.Story3=i.Chains[16];u.Schedule={t0:{t:"00:00",c:[i.Taidha,i.Tequatl]},t15:{t:"00:15",c:[i.Maw]},t30:{t:"00:30",c:[i.Megades]},t45:{t:"00:45",c:[i.FE]},t60:{t:"01:00",c:[i.Shatterer,i.Triple]},t75:{t:"01:15",c:[i.Wurm]},t90:{t:"01:30",c:[i.Ulgoth]},t105:{t:"01:45",c:[i.SB]},t120:{t:"02:00",c:[i.Golem,i.Queen]},t135:{t:"02:15",c:[i.Maw]},t150:{t:"02:30",c:[i.Jormag]},t165:{t:"02:45",c:[i.FE]},t180:{t:"03:00",c:[i.Taidha,i.Tequatl]},t195:{t:"03:15",c:[i.Wurm]},t210:{t:"03:30",c:[i.Megades]},t225:{t:"03:45",c:[i.SB]},t240:{t:"04:00",c:[i.Shatterer,i.Triple]},t255:{t:"04:15",c:[i.Maw]},t270:{t:"04:30",c:[i.Ulgoth]},t285:{t:"04:45",c:[i.FE]},t300:{t:"05:00",c:[i.Golem]},t315:{t:"05:15",c:[i.Wurm]},t330:{t:"05:30",c:[i.Jormag]},t345:{t:"05:45",c:[i.SB]},t360:{t:"06:00",c:[i.Taidha,i.Queen]},t375:{t:"06:15",c:[i.Maw]},t390:{t:"06:30",c:[i.Megades]},t405:{t:"06:45",c:[i.FE]},t420:{t:"07:00",c:[i.Shatterer,i.Tequatl]},t435:{t:"07:15",c:[i.Wurm]},t450:{t:"07:30",c:[i.Ulgoth]},t465:{t:"07:45",c:[i.SB]},t480:{t:"08:00",c:[i.Golem,i.Triple]},t495:{t:"08:15",c:[i.Maw]},t510:{t:"08:30",c:[i.Jormag]},t525:{t:"08:45",c:[i.FE]},t540:{t:"09:00",c:[i.Taidha]},t555:{t:"09:15",c:[i.Wurm]},t570:{t:"09:30",c:[i.Megades]},t585:{t:"09:45",c:[i.SB]},t600:{t:"10:00",c:[i.Shatterer]},t615:{t:"10:15",c:[i.Maw]},t630:{t:"10:30",c:[i.Ulgoth,i.Queen]},t645:{t:"10:45",c:[i.FE]},t660:{t:"11:00",c:[i.Golem]},t675:{t:"11:15",c:[i.Wurm]},t690:{t:"11:30",c:[i.Jormag,i.Tequatl]},t705:{t:"11:45",c:[i.SB]},t720:{t:"12:00",c:[i.Taidha]},t735:{t:"12:15",c:[i.Maw]},t750:{t:"12:30",c:[i.Megades,i.Triple]},t765:{t:"12:45",c:[i.FE]},t780:{t:"13:00",c:[i.Shatterer]},t795:{t:"13:15",c:[i.Wurm]},t810:{t:"13:30",c:[i.Ulgoth]},t825:{t:"13:45",c:[i.SB]},t840:{t:"14:00",c:[i.Golem]},t855:{t:"14:15",c:[i.Maw]},t870:{t:"14:30",c:[i.Jormag]},t885:{t:"14:45",c:[i.FE]},t900:{t:"15:00",c:[i.Taidha,i.Queen]},t915:{t:"15:15",c:[i.Wurm]},t930:{t:"15:30",c:[i.Megades]},t945:{t:"15:45",c:[i.SB]},t960:{t:"16:00",c:[i.Shatterer,i.Tequatl]},t975:{t:"16:15",c:[i.Maw]},t990:{t:"16:30",c:[i.Ulgoth]},t1005:{t:"16:45",c:[i.FE]},t1020:{t:"17:00",c:[i.Golem,i.Triple]},t1035:{t:"17:15",c:[i.Wurm]},t1050:{t:"17:30",c:[i.Jormag]},t1065:{t:"17:45",c:[i.SB]},t1080:{t:"18:00",c:[i.Taidha,i.Queen]},t1095:{t:"18:15",c:[i.Maw]},t1110:{t:"18:30",c:[i.Megades]},t1125:{t:"18:45",c:[i.FE]},t1140:{t:"19:00",c:[i.Shatterer,i.Tequatl]},t1155:{t:"19:15",c:[i.Wurm]},t1170:{t:"19:30",c:[i.Ulgoth]},t1185:{t:"19:45",c:[i.SB]},t1200:{t:"20:00",c:[i.Golem,i.Triple]},t1215:{t:"20:15",c:[i.Maw]},t1230:{t:"20:30",c:[i.Jormag]},t1245:{t:"20:45",c:[i.FE]},t1260:{t:"21:00",c:[i.Taidha]},t1275:{t:"21:15",c:[i.Wurm]},t1290:{t:"21:30",c:[i.Megades]},t1305:{t:"21:45",c:[i.SB]},t1320:{t:"22:00",c:[i.Shatterer]},t1335:{t:"22:15",c:[i.Maw]},t1350:{t:"22:30",c:[i.Ulgoth]},t1365:{t:"22:45",c:[i.FE]},t1380:{t:"23:00",c:[i.Golem,i.Queen]},t1395:{t:"23:15",c:[i.Wurm]},t1410:{t:"23:30",c:[i.Jormag]},t1425:{t:"23:45",c:[i.SB]}};var e,n,r;var s=0;var o;for(e in u.Schedule){u.Schedule[e].c.push(i["Story"+s]);s++;if(s>u.cNUM_TIMEFRAMES_IN_HOUR-1){s=0}}i.ScheduledChains=new Array;i.initializeAllChains();for(e in u.Schedule){u.Schedule[e].t=u.parseChainTime(u.Schedule[e].t);o=u.Schedule[e];for(n in i.ScheduledChains){for(r in o.c){if(i.ScheduledChains[n].nexus===o.c[r].nexus){i.ScheduledChains[n].scheduleKeys.push(e);break}}}}t.initializeChainChecklist();i.CurrentChainSD=u.getStandardChain();u.initializeHourly()},getScheduleSlotTime:function(e){return u.Schedule[e].t},getScheduleSlotChainsByKey:function(e){return u.Schedule[e].c},getCurrentTimeframe:function(){var e=u.getTimeOffsetSinceMidnight(u.ReferenceEnum.UTC,u.UnitEnum.Minutes);return e-e%u.cMINUTES_IN_TIMEFRAME},getTimeframe:function(e){e=e||0;var t=u.getCurrentTimeframe()+e*u.cMINUTES_IN_TIMEFRAME;return u.wrapInteger(t,u.cMINUTES_IN_DAY)},getTimeframeChains:function(e){return u.Schedule["t"+u.getTimeframe(e)].c},getTimeframeChainBySeries:function(e,t){var n;var r=u.getTimeframeChains(e);for(n in r){if(r[n].series===t){return r[n]}}return null},getStandardChain:function(e){return u.getTimeframeChainBySeries(e,i.ChainSeriesEnum.Standard)},getHardcoreChain:function(e){return u.getTimeframeChainBySeries(e,i.ChainSeriesEnum.Hardcore)},getTimeframeKey:function(e){return"t"+u.getTimeframe(e)},convertScheduleKeyToLocalSeconds:function(e){var t=u.getScheduleSlotTime(e)*u.cSECONDS_IN_MINUTE-(new Date).getTimezoneOffset()*u.cSECONDS_IN_MINUTE;t=u.wrapInteger(t,u.cSECONDS_IN_DAY);return t},getCurrentTimeframeElapsedTime:function(e){var t=new Date;var n=t.getUTCMinutes();var r=t.getUTCSeconds();if(e===u.UnitEnum.Minutes){return n%u.cMINUTES_IN_TIMEFRAME}return n%u.cMINUTES_IN_TIMEFRAME*u.cSECONDS_IN_MINUTE+r},getSecondsUntilChainStarts:function(e){var t=u.convertScheduleKeyToLocalSeconds(e.scheduleKeys[0]);var n=u.getTimeOffsetSinceMidnight(u.ReferenceEnum.Local,u.UnitEnum.Seconds);var r=u.cSECONDS_IN_TIMEFRAME*u.cNUM_TIMEFRAMES_IN_HOUR;if(t>=u.cSECONDS_IN_DAY-r&&n<=r){return u.cSECONDS_IN_DAY-t+n}if(n>=u.cSECONDS_IN_DAY-r&&t<=r){return u.cSECONDS_IN_DAY-n+t}return t-n},getTimeTillChainFormatted:function(e,t){var n=u.getSecondsUntilChainStarts(e);var i=~~(n/u.cSECONDS_IN_MINUTE)%u.cSECONDS_IN_MINUTE;var s=~~(n/u.cSECONDS_IN_HOUR);var o=r.getPhrase("m");var a=r.getPhrase("h");if(t==="speech"){o=" "+r.getSpeech("minute");a=" "+r.getSpeech("hour");if(Math.abs(i)>1){o=" "+r.getSpeech("minutes")}if(Math.abs(s)>1){a=" "+r.getSpeech("hours")}if(s===0&&Math.abs(i)===30){i=r.getSpeech("half an hour");o="";a=""}}a+=" ";i=i+o;if(Math.abs(n)>=u.cSECONDS_IN_HOUR){s=s+a}else{s=""}if(n<0){return" "+s+i+" "+r.getPhrase("ago")}return" "+r.getPhrase("in")+" "+s+i},randIntRange:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},wrapInteger:function(e,t){var n=e;n=n%t;if(n<0){n=t+n}return n},parseEventTime:function(e){var t=new Array;if(e.indexOf("~")!==-1){t=e.split("~");return u.parseEventTime(t[0])+~~(u.parseEventTime(t[1])/2)}if(e==="*"){return 0}if(e.indexOf(":")===-1){return parseInt(e,u.cBASE_10)}t=e.split(":");if(t.length===2){return parseInt(t[0],u.cBASE_10)*u.cSECONDS_IN_MINUTE+parseInt(t[1],u.cBASE_10)}if(t.length===3){return parseInt(t[0])*u.cSECONDS_IN_HOUR+parseInt(t[1],u.cBASE_10)*u.cSECONDS_IN_MINUTE+parseInt(t[2],u.cBASE_10)}return NaN},parseChainTime:function(e){var t=e.split(":");return parseInt(t[0],u.cBASE_10)*u.cMINUTES_IN_HOUR+parseInt(t[1],u.cBASE_10)},checkDST:function(){Date.prototype.stdTimezoneOffset=function(){var e=new Date(this.getFullYear(),0,1);var t=new Date(this.getFullYear(),6,1);return Math.max(e.getTimezoneOffset(),t.getTimezoneOffset())};Date.prototype.dst=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()};var t=new Date;if(t.dst()&&e.Options.bol_detectDST===false){u.DST_IN_EFFECT=1}u.cUTC_OFFSET_USER=-((new Date).getTimezoneOffset()/u.cMINUTES_IN_HOUR);if(u.cUTC_OFFSET_USER<=u.cUTC_OFFSET_EASTERN&&u.cUTC_OFFSET_USER>=u.cUTC_OFFSET_HAWAII){e.Options.bol_use24Hour=false}},getTimeFormatted:function(t){t=t||{};if(t.reference===undefined){t.reference=u.ReferenceEnum.Local}if(t.want24===undefined){t.want24=e.Options.bol_use24Hour}if(t.wantSeconds===undefined){t.wantSeconds=true}if(t.wantHours===undefined){t.wantHours=true}if(t.wantLetters===undefined){t.wantLetters=false}var n,r,i;var s=new Date;if(t.customTimeInSeconds===undefined){switch(t.reference){case u.ReferenceEnum.Local:{n=s.getSeconds();r=s.getMinutes();i=s.getHours()}break;case u.ReferenceEnum.Server:{n=s.getSeconds();r=s.getMinutes();i=s.getUTCHours()+u.cUTC_OFFSET_SERVER+u.DST_IN_EFFECT;i=u.wrapInteger(i,u.cHOURS_IN_DAY)}break;case u.ReferenceEnum.UTC:{n=s.getUTCSeconds();r=s.getUTCMinutes();i=s.getUTCHours()}break}}else{t.customTimeInSeconds=u.wrapInteger(t.customTimeInSeconds,u.cSECONDS_IN_DAY);n=t.customTimeInSeconds%u.cSECONDS_IN_MINUTE;r=~~(t.customTimeInSeconds/u.cSECONDS_IN_MINUTE)%u.cMINUTES_IN_HOUR;i=~~(t.customTimeInSeconds/u.cSECONDS_IN_HOUR)}var o="";if(t.wantSeconds){if(t.wantLetters){if(i===0&&r===0){o=n+"s"}else{o=r+"m"+" "+n+"s"}}else if(t.wantHours===false){o=r+":"+(n<u.cBASE_10?"0"+n:n)}else{o=(r<u.cBASE_10?"0"+r:r)+":"+(n<u.cBASE_10?"0"+n:n)}}else{if(t.wantLetters){o=r+"m"}else{o=r<u.cBASE_10?"0"+r:r}}if(t.wantLetters){if(i===0||t.wantHours===false){return o}return i+"h "+o}if(t.want24){if(t.wantHours===false){return o}return(i<u.cBASE_10?"0"+i:i)+":"+o}var a=" AM";if(i>=u.cHOURS_IN_MERIDIEM){if(i>u.cHOURS_IN_MERIDIEM){i=i%u.cHOURS_IN_MERIDIEM}a=" PM"}else if(i===0){i=u.cHOURS_IN_MERIDIEM}return i+":"+o+a},getTimeOffsetSinceMidnight:function(e,t){t=t||u.UnitEnum.Seconds;e=e||u.ReferenceEnum.UTC;var n=new Date;var r=n.getUTCHours();var i=n.getUTCMinutes();var s=n.getUTCSeconds();switch(e){case u.ReferenceEnum.Server:r=r+u.cUTC_OFFSET_SERVER+u.DST_IN_EFFECT;break;case u.ReferenceEnum.UTC:break;case u.ReferenceEnum.Local:{r=n.getHours();i=n.getMinutes();s=n.getSeconds()}break}r=u.wrapInteger(r,u.cHOURS_IN_DAY);if(t===u.UnitEnum.Hours){return r}if(t===u.UnitEnum.Minutes){return r*u.cMINUTES_IN_HOUR+i}return r*u.cSECONDS_IN_HOUR+i*u.cSECONDS_IN_MINUTE+s},getUNIXSeconds:function(){return~~((new Date).getTime()/u.cMILLISECONDS_IN_SECOND)}};a={tickerFrequency:250,tickerSecondPrevious:null,awakeTimestampPrevious:0,awakeTimestampTolerance:5,currentFrameOffsetMinutes:0,iconOpacityChecked:.4,iconOpacitySpeed:200,oldQuadrantAngle:0,cDEGREES_IN_CIRCLE:360,cDEGREES_IN_QUADRANT:90,handSecond:{},handMinute:{},handHour:{},clockBackground:{},clockCircumference:{},timeLocal:{},timeServer:{},timeBoard:{},timestampUTC:{},timestampLocal:{},timestampServer:{},timestampReset:{},WpChain0:{},WpChain1:{},WpChain2:{},WpChain3:{},IconSD0:{},IconSD1:{},IconSD2:{},IconSD3:{},IconHC0:{},IconHC1:{},IconHC2:{},IconHC3:{},IconsStandard:new Array,IconsHardcore:new Array,wpClipboards:[],lsClipboards:[],cZeroClipboardDataAttribute:"data-clipboard-text",TickerTimeout:{},initializeClock:function(){a.handSecond=$("#clkSecondHand")[0];a.handMinute=$("#clkMinuteHand")[0];a.handHour=$("#clkHourHand")[0];a.clockBackground=$("#paneClockBackground")[0];a.clockCircumference=$("#clkCircumference")[0];a.timeLocal=$("#itemTimeLocalActual")[0];a.timeServer=$("#itemTimeServer")[0];a.timeBoard=$("#itemBoardTime")[0];a.timestampUTC=$("#optTimestampUTC")[0];a.timestampLocal=$("#optTimestampLocalReset")[0];a.timestampServer=$("#optTimestampServerReset")[0];a.timestampReset=$("#optTimeTillReset")[0];a.updateTimeFrame(new Date);a.tickFrequent();a.initializeClipboard()},setClock:function(){var t=200;var n=0;switch(e.Options.int_setClock){case e.IntEnum.Clock.Compact:{$("#paneClock").show();$("#itemTimeLocal, #itemTimeServer, #itemLanguage, #itemSocial").show();l.bulkAnimate([{s:"#itemClock",p:{top:"0px",left:"70px",width:"220px",height:"220px"}},{s:"#paneClockFace",p:{width:"360px",height:"360px",top:"-70px",left:"0px"}},{s:"#paneClockIcons .iconSD",p:{"border-radius":"32px"}},{s:"#paneClockIcons .iconHC",p:{"border-radius":"24px"}},{s:"#itemClockIconSD0",p:{top:"4px",left:"290px"}},{s:"#itemClockIconSD1",p:{top:"148px",left:"290px"}},{s:"#itemClockIconSD2",p:{top:"148px",left:"4px"}},{s:"#itemClockIconSD3",p:{top:"4px",left:"4px"}},{s:"#itemClockIconHC0",p:{top:"52px",left:"306px"}},{s:"#itemClockIconHC1",p:{top:"132px",left:"306px"}},{s:"#itemClockIconHC2",p:{top:"132px",left:"20px"}},{s:"#itemClockIconHC3",p:{top:"52px",left:"20px"}},{s:"#itemClockWaypoint0",p:{top:"24px",left:"274px"}},{s:"#itemClockWaypoint1",p:{top:"164px",left:"274px"}},{s:"#itemClockWaypoint2",p:{top:"164px",left:"52px"}},{s:"#itemClockWaypoint3",p:{top:"24px",left:"52px"}},{s:"#itemClockStar0",p:{top:"-10px",left:"138px"}},{s:"#itemClockStar1",p:{top:"-10px",left:"190px"}}],t);$("#paneClockIcons .iconHC").css({width:"32px",height:"32px"});$("#itemTimeLocal").css({width:"100%",right:"auto",bottom:"90px","text-align":"center",color:"#eee",opacity:.5});$("#itemTimeServer").css({width:"100%",top:"90px",bottom:"auto",left:"auto","text-align":"center",color:"#eee",opacity:.5});$("#itemLanguage").css({bottom:"72px",left:"10px"});$("#itemSocial").css({bottom:"100px",right:"10px"});n=l.cPANE_CLOCK_HEIGHT_COMPACT}break;case e.IntEnum.Clock.Full:{$("#paneClock").show();$("#itemTimeLocal, #itemTimeServer, #itemLanguage, #itemSocial").show();l.bulkAnimate([{s:"#itemClock",p:{top:"70px",left:"70px",width:"220px",height:"220px"}},{s:"#paneClockFace",p:{width:"360px",height:"360px",top:"0px",left:"0px"}},{s:"#paneClockIcons .iconSD",p:{"border-radius":"12px"}},{s:"#paneClockIcons .iconHC",p:{"border-radius":"12px"}},{s:"#itemClockIconSD0",p:{top:"4px",left:"148px"}},{s:"#itemClockIconSD1",p:{top:"148px",left:"290px"}},{s:"#itemClockIconSD2",p:{top:"290px",left:"148px"}},{s:"#itemClockIconSD3",p:{top:"148px",left:"4px"}},{s:"#itemClockIconHC0",p:{top:"12px",left:"212px"}},{s:"#itemClockIconHC1",p:{top:"212px",left:"298px"}},{s:"#itemClockIconHC2",p:{top:"298px",left:"100px"}},{s:"#itemClockIconHC3",p:{top:"100px",left:"12px"}},{s:"#itemClockWaypoint0",p:{top:"52px",left:"164px"}},{s:"#itemClockWaypoint1",p:{top:"164px",left:"274px"}},{s:"#itemClockWaypoint2",p:{top:"274px",left:"164px"}},{s:"#itemClockWaypoint3",p:{top:"164px",left:"52px"}},{s:"#itemClockStar0",p:{top:"280px",left:"286px"}},{s:"#itemClockStar1",p:{top:"280px",left:"328px"}}],t);$("#paneClockIcons .iconHC").css({width:"48px",height:"48px"});$("#itemTimeLocal").css({width:"auto",right:"10px",bottom:"10px","text-align":"left",color:"#bbcc77",opacity:1});$("#itemTimeServer").css({width:"auto",top:"auto",bottom:"10px",left:"10px","text-align":"left",color:"#bbcc77",opacity:1});$("#itemLanguage").css({bottom:"0px",left:"10px"});$("#itemSocial").css({bottom:"28px",right:"10px"});n=l.cPANE_CLOCK_HEIGHT}break;case e.IntEnum.Clock.Bar:{$("#paneClock").show();$("#itemTimeLocal, #itemTimeServer, #itemLanguage, #itemSocial").hide();l.bulkAnimate([{s:"#itemClock",p:{top:"0px",left:"0px",width:"85px",height:"85px"}},{s:"#paneClockFace",p:{width:"132px",height:"132px",top:"-24px",left:"-24px"}},{s:"#paneClockIcons .iconSD",p:{"border-radius":"32px"}},{s:"#paneClockIcons .iconHC",p:{"border-radius":"24px"}},{s:"#itemClockIconSD0",p:{top:"0px",left:"82px"}},{s:"#itemClockIconSD1",p:{top:"0px",left:"152px"}},{s:"#itemClockIconSD2",p:{top:"0px",left:"222px"}},{s:"#itemClockIconSD3",p:{top:"0px",left:"292px"}},{s:"#itemClockIconHC0",p:{top:"48px",left:"98px"}},{s:"#itemClockIconHC1",p:{top:"48px",left:"168px"}},{s:"#itemClockIconHC2",p:{top:"48px",left:"238px"}},{s:"#itemClockIconHC3",p:{top:"48px",left:"308px"}},{s:"#itemClockWaypoint0",p:{top:"-8px",left:"98px"}},{s:"#itemClockWaypoint1",p:{top:"-8px",left:"168px"}},{s:"#itemClockWaypoint2",p:{top:"-8px",left:"238px"}},{s:"#itemClockWaypoint3",p:{top:"-8px",left:"308px"}},{s:"#itemClockStar0",p:{top:"-16px",left:"0px"}},{s:"#itemClockStar1",p:{top:"-16px",left:"53px"}}],t);$("#paneClockIcons .iconHC").css({width:"32px",height:"32px"});n=l.cPANE_CLOCK_HEIGHT_BAR}break;case e.IntEnum.Clock.None:{$("#paneMenu").animate({top:0},t);$(l.cContentPane).animate({top:l.cPANE_MENU_HEIGHT,"min-height":l.cPANEL_HEIGHT-l.cPANE_MENU_HEIGHT+"px"},t,function(){$("#paneClock").hide()})}break}if(e.Options.int_setClock!==e.IntEnum.Clock.None){$("#paneMenu").animate({top:n},t);$("#paneClock, #paneClockWall, #paneClockBackground, #paneClockIcons").animate({height:n},t);$(l.cContentPane).animate({top:n+l.cPANE_MENU_HEIGHT,"min-height":l.cPANEL_HEIGHT-(n+l.cPANE_MENU_HEIGHT)+"px"},t)}if(l.ModeCurrent===l.ModeEnum.Overlay){$("#itemSocial").hide()}},setMarkerAngle:function(e,t){$(e).attr("transform","rotate("+t/10+", 50, 50)")},rotateClockElement:function(e,t){e.setAttribute("transform","rotate("+t+", 50, 50)")},reapplyFilters:function(){if(l.BrowserUser===l.BrowserEnum.Firefox){var e=$("#clkCircumference");var t=$("#clkHands");var n="url(#clkFilterShadowOuter)";var r="url(#clkGradientCircumference)";var i="url(#clkFilterShadowHand)";e.removeAttr("filter").attr("filter",n);e.css("stroke",r);t.removeAttr("filter").attr("filter",i)}},initializeClockItems:function(){a.IconsStandard=null;a.IconsHardcore=null;a.IconsStandard=new Array(a.IconSD0,a.IconSD1,a.IconSD2,a.IconSD3);a.IconsHardcore=new Array(a.IconHC0,a.IconHC1,a.IconHC2,a.IconHC3);var e;var t;for(e=0;e<u.cNUM_TIMEFRAMES_IN_HOUR;e++){$([a.IconsStandard[e],a.IconsHardcore[e]]).each(function(){$(this).unbind("dblclick").dblclick(function(){t=i.Chains[$(this).data(i.cIndexSynonym)].primaryEvents[0].path[0];s.goToView(t,s.PinEvent)}).unbind("click").click(function(){$("#chnCheck_"+i.Chains[$(this).data(i.cIndexSynonym)].nexus).trigger("click")})})}},checkoffChainIcon:function(e){var n;var r=i.Chains[e];var s;var o;if(r.series===i.ChainSeriesEnum.Standard||r.series===i.ChainSeriesEnum.Hardcore){for(n=0;n<u.cNUM_TIMEFRAMES_IN_HOUR;n++){switch(r.series){case i.ChainSeriesEnum.Standard:{s=u.getStandardChain(n);o=a.IconsStandard[n]}break;case i.ChainSeriesEnum.Hardcore:{s=u.getHardcoreChain(n);o=a.IconsHardcore[n]}break}if(s&&e===s.nexus){if(t.getChainChecklistState(s)!==t.ChecklistEnum.Unchecked){o.css({opacity:1}).animate({opacity:a.iconOpacityChecked},a.iconOpacitySpeed)}else{o.css({opacity:a.iconOpacityChecked}).animate({opacity:1},a.iconOpacitySpeed)}}}}},tickFrequent:function(){var e=new Date;var t=e.getSeconds();if(a.tickerSecondPrevious===t){a.TickerTimeout=setTimeout(a.tickFrequent,a.tickerFrequency);return}else{a.tickerSecondPrevious=t;a.tickSecond(e)}},tickSecond:function(t){var n=t.getSeconds();u.TIMESTAMP_UNIX_SECONDS=u.getUNIXSeconds();u.SECONDS_TILL_RESET=u.cSECONDS_IN_DAY-u.getTimeOffsetSinceMidnight(u.ReferenceEnum.UTC,u.UnitEnum.Seconds);var r=t.getMinutes();var s=t.getHours()%u.cHOURS_IN_MERIDIEM;var o=r*60+n;var f=n*6;var c=r*6+n/10;var h=s*30+r/60*30;a.rotateClockElement(a.clockCircumference,c);a.rotateClockElement(a.handSecond,f);a.rotateClockElement(a.handMinute,c);a.rotateClockElement(a.handHour,h);var p=1-(r%u.cMINUTES_IN_TIMEFRAME*60+n)/u.cSECONDS_IN_TIMEFRAME;if(r%u.cMINUTES_IN_TIMEFRAME===0&&n===0){if(e.Options.int_setDimming===0&&l.ModeCurrent!==l.ModeEnum.Simple&&l.ModeCurrent!==l.ModeEnum.Overlay){$(a.clockBackground).fadeTo(800,1)}a.updateTimeFrame(t)}else{var d=u.TIMESTAMP_UNIX_SECONDS;if(a.awakeTimestampPrevious<d-a.awakeTimestampTolerance){a.updateTimeFrame(t)}a.awakeTimestampPrevious=d;if(e.Options.int_setDimming===0&&l.ModeCurrent!==l.ModeEnum.Simple){a.clockBackground.style.opacity=p}}i.CurrentChains.forEach(i.updateCurrentChainTimeHTML);if(n===0){if(e.Options.bol_useCountdown){i.updateChainsTimeHTML()}a.updateWaypointsClipboard();if(e.Options.int_setAlarm===e.IntEnum.Alarm.Subscription){a.doSubscribedSpeech(e.Options.int_alertSubscribedFirst);a.doSubscribedSpeech(e.Options.int_alertSubscribedSecond)}if(r%u.cMINUTES_IN_EVENTFRAME===0){a.updateStoryClipboard()}}a.timeLocal.innerHTML=u.getTimeFormatted();a.timeServer.innerHTML="("+u.getTimeFormatted({reference:u.ReferenceEnum.Server,wantSeconds:false})+")";a.timeBoard.innerHTML=u.getTimeFormatted({want24:true,wantHours:false,wantLetters:true,customTimeInSeconds:u.cSECONDS_IN_TIMEFRAME-u.getCurrentTimeframeElapsedTime()});a.timestampUTC.innerHTML=u.TIMESTAMP_UNIX_SECONDS;a.timestampLocal.innerHTML=e.Utilities.lastLocalResetTimestamp.value;a.timestampServer.innerHTML=u.TIMESTAMP_UNIX_SECONDS+u.SECONDS_TILL_RESET;a.timestampReset.innerHTML=u.getTimeFormatted({customTimeInSeconds:u.SECONDS_TILL_RESET,want24:true});if(o>=a.currentFrameOffsetMinutes&&o<a.currentFrameOffsetMinutes+i.CurrentChainSD.minFinish){a.handMinute.style.stroke="lime"}else if(o>=a.currentFrameOffsetMinutes+i.CurrentChainSD.minFinish&&o<a.currentFrameOffsetMinutes+i.CurrentChainSD.avgFinish){a.handMinute.style.stroke="orange"}else if(o>=a.currentFrameOffsetMinutes+i.CurrentChainSD.avgFinish){a.handMinute.style.stroke="red"}a.TickerTimeout=setTimeout(a.tickFrequent,a.tickerFrequency)},doSubscribedSpeech:function(t){if(t>0){var n=u.cMINUTES_IN_TIMEFRAME-u.getCurrentTimeframeElapsedTime(u.UnitEnum.Minutes);var s=i.NextChainSD1;var o=i.NextChainHC1;var a=false;var f=false;var l=r.getSpeech("world boss","subscribed")+" ";var c=5;if(t>u.cMINUTES_IN_TIMEFRAME){s=i.NextChainSD2;o=i.NextChainHC2;n+=u.cMINUTES_IN_TIMEFRAME}a=e.objToBool(s)&&i.isChainSubscribed(s)&&i.isChainUnchecked(s);f=e.objToBool(o)&&i.isChainSubscribed(o)&&i.isChainUnchecked(o);if(t===n&&(a||f)){if(a&&f){l+=r.getChainPronunciation(s)+" "+r.getSpeech("and")+" "+r.getChainPronunciation(o);c=6}else if(a){l+=r.getChainPronunciation(s)}else if(f){l+=r.getChainPronunciation(o)}r.speak(l,c);r.speak(r.getSpeech("will start")+u.getTimeTillChainFormatted(s,"speech"),3)}}},updateTimeFrame:function(n){e.checkResetTimestamp();i.CurrentChainSD=u.getStandardChain();i.NextChainSD1=u.getStandardChain(1);i.NextChainSD2=u.getStandardChain(2);i.NextChainSD3=u.getStandardChain(3);i.NextChainSD4=u.getStandardChain(4);i.CurrentChainHC=u.getHardcoreChain();i.NextChainHC1=u.getHardcoreChain(1);i.NextChainHC2=u.getHardcoreChain(2);i.NextChainHC3=u.getHardcoreChain(3);i.NextChainHC4=u.getHardcoreChain(4);i.PreviousChains2=u.getTimeframeChains(-2);i.PreviousChains1=u.getTimeframeChains(-1);i.CurrentChains=u.getTimeframeChains();i.NextChains1=u.getTimeframeChains(1);i.sortChainsListHTML();i.CurrentChains.forEach(i.queueEventsHighlight);$("#itemBoardCurrentSD").text(r.getChainTitleAny(i.CurrentChainSD.nexus));$("#itemBoardNextSD").text(r.getChainTitleAny(i.NextChainSD1.nexus));$("#itemBoardCurrentHC").text("");$("#itemBoardNextHC").text("");if(i.CurrentChainHC||i.NextChainHC1){$("#itemBoardHC").show();if(i.CurrentChainHC){$("#itemBoardCurrentHC").text(r.getChainTitleAny(i.CurrentChainHC.nexus))}if(i.NextChainHC1){$("#itemBoardNextHC").text(r.getChainTitleAny(i.NextChainHC1.nexus))}}else{$("#itemBoardHC").hide()}if(e.Options.int_setAlarm===e.IntEnum.Alarm.Checklist&&e.Options.bol_alertAtEnd){var s=", "+r.getSpeech("checked");var o="";var f="";var c="";var h="";var p=e.objToBool(i.CurrentChainSD);var d=e.objToBool(i.CurrentChainHC);var v=e.objToBool(i.NextChainSD1);var m=e.objToBool(i.NextChainHC1);var g=r.getSpeech("world boss","current")+" "+r.getSpeech("is")+" ";if(i.CurrentChainSD&&!i.isChainUnchecked(i.CurrentChainSD)){o=s}if(i.CurrentChainHC&&!i.isChainUnchecked(i.CurrentChainHC)){c=s}if(i.NextChainSD1&&!i.isChainUnchecked(i.NextChainSD1)){f=s}if(i.NextChainHC1&&!i.isChainUnchecked(i.NextChainHC1)){h=s}if(e.Options.bol_alertChecked===false){if(o.length>0){p=false}if(c.length>0){d=false}if(f.length>0){v=false}if(h.length>0){m=false}}if(p&&d){r.speak(g+r.getChainPronunciation(i.CurrentChainSD)+o,5);r.speak(r.getSpeech("and")+", "+r.getChainPronunciation(i.CurrentChainHC)+c,4)}else if(p){r.speak(g+r.getChainPronunciation(i.CurrentChainSD)+o,5)}else if(d){r.speak(g+r.getChainPronunciation(i.CurrentChainHC)+c,5)}if(p||d){if(v&&m){r.speak(r.getSpeech("then")+", "+r.getChainPronunciation(i.NextChainSD1)+f,4);r.speak(r.getSpeech("and")+", "+r.getChainPronunciation(i.NextChainHC1)+h,4)}else if(v){r.speak(r.getSpeech("then")+", "+r.getChainPronunciation(i.NextChainSD1)+f,4)}else if(m){r.speak(r.getSpeech("then")+", "+r.getChainPronunciation(i.NextChainHC1)+h,4)}}}var y=n.getSeconds();var b=n.getMinutes();var w=b*60+y;$("#clkMarkers line").each(function(){$(this).attr("stroke","black")});$("#paneClockIcons .iconSD").css({border:"1px solid black","box-shadow":"0px 0px 10px black"});$("#paneClockIcons .iconHC").css({border:"1px solid black","box-shadow":"0px 0px 10px black"});var E=function(e,n,s,o,u,f,c,h,p,d,v,m,g,y){$([a.IconSD0,a.IconHC0]).each(function(){$(this).css({border:"1px solid lime","box-shadow":"0px 0px 10px lime"})});$([a.IconSD1,a.IconHC1]).each(function(){$(this).css({border:"1px solid green","box-shadow":"0px 0px 10px green"})});a.setMarkerAngle(n,i.CurrentChainSD.minFinish+v);a.setMarkerAngle(s,i.CurrentChainSD.avgFinish+v);a.setMarkerAngle(u,i.NextChainSD1.minFinish+m);a.setMarkerAngle(f,i.NextChainSD1.avgFinish+m);a.setMarkerAngle(c,i.NextChainSD2.minFinish+g);a.setMarkerAngle(h,i.NextChainSD2.avgFinish+g);a.setMarkerAngle(p,i.NextChainSD3.minFinish+y);a.setMarkerAngle(d,i.NextChainSD3.avgFinish+y);var b=function(e,n){if(e){n.show();n.attr("src","img/chain/"+e.alias.toLowerCase()+l.cPNG);n.data(i.cIndexSynonym,e.nexus);if(l.ModeCurrent===l.ModeEnum.Simple){n.attr("title",r.getChainTitleAny(e.nexus));l.qTip.init(n)}if(t.getChainChecklistState(e)!==t.ChecklistEnum.Unchecked){n.css({opacity:a.iconOpacityChecked})}else{n.css({opacity:1})}}else{n.hide()}};b(i.CurrentChainSD,a.IconSD0);b(i.NextChainSD1,a.IconSD1);b(i.NextChainSD2,a.IconSD2);b(i.NextChainSD3,a.IconSD3);b(i.CurrentChainHC,a.IconHC0);b(i.NextChainHC1,a.IconHC1);b(i.NextChainHC2,a.IconHC2);b(i.NextChainHC3,a.IconHC3);$(e).attr("stroke","lime");$(n).attr("stroke","orange");$(s).attr("stroke","red");$(o).attr("stroke","green")};var S=function(e){var t,n,r,i;switch(e){case u.cSECS_MARK_0:{t="0";n="1";r="2";i="3"}break;case u.cSECS_MARK_1:{t="1";n="2";r="3";i="0"}break;case u.cSECS_MARK_2:{t="2";n="3";r="0";i="1"}break;case u.cSECS_MARK_3:{t="3";n="0";r="1";i="2"}break}a.currentFrameOffsetMinutes=e;a.WpChain0=$("#itemClockWaypoint"+t)[0];a.IconSD0=$("#itemClockIconSD"+t);a.WpChain1=$("#itemClockWaypoint"+n)[0];a.IconSD1=$("#itemClockIconSD"+n);a.WpChain2=$("#itemClockWaypoint"+r)[0];a.IconSD2=$("#itemClockIconSD"+r);a.WpChain3=$("#itemClockWaypoint"+i)[0];a.IconSD3=$("#itemClockIconSD"+i);a.IconHC0=$("#itemClockIconHC"+t);a.IconHC1=$("#itemClockIconHC"+n);a.IconHC2=$("#itemClockIconHC"+r);a.IconHC3=$("#itemClockIconHC"+i);E($("#clkMarker"+t),$("#clkMarker"+t+"A"),$("#clkMarker"+t+"B"),$("#clkMarker"+n),$("#clkMarker"+n+"A"),$("#clkMarker"+n+"B"),$("#clkMarker"+r+"A"),$("#clkMarker"+r+"B"),$("#clkMarker"+i+"A"),$("#clkMarker"+i+"B"),u["cSECS_MARK_"+t],u["cSECS_MARK_"+n],u["cSECS_MARK_"+r],u["cSECS_MARK_"+i]);var s=document.getElementById("clkQuadrant");var o=parseInt(t)*a.cDEGREES_IN_QUADRANT;if(o===0&&a.oldQuadrantAngle!==0){o=a.cDEGREES_IN_CIRCLE}$({angle:a.oldQuadrantAngle}).animate({angle:o},{duration:600,step:function(){a.rotateClockElement(s,this.angle)},done:function(){a.rotateClockElement(s,o)}});if(o===a.cDEGREES_IN_CIRCLE){o=0}a.oldQuadrantAngle=o};if(w>=u.cSECS_MARK_0&&w<u.cSECS_MARK_1){S(u.cSECS_MARK_0)}else if(w>=u.cSECS_MARK_1&&w<u.cSECS_MARK_2){S(u.cSECS_MARK_1)}else if(w>=u.cSECS_MARK_2&&w<u.cSECS_MARK_3){S(u.cSECS_MARK_2)}else if(w>=u.cSECS_MARK_3&&w<=u.cSECS_MARK_4){S(u.cSECS_MARK_3)}a.updateWaypointsClipboard();a.updateStoryClipboard();a.initializeClockItems()},initializeClipboard:function(){ZeroClipboard.config({swfPath:"bin/ZeroClipboard.swf"});for(var e=0;e<u.cNUM_TIMEFRAMES_IN_HOUR;e++){a.wpClipboards.push(new ZeroClipboard(document.getElementById("itemClockWaypoint"+e)));a.wpClipboards[e].on("aftercopy",function(e){l.write("Chat link copied to clipboard :)<br />"+e.data["text/plain"],5)})}if(i.StoryChains.length>0){for(var e=0;e<2;e++){a.lsClipboards.push(new ZeroClipboard(document.getElementById("itemClockStar"+e)));a.lsClipboards[e].on("aftercopy",function(e){l.write("Chat link copied to clipboard :)<br />"+e.data["text/plain"],5)})}}},updateWaypointsClipboard:function(){var e=function(e,t,n,i,s){var o="";o+=t.waypoint+" "+r.getChainAlias(t.nexus);if(!n){o+=u.getTimeTillChainFormatted(t)}else{o+=" "+r.getPhrase("and")+" "+n.waypoint+" "+r.getChainAlias(n.nexus)+u.getTimeTillChainFormatted(n)}o+=", "+r.getPhrase("then")+" "+i.waypoint+" "+r.getChainAlias(i.nexus);if(!s){o+=u.getTimeTillChainFormatted(i)}else{o+=" "+r.getPhrase("and")+" "+s.waypoint+" "+r.getChainAlias(s.nexus)+u.getTimeTillChainFormatted(s)}o=o+l.siteTagCurrent;e.setAttribute(a.cZeroClipboardDataAttribute,o)};e(a.WpChain0,i.CurrentChainSD,i.CurrentChainHC,i.NextChainSD1,i.NextChainHC1);e(a.WpChain1,i.NextChainSD1,i.NextChainHC1,i.NextChainSD2,i.NextChainHC2);e(a.WpChain2,i.NextChainSD2,i.NextChainHC2,i.NextChainSD3,i.NextChainHC3);e(a.WpChain3,i.NextChainSD3,i.NextChainHC3,i.NextChainSD4,i.NextChainHC4)},updateStoryClipboard:function(){if(i.StoryChains.length>0){document.getElementById("itemClockStar0").setAttribute(a.cZeroClipboardDataAttribute,u.getCurrentStoryEvents());document.getElementById("itemClockStar1").setAttribute(a.cZeroClipboardDataAttribute,u.getCurrentStoryEvents(1))}}};l={cSiteName:"GW2Timer.com",cSiteURL:"http://gw2timer.com/",cPageURLMap:"mapsrc.html",cPageURLHelp:"helpsrc.html",cPageURLWvW:"wvwsrc.html",cImageHost:"http://i.imgur.com/",cGameName:"Guild Wars 2",cGameNick:"GW2",cPNG:".png",cTextDelimiterChar:"|",cTextDelimiterRegex:/[|]/g,consoleTimeout:{},siteTagDefault:" - gw2timer.com",siteTagCurrent:" - gw2timer.com",cPANEL_WIDTH:360,cPANEL_HEIGHT:580,cPANE_CLOCK_HEIGHT:360,cPANE_CLOCK_HEIGHT_COMPACT:220,cPANE_CLOCK_HEIGHT_BAR:85,cPANE_MENU_HEIGHT:48,cPANE_BEAM_LEFT:-41,cTOOLTIP_MAX_WIDTH:360,cTOOLTIP_DEFAULT_OFFSET_X:-180,cTOOLTIP_DEFAULT_OFFSET_Y:30,cTOOLTIP_ADD_OFFSET_Y:42,cTOOLTIP_ADD_OFFSET_X:36,cTOOLTIP_MOUSEMOVE_RATE:10,isProgramLoaded:false,isProgramEmbedded:false,ModeCurrent:null,ModeEnum:{Website:"Website",Simple:"Simple",Overlay:"Overlay"},cContentPane:"#paneContent",cContentPrefix:"#layer",cMenuPrefix:"#menu",PageCurrent:"",PageEnum:{Chains:"Chains",Map:"Map",WvW:"WvW",Help:"Help",Options:"Options"},SectionEnum:{Map:{Daily:"Daily",Resource:"Resource",JP:"JP",Collectible:"Collectible",TP:"TP",Notepad:"Notepad",Personal:"Personal"},Help:{FAQ:"FAQ",About:"About",Scheduled:"Scheduled",Legacy:"Legacy",Temples:"Temples",Dungeons:"Dungeons"}},ArticleCurrent:null,contentCurrentLayer:"",isContentLoaded_Map:false,isContentLoaded_Help:false,sectionPrefix:"sectionCurrent_",sectionCurrent_Map:"",sectionCurrent_Help:"",cHeaderPrefix:"#header",BrowserUser:"Unknown",BrowserEnum:{IE:0,Opera:1,Firefox:2,Chrome:3},isOnSmallDevice:false,isOnBigDevice:false,cSMALL_DEVICE_WIDTH:800,cSMALL_DEVICE_HEIGHT:600,cBIG_DISPLAY_HEIGHT:1200,initializeFirst:function(){r.stopSpeech();if(window!==window.top){l.isProgramEmbedded=true}f.enforceURLArgumentsFirst();l.enforceProgramMode();u.checkDST();var t=u.getUNIXSeconds();var n=parseInt(localStorage[e.Utilities.lastLocalResetTimestamp.key]);if(localStorage[e.Utilities.lastLocalResetTimestamp.key]===undefined||isFinite(n)===false||n>t){e.Utilities.lastLocalResetTimestamp.value=t;localStorage[e.Utilities.lastLocalResetTimestamp.key]=e.Utilities.lastLocalResetTimestamp.value}else{e.Utilities.lastLocalResetTimestamp.value=n}a.awakeTimestampPrevious=t;if(screen.width<=l.cSMALL_DEVICE_WIDTH&&screen.height<=l.cSMALL_DEVICE_HEIGHT&&l.ModeCurrent===l.ModeEnum.Website){l.isOnSmallDevice=true}if(window.innerHeight>l.cBIG_DISPLAY_HEIGHT){l.isOnBigDevice=true}var i=navigator.userAgent;if(i.indexOf("MSIE")!==-1){l.BrowserUser=l.BrowserEnum.IE}else if(i.indexOf("Chrome")!==-1){l.BrowserUser=l.BrowserEnum.Chrome}else if(i.indexOf("Firefox")!==-1){l.BrowserUser=l.BrowserEnum.Firefox}else if(i.indexOf("Opera")!==-1){l.BrowserUser=l.BrowserEnum.Opera}l.PageCurrent=l.PageEnum.Chains},initializeLast:function(){l.initializeTooltip();l.bindHelpButtons("#layerOptions");l.initializeUIforMenu();l.initializeUIforChains();l.initializeUIForHUD();f.enforceURLArgumentsLast();$("#paneWarning").remove();$("#jsConsoleButtonClose").click(function(){l.clear()});$("#jsConsoleButtonSelect").click(function(){l.selectText("#jsConsole")});f.convertExternalLink(".linkExternal");$(document).mouseup(function(e){var t=$(".jsRemovable");if(!t.is(e.target)&&t.has(e.target).length===0){t.remove()}});$("#mapCompassButton").one("mouseenter",s.bindZoneList).click(function(){$("#jsCenter").trigger("click")});$("#itemLanguage").hover(function(){$("#paneClock").css("z-index",3)},function(){$("#paneClock").css("z-index",0)});e.cleanLocalStorage();e.enforceProgramVersion();r.translateAfter();l.isProgramLoaded=true},write:function(e,t,n){$("#jsConsoleButtons").show();var r=$("#jsConsole");var i=24;if(e===undefined||e===null){e="emptystring"}else{e=e.toString()}if(n===undefined){n=false}if(n===true){r.empty()}if(isFinite(t)===false){t=3+parseInt(e.length/i)}r.append(e+"<br />");window.clearTimeout(l.consoleTimeout);l.consoleTimeout=setTimeout(function(){r.css({opacity:1}).animate({opacity:0},600,function(){$(this).empty().css({opacity:1});$("#jsConsoleButtons").hide()})},t*u.cMILLISECONDS_IN_SECOND)},clear:function(){window.clearTimeout(l.consoleTimeout);$("#jsConsoleButtons").hide();$("#jsConsole").empty()},log:function(e,t,n){if(t===undefined){t=30}l.write(e,t,n)},selectText:function(e){var t=document.querySelector(e);var n=window.getSelection();var r=document.createRange();r.selectNodeContents(t);n.removeAllRanges();n.addRange(r)},scrollToElement:function(e,t,n){var r=n||0;t.animate({scrollTop:e.offset().top-t.offset().top+t.scrollTop()},r)},bulkAnimate:function(e,t){var n;var r;for(n in e){r=e[n];$(r.s).animate(r.p,{duration:t,queue:false})}},generateTableOfContent:function(e){if($(e+" .jsTableOfContents").hasClass("jsTableOfContents")){var t=e.substring(1,e.length);$(e+" .jsTableOfContents").append("<h2>Table of Contents</h2><ol></ol>");$(e+" h1").each(function(){var n=$(this).text();var r=f.stripToAlphanumeric(n);$(this).html(n+"<span class='tocTop'> ↑</span>");$(this).click(function(){l.scrollToElement($("#jsTOC_"+l.PageCurrent),$(l.contentCurrentLayer),"fast")}).attr("id","toc_"+t+"_"+r);$("<li>"+n+"</li>").appendTo($(e+" .jsTableOfContents ol")).click(function(){l.scrollToElement($("#toc_"+t+"_"+r),$(l.contentCurrentLayer),"fast")})})}},generateSectionMenu:function(t){if($(t+" header.jsSection").length<=0){return}var n=t.substring(l.cContentPrefix.length,t.length);var i="menuBeam_"+n;var o=$("<div class='menuBeam' id='"+i+"'></div>").prependTo(t);$(l.cMenuPrefix+n).click(function(){$("#menuBeam_"+l.PageCurrent).css({left:0}).animate({left:l.cPANE_BEAM_LEFT},"fast")});$(t+" header.jsSection").each(function(){var i=$(this);var u=$(this).children("var").first();var a=u.data(e.Options.enu_Language)||i.text();u.text(a);i.next().hide();i.wrapInner("<span></span>");i.append("<sup>[+]</sup>");i.click(function(){var e=f.getSubstringFromHTMLID($(this));$(t+" .menuBeamIcon").removeClass("menuBeamIconActive");if($(this).next().is(":visible")){$(this).children("sup").text("[+]");s.displayIcons(e,false);l[l.sectionPrefix+n]=""}else{$(this).children("sup").text("[-]");$(t+" .menuBeamIcon[data-section='"+e+"']").addClass("menuBeamIconActive");l[l.sectionPrefix+n]=e}f.updateQueryString();if($(this).data("donotanimate")!=="true"){$(this).next().toggle("fast");l.scrollToElement($(this),$(t),"fast")}else{$(this).next().toggle()}$(this).removeData("donotanimate")});$("<div class='jsSectionDone'><img src='img/ui/close.png' />"+a+"</div>").appendTo(i.next()).click(function(){$(this).parent().prev().trigger("click")});var c=f.getSubstringFromHTMLID(i);var h=i.find("img:eq(0)").attr("src");$("<img class='menuBeamIcon' data-section='"+c+"' src='"+h+"' "+"title='&lt;dfn&gt;"+r.getSentence("section")+": &lt;/dfn&gt;"+a+"' />").appendTo(o).click(function(){$(t+" header.jsSection").each(function(){if($(this).next().is(":visible")&&$(this).attr("id")!==i.attr("id")){$(this).data("donotanimate","true");$(this).trigger("click")}});i.trigger("click")})});$("<img class='menuBeamIcon' src='img/ui/exit.png' "+"title='&lt;dfn&gt;Close All Sections&lt;/dfn&gt;' />").appendTo(o).click(function(){$(t+" header.jsSection").each(function(){if($(this).next().is(":visible")){$(this).trigger("click")}});$(t+" .menuBeamIcon").removeClass("menuBeamIconActive")});l.qTip.init(t+" .menuBeamIcon")},bindHelpButtons:function(e){$(e+" .jsHelpCollapsible").each(function(){$(this).text("[?+]").attr("title","<dfn>More Info</dfn>");$(this).next().hide();$(this).click(function(){$(this).next().toggle();if($(this).next().is(":visible")){$(this).text("[?-]")}else{$(this).text("[?+]")}})});$(e+" .jsHelpTooltip").each(function(){var e="<dfn>Info:</dfn> "+$(this).attr("title");$(this).text("[?]").attr("title",e)});l.qTip.init(e+" .jsHelpCollapsible");l.qTip.init(e+" .jsHelpTooltip")},initializeUIforMenu:function(){(function(){var e=200;var t=.5;$("#paneMenu").hover(function(){$(".menuButton").each(function(){if(!$(this).is(":hover")){$(this).animate({opacity:t},e)}})},function(){$(".menuButton").finish().each(function(){$(this).animate({opacity:1},e)})});$(".menuButton").hover(function(){$(this).animate({opacity:1},e)},function(){$(this).animate({opacity:t},e)}).mousedown(function(){$(this).finish().css({opacity:t})}).mouseup(function(){$(this).finish().css({opacity:1})})})();$(".menuButton").each(function(){$(this).click(function(){var t=$(this).attr("id");l.PageCurrent=t.substring(l.cMenuPrefix.length-1,t.length);l.contentCurrentLayer=l.cContentPrefix+l.PageCurrent;switch(l.PageCurrent){case l.PageEnum.Chains:{$("#jsTop").hide();if(e.Options.bol_tourPrediction){$("#chnEvent_"+i.CurrentChainSD.nexus+"_"+i.CurrentChainSD.CurrentPrimaryEvent.num).trigger("click")}}break;case l.PageEnum.Map:{$("#jsTop").show();$("#jsCenter").trigger("click");s.PinEvent.setLatLng(s.convertGCtoLC([0,0]))}break;case l.PageEnum.WvW:{$("#jsTop").hide()}break;case l.PageEnum.Help:{$("#jsTop").show()}break;default:{$("#jsTop").hide()}break}$("#paneContent article").hide();$(l.contentCurrentLayer+" .cntHeader").css({opacity:0}).animate({opacity:1},400);$(l.contentCurrentLayer).animate({width:"show"},200);f.updateQueryString();if(e.Options.bol_showChainPaths){if(l.PageCurrent===l.PageEnum.Map){s.setEntityGroupDisplay(s.ChainPathEntities,"hide");s.setEntityGroupDisplay(s.StoryEventIcons,"hide");s.setEntityGroupDisplay(s.StoryEventRings,"hide")}else{s.setEntityGroupDisplay(s.ChainPathEntities,"show");s.setEntityGroupDisplay(s.StoryEventActive,"show")}}})});$("#menuMap").one("click",l.loadMapLayer);$("#menuHelp").one("click",l.loadHelpLayer);$("#jsTop").click(function(){$(l.contentCurrentLayer).animate({scrollTop:0},"fast")});$("#jsCenter").click(function(){s.Map.setView(s.convertGCtoLC(s.cMAP_CENTER),s.ZoomLevelEnum.Default)})},bindAfterAJAXContent:function(e){l.generateTableOfContent(e);l.generateSectionMenu(e);l.bindHelpButtons(e);s.bindMapLinks(e);f.convertExternalLink(e+" a");l.qTip.init("button")},loadHelpLayer:function(){$("#layerHelp").load(l.cPageURLHelp,function(){l.bindAfterAJAXContent("#layerHelp");$(".jsCopyCode").click(function(){$(this).select()});f.openSectionFromURL();r.translatePageHeader(l.PageEnum.Help);l.isContentLoaded_Help=true})},loadMapLayer:function(){$("#layerMap").load(l.cPageURLMap,function(){l.bindAfterAJAXContent("#layerMap");$("#headerMap_Daily").one("click",o.generateAndInitializeDailies);$("#headerMap_Resource").one("click",o.generateAndInitializeResourceNodes);$("#headerMap_JP").one("click",function(){o.generateAndInitializeJPs();o.generateAndInitializeJPChecklistHTML()});$("#headerMap_Personal").one("click",function(){t.initializeDungeonChecklist();t.initializeCustomChecklist()});$("#headerMap_TP").one("click",function(){n.initializeTrading();n.initializeExchange()});$("#headerMap_Notepad").one("click",function(){t.initializeNotepad()});$("#headerMap_Collectible").one("click",o.generateAndInitializeCollectibles);$("#headerMap_Daily, #headerMap_Resource, #headerMap_JP, #headerMap_Collectible").each(function(){$(this).click(function(){if($(this).children("sup").text()==="[-]"){s.displayIcons(f.getSubstringFromHTMLID($(this)),true)}})});$("<img class='menuBeamIcon menuBeamIconCenter' src='img/ui/star.png' "+"title='&lt;dfn&gt;Map Center&lt;/dfn&gt;' />").appendTo("#menuBeam_Map").click(function(){$("#jsCenter").trigger("click")});l.qTip.init("#layerMap .menuBeamIconCenter, #layerMap label");f.openSectionFromURL();r.translatePageHeader(l.PageEnum.Map);l.isContentLoaded_Map=true})},initializeUIforChains:function(){$("#layerChains header").click(function(){$(this).next().slideToggle("fast",function(){if($(this).is(":visible")){var e=$(l.cContentPrefix+l.PageEnum.Chains);var t=$(this).prev();t.find("ins").html("[-]");l.scrollToElement(t,e,"fast")}else{$(this).prev().find("ins").html("[+]")}})});$("#layerChains header:not(:first)").each(function(){$(this).next().toggle(0);$(this).find("ins").html("[+]")});$("#layerChains header:first").each(function(){$(this).find("ins").html("[-]")});$("#listChainsLegacy").prev().one("click",function(){i.LegacyChains.forEach(i.styleBarIcon)});$("#listChainsTemple").prev().one("click",function(){i.TempleChains.forEach(i.styleBarIcon)});$(".chnTitle h1").click(function(){$(this).parent().next().slideToggle(100)});$("#headerTimetable").one("click",function(){i.initializeTimetableHTML()})},initializeUIForHUD:function(){var e=200;$("#mapOptions").hover(function(){$("#mapOptionsPopup").show().animate({opacity:.8},e)},function(){$("#mapOptionsPopup").animate({opacity:0},e)});$("#mapZones").hover(function(){$("#mapZonesPopup").animate({opacity:.8},e)},function(){$("#mapZonesPopup").animate({opacity:0},e)})},enforceProgramMode:function(){switch(l.ModeCurrent){case l.ModeEnum.Overlay:{$("#paneWarning").remove();$(".itemMapLinks a, .itemMapLinks span, #itemSocial").hide();$("#jsConsole").css({top:"12px",left:"12px","font-size":"12px"});$("#jsConsoleButtons").css({right:"0px",left:"auto",bottom:"0px"})}break;case l.ModeEnum.Simple:{$("#panelLeft, #paneMenu, #paneContent").hide();$("#panelRight").css({background:"radial-gradient(ellipse at center, #333 0%, #222 50%, #111 100%)"});$("#paneClock").css({top:"auto",right:"auto",bottom:"auto",left:"auto",border:"none","box-shadow":"none"});l.readjustSimpleClock();$(window).resize(function(){l.readjustSimpleClock()});$("#paneClockWall, #paneClockBackground").css({opacity:0});$("#itemTimeServer, #itemSocial").hide();$("#itemLanguage").css({position:"fixed",top:"10px",right:"10px",bottom:"auto",left:"auto"});$("#itemClockStar0").css({top:"68px",left:"122px"});$("#itemClockStar1").css({top:"68px",left:"206px"});$("#itemLanguage span").css({opacity:.7});$("#itemLanguagePopup a").each(function(){var e=$(this).attr("href");$(this).attr("href",e+"&mode=Simple")});$("#itemTimeLocal").css({position:"fixed",bottom:"0px",color:"#eee",opacity:.5});l.qTip.init($("<a title='&lt;dfn&gt;Shortcut to this page&lt;/dfn&gt;: gw2timer.com/m' href='./'>"+" <img id='iconSimpleHome' src='img/ui/about.png' /></a>").appendTo("#itemTimeLocalExtra"));$("#paneBoard").show()}break}if(l.isProgramEmbedded){$("#paneWarning").remove();$(".itemMapLinks a, .itemMapLinks span").hide()}},readjustSimpleClock:function(){var e=$(window).height()/2;var t=$(window).width()/2;var n=l.cPANE_CLOCK_HEIGHT/2;$("#paneBoard").css({"margin-top":e-n-72});$("#paneClock").css({"margin-top":e-n,"margin-left":t-n})},initializeTooltip:function(){l.qTip.init("a, ins, span, img, fieldset, label, input, button, .menuButton");$("#panelRight").mousemove($.throttle(l.cTOOLTIP_MOUSEMOVE_RATE,function(e){if($("#qTip").height()+e.pageY+l.cTOOLTIP_ADD_OFFSET_Y>$(window).height()){l.qTip.offsetY=-$("#qTip").height()-l.cTOOLTIP_ADD_OFFSET_Y}else{l.qTip.offsetY=l.cTOOLTIP_DEFAULT_OFFSET_Y}if(l.ModeCurrent===l.ModeEnum.Overlay){if($(window).width()-e.pageX>l.cPANEL_WIDTH/2){l.qTip.offsetX=$(window).width()-e.pageX-l.cPANEL_WIDTH}else{l.qTip.offsetX=l.cTOOLTIP_DEFAULT_OFFSET_X}}else{l.qTip.offsetX=l.cTOOLTIP_DEFAULT_OFFSET_X}}));$("#panelLeft").mousemove($.throttle(l.cTOOLTIP_MOUSEMOVE_RATE,function(e){if(l.cTOOLTIP_MAX_WIDTH+e.pageX+l.cTOOLTIP_ADD_OFFSET_X>$(window).width()){l.qTip.offsetX=-l.cTOOLTIP_MAX_WIDTH-l.cTOOLTIP_ADD_OFFSET_X}else{l.qTip.offsetX=24}if($("#qTip").height()-24+e.pageY>$(window).height()){l.qTip.offsetY=-$("#qTip").height()-l.cTOOLTIP_ADD_OFFSET_Y}else if(e.pageY<42){l.qTip.offsetY=32}else{l.qTip.offsetY=-42}}))},qTip:{name:"qTip",offsetX:-180,offsetY:15,a:null,init:function(e){if(!t)var t="qTip";var n=document.getElementById(t);n||(n=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml","div"):document.createElement("div"),n.setAttribute("id",t),document.getElementsByTagName("body").item(0).appendChild(n));if(document.getElementById){this.a=document.getElementById(this.name);if(this.a){document.onmousemove=function(e){l.qTip.move(e)}}$(e).each(function(){t=$(this)[0];n=t.getAttribute("title");if(t&&n){t.setAttribute("tiptitle",n),t.removeAttribute("title"),t.removeAttribute("alt"),t.onmouseover=function(){l.qTip.show(this.getAttribute("tiptitle"))},t.onmouseout=function(){l.qTip.hide()}}})}},move:function(e){var t=0,n=0;document.all?(t=document.documentElement&&document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft,n=document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,t+=window.event.clientX,n+=window.event.clientY):(t=e.pageX,n=e.pageY);this.a.style.left=t+this.offsetX+"px";this.a.style.top=n+this.offsetY+"px"},show:function(e){this.a&&(this.a.innerHTML=e,this.a.style.display="block")},hide:function(){this.a&&(this.a.innerHTML="",this.a.style.display="none")}}};l.initializeFirst();e.initializeOptions();u.initializeSchedule();s.initializeMap();a.initializeClock();l.initializeLast()})