$(window).on("load",function(){var O,X,E,D,C,M,P,T,K,U,I={};O={lengthOfPrefixes:3,prefixOption:"opt_",legalLocalStorageKeys:new Array,Utilities:{programVersion:{key:"int_utlProgramVersion",value:150207},lastLocalResetTimestamp:{key:"int_utlLastLocalResetTimestamp",value:0}},Options:{enu_Language:"en",bol_hideChecked:!1,bol_expandWB:!0,bol_expandLS:!0,bol_collapseChains:!0,bol_useCountdown:!0,int_setClock:0,int_setDimming:0,int_setPredictor:0,bol_tourPrediction:!0,bol_showChainPaths:!0,bol_showMap:!0,bol_showWorldCompletion:!1,bol_displaySectors:!0,bol_displayWaypoints:!0,bol_displayPOIs:!0,bol_displayVistas:!0,bol_displaySkills:!0,bol_displayHearts:!0,bol_displayEvents:!1,bol_displayCharacter:!0,bol_followCharacter:!1,int_msecGPSRefresh:250,int_setAlarm:0,bol_alertAtStart:!0,bol_alertAtEnd:!0,bol_alertChecked:!1,int_alertSubscribedFirst:1,int_alertSubscribedSecond:15,int_sizeNotepadFont:12,int_sizeNotepadHeight:500,bol_refreshPrices:!0,int_numTradingCalculators:25,int_numTradingResults:30,int_secTradingRefresh:60,int_shiftLogin:0,bol_clearChainChecklistOnReset:!0,bol_clearPersonalChecklistOnReset:!0,bol_use24Hour:!0,bol_detectDST:!0,bol_useSiteTag:!0},OptionRange:{},OptionEnum:{Language:{Default:"en",English:"en",German:"de",Spanish:"es",French:"fr",Czech:"cs",Italian:"it",Polish:"pl",Portuguese:"pt",Russian:"ru",Mandarin:"zh"}},IntEnum:{Predictor:{Auto:0,Min:1,MinAvg:2,Avg:3},Clock:{Compact:0,Full:1,Bar:2,None:3},Alarm:{Off:0,Checklist:1,Subscription:2}},validateEnum:function(e,t){var n,i=O.OptionEnum[O.getVariableSuffix(e)];for(n in i)if(i[n]===t)return t;return O.Options[e]},TypeEnum:{isBoolean:"bol",isInteger:"int",isFloat:"flt",isEnum:"enu",isString:"str"},getVariableSuffix:function(e){return e.split("_")[1]},getVariablePrefix:function(e){return e.split("_")[0]},enforceProgramVersion:function(){var e=O.Utilities.programVersion.value,t=parseInt(localStorage[O.Utilities.programVersion.key]);if(isFinite(t)&&t!==e){var n=20;I.ModeCurrent===I.ModeEnum.Overlay&&(n=10),I.clear(),I.write(I.cSiteName+" was updated since your last visit.<br />This version: "+e+"<br />Your version: "+t+"<br />Would you like to see the <a class='urlUpdates' href='"+U.URL_META.News+"'>changes</a>?<br /><br />GW2Navi Guild Wars 2 overlay updated! <a class='urlUpdates' href='"+U.URL_META.Overlay+"'>Download now</a>.<br />",n),U.convertExternalLink(".urlUpdates")}localStorage[O.Utilities.programVersion.key]=O.Utilities.programVersion.value},initializeLegalLocalStorageKeys:function(){var e;for(e in O.Utilities)O.legalLocalStorageKeys.push(O.Utilities[e].key);for(e in O.Options)O.legalLocalStorageKeys.push(e);for(e in X.Checklists)O.legalLocalStorageKeys.push(X.Checklists[e].key);for(e in X.Textlists)O.legalLocalStorageKeys.push(X.Textlists[e].key)},cleanLocalStorage:function(){var e,t,n,i;for(e=0;e<localStorage.length;e++){n=localStorage.key(e);for(t in O.legalLocalStorageKeys)if(n===O.legalLocalStorageKeys[t]){i=!0;break}i!==!0?localStorage.removeItem(n):i=!1}},convertLocalStorageDataType:function(e){var t=e.toLowerCase();return"true"===t?!0:"false"===t?!1:isFinite(t)?t%0===0?parseInt(t):parseFloat(t):e},intToBool:function(e){return e>0?!0:!1},boolToInt:function(e){return e?1:0},objToBool:function(e){return e?!0:!1},updateLocalResetTimestamp:function(){O.Utilities.lastLocalResetTimestamp.value=T.getUNIXSeconds(),localStorage[O.Utilities.lastLocalResetTimestamp.key]=O.Utilities.lastLocalResetTimestamp.value},checkResetTimestamp:function(){var e=T.getUNIXSeconds()-T.getTimeOffsetSinceMidnight(T.ReferenceEnum.UTC,T.UnitEnum.Seconds);O.Utilities.lastLocalResetTimestamp.value<e&&O.clearServerSensitiveOptions()},getIndexOfSelectedRadioButton:function(e){var t=$("fieldset[name="+e+"] input:radio[name="+e+"]");return t.index(t.filter(":checked"))},initializeOptions:function(){O.initializeLegalLocalStorageKeys();var e,t,n;for(e in O.Options)$("#"+O.prefixOption+e).each(function(){t=$(this).attr("type"),n=O.getVariablePrefix(e),"radio"===t?O.OptionRange[e]=new Array(0,$("fieldset[name="+e+"] input").length-1):("number"===t||"range"===t)&&(O.OptionRange[e]=new Array($(this).prop("min"),$(this).prop("max")))}),I.isProgramEmbedded?void 0!==U.Args[e]&&(O.Options[e]=O.convertLocalStorageDataType(U.sanitizeURLOptionsValue(e,U.Args[e]))):(void 0!==U.Args[e]&&(localStorage[e]=U.sanitizeURLOptionsValue(e,U.Args[e])),void 0===localStorage[e]?localStorage[e]=O.Options[e]:O.Options[e]=O.convertLocalStorageDataType(localStorage[e])),$("#"+O.prefixOption+e).each(function(){t=$(this).attr("type"),n=O.getVariablePrefix(e),"checkbox"===t?$(this).prop("checked",O.Options[e]):"number"===t||"range"===t?$(this).val(O.Options[e]):"radio"===t&&$("input:radio[name="+e+"]:eq("+O.Options[e]+")").prop("checked",!0),"radio"===t?$("fieldset[name="+e+"]").change(function(){var e=$(this).attr("name");O.Options[e]=O.getIndexOfSelectedRadioButton(e),localStorage[e]=O.Options[e]}):$(this).change(function(){var e=$(this).attr("type"),t=$(this).attr("id").slice(O.prefixOption.length);if("checkbox"===e)O.Options[t]=$(this).prop("checked");else if("number"===e||"range"===e){var n=$(this).val(),i=parseInt(n);O.Options[t]=isFinite(n)&&i>=O.OptionRange[t][0]&&i<=O.OptionRange[t][1]?i:O.OptionRange[t][0],$(this).val(O.Options[t])}else O.Options[t]=$(this).val();localStorage[t]=O.Options[t]})});O.bindOptionsInputs(),U.initializeAPIURLs()},clearServerSensitiveOptions:function(){var e=10;I.write("Daily Reset / Timestamp Expired!",e);var t;if(O.Options.bol_clearChainChecklistOnReset){var n;for(t in C.Chains)n=C.Chains[t],$("#chnCheck_"+n.nexus).removeClass("chnChecked"),$("#barChain_"+n.nexus).css({opacity:1}),X.getChecklistItem(X.Checklists.Chain,n.nexus)!==X.ChecklistEnum.Disabled&&$("#barChain_"+n.nexus).show();X.clearChecklist(X.Checklists.Chain,X.ChecklistJob.UncheckTheChecked)}O.Options.bol_clearPersonalChecklistOnReset&&($("#chlDungeonUncheck").trigger("click"),$("#chlCustomUncheck").trigger("click"),X.clearChecklist(X.Checklists.Dungeon,X.ChecklistJob.UncheckTheChecked),X.clearChecklist(X.Checklists.Custom,X.ChecklistJob.UncheckTheChecked)),P.shiftLoginTrack(),I.write("",e),O.updateLocalResetTimestamp()},bindOptionsInputs:function(){var e;for(e in O.Enact)!function(e){var t,n=O.prefixOption+e,i=$("#"+n).attr("type");t="radio"===i?"fieldset[name="+e+"]":"#"+n,$(t).change(function(){O.Enact[e]()})}(e);$("#opt_bol_showWorldCompletion").change(function(){O.Options.bol_showWorldCompletion===!0&&M.isMappingIconsGenerated===!1&&location.reload(),$("#mapOptionsDisplay label input").each(function(){X.setCheckboxEnumState($(this),X.boolToChecklistEnum(O.Options.bol_showWorldCompletion))})}),$("#opt_bol_displayEvents").change(function(){O.Options.bol_displayEvents===!0&&M.isEventIconsGenerated===!1&&location.reload(),M.isEventIconsGenerated&&M.refreshCurrentZone()}),$("#mapOptionsDisplay label input").each(function(){$(this).change(function(){M.isAPIRetrieved_MAPFLOOR&&M.refreshCurrentZone()})}),O.Enact.int_setAlarm(),O.Enact.bol_hideChecked(),O.Enact.bol_detectDST(),O.Enact.bol_useSiteTag(),I.ModeCurrent!==I.ModeEnum.Simple&&(O.Enact.int_setClock(),O.Enact.int_setDimming(),O.Enact.bol_showMap()),$("#optRestoreAllChains").click(function(){var e;for(var t in C.Chains)e=C.Chains[t],$("#chnCheck_"+e.nexus).removeClass("chnChecked"),$("#barChain_"+e.nexus).show().css({opacity:1});for(X.clearChecklist(X.Checklists.Chain),t=0;t<T.cNUM_TIMEFRAMES_IN_HOUR;t++){K.checkoffChainIcon(T.getStandardChain(t).nexus);var n=T.getHardcoreChain(t);n&&K.checkoffChainIcon(n.nexus)}$("#menuChains").trigger("click")}),$("#optClearLocalStorage").click(function(){confirm(I.cSiteName+" Reset: This is will clear all options and everything you have written in this website. Continue?")&&(localStorage.clear(),location.reload())}),$("#optPrintLocalStorage").click(function(){var e,t=new Array;for(e=0;e<localStorage.length;e++){var n=U.escapeHTML(localStorage.key(e));t.push(n)}t.sort();var i="";for(e in t){var a=U.escapeHTML(localStorage.getItem(t[e]));i+=t[e]+": "+a+"<br />"}I.write(i,30,!0)})},Enact:{int_setAlarm:function(){var e="img/ui/placeholder.png";switch(O.Options.int_setAlarm){case O.IntEnum.Alarm.Checklist:e="img/ui/check.png";break;case O.IntEnum.Alarm.Subscription:e="img/ui/subscription.png"}O.Options.int_setAlarm===O.IntEnum.Alarm.Off?$("#optAlarmSpeaker").attr("src","img/ui/mute.png"):$("#optAlarmSpeaker").attr("src","img/ui/speaker.png"),$("#optAlarmIcon").attr("src",e)},bol_hideChecked:function(){$(".barChain").each(function(){X.getChecklistItem(X.Checklists.Chain,U.getSubintegerFromHTMLID($(this)))===X.ChecklistEnum.Checked&&(O.Options.bol_hideChecked?$(this).hide():$(this).show())})},bol_expandWB:function(){for(var e in C.CurrentChains)C.CurrentChains[e].series!==C.ChainSeriesEnum.DryTop&&$("#chnDetails_"+C.CurrentChains[e].nexus).toggle(O.Options.bol_expandWB)},bol_expandLS:function(){for(var e in C.CurrentChains)C.CurrentChains[e].series===C.ChainSeriesEnum.DryTop&&$("#chnDetails_"+C.CurrentChains[e].nexus).toggle(O.Options.bol_expandLS)},bol_use24Hour:function(){C.initializeTimetableHTML(),C.updateChainsTimeHTML()},bol_detectDST:function(){T.checkDST()},int_setClock:function(){K.setClock()},int_setDimming:function(){switch(O.Options.int_setDimming){case 1:$("#paneClockBackground").css({opacity:1});break;case 2:$("#paneClockBackground").css({opacity:0})}},bol_useCountdown:function(){C.updateChainsTimeHTML()},bol_showChainPaths:function(){M.setEntityGroupDisplay(M.ChainPathEntities,O.Options.bol_showChainPaths),M.setEntityGroupDisplay(M.DryTopEventActive,O.Options.bol_showChainPaths)},bol_displayCharacter:function(){O.Options.bol_displayCharacter?M.tickGPS():(M.movePin(M.PinCharacter),M.movePin(M.PinCamera))},bol_showMap:function(){O.Options.bol_showMap?($("#panelLeft").show(),M.refreshMap()):$("#panelLeft").hide()},bol_refreshPrices:function(){O.Options.bol_refreshPrices&&E.isTradingCalculatorsInitialized?E.loopRefresh():E.cancelLoopRefresh()},int_shiftLogin:function(){P.shiftLoginTrack()},bol_useSiteTag:function(){I.siteTagCurrent=O.Options.bol_useSiteTag?I.siteTagDefault:""}}},U={URL_META:{News:"http://forum.renaka.com/topic/5500046/",Overlay:"http://forum.renaka.com/topic/5546166/"},URL_API:{Tiles:"https://tiles.guildwars2.com/1/1/{z}/{x}/{y}.jpg",MapFloor:"https://api.guildwars2.com/v1/map_floor.json?continent_id=1&floor=1",EventNames:"https://api.guildwars2.com/v1/event_names.json",EventDetails:"https://api.guildwars2.com/v1/event_details.json",ItemListing:"https://api.guildwars2.com/v2/commerce/listings/",ItemPrices:"https://api.guildwars2.com/v2/commerce/prices/",ItemDetails:"https://api.guildwars2.com/v1/item_details.json?item_id=",ItemRender:"https://render.guildwars2.com/file/",CoinPrice:"https://api.guildwars2.com/v2/commerce/exchange/gems?quantity=",GemPrice:"https://api.guildwars2.com/v2/commerce/exchange/coins?quantity=",ItemSearch:"http://www.gw2spidy.com/api/v0.9/json/item-search/",ItemData:"http://www.gw2spidy.com/api/v0.9/json/item/"},URL_IMG:{Placeholder:"img/ui/placeholder.png",Waypoint:"img/map/waypoint.png",WaypointOver:"img/map/waypoint_h.png",Landmark:"img/map/landmark.png",LandmarkOver:"img/map/landmark_h.png",Vista:"img/map/vista.png",Skill:"img/map/skill.png",Heart:"img/map/heart.png"},initializeAPIURLs:function(){var e=D.getFullySupportedLanguage();U.URL_API.MapFloor+="&lang="+e,U.URL_API.EventNames+="?lang="+e},Args:{},KeyEnum:{Page:"page",Section:"section",Article:"article",Mode:"mode",Go:"go"},CaseEnum:{None:0,Lower:1,Sentence:2,Title:3,Every:4,All:5},isEnumWithin:function(e,t){for(var n in t)if(t[n].toLowerCase()===e.toLowerCase())return!0;return!1},getURLArguments:function(){var e=window.location.search.substr(1).split("&");if(""===e)return{};for(var t={},n=0;n<e.length;++n){var i=e[n].split("=");2===i.length&&(t[i[0]]=decodeURIComponent(i[1].replace(/\+/g," ")))}return t},enforceURLArgumentsFirst:function(){U.Args=U.getURLArguments(),U.enforceURLArgumentsSpecial();var e,t=U.Args[U.KeyEnum.Mode];if(t)for(e in I.ModeEnum)if(I.ModeEnum[e].toLowerCase()===t.toLowerCase()){I.ModeCurrent=I.ModeEnum[e];break}null===I.ModeCurrent&&(I.ModeCurrent=I.ModeEnum.Website),I.ArticleCurrent=parseInt(U.Args[U.KeyEnum.Article]),isFinite(I.ArticleCurrent)&&(I.ArticleCurrent=I.ArticleCurrent-1)},enforceURLArgumentsLast:function(){U.openPageFromURL()},enforceURLArgumentsSpecial:function(){var e,t,n,i=function(e){$("body").hide(),document.location=e},a=U.Args[U.KeyEnum.Page];if(a&&U.isEnumWithin(a,I.PageEnum)===!1)if(a=a.toLowerCase(),"navi"===a||"overlay"===a)i(U.URL_META.Overlay);else if("m"===a||"simple"===a)U.Args[U.KeyEnum.Mode]=I.ModeEnum.Simple;else if("chests"===a)U.Args[X.Checklists.Collectible1.urlkey]="true";else{for(e in I.SectionEnum){n=I.SectionEnum[e];for(t in n)if(t.toLowerCase()===a)return U.Args[U.KeyEnum.Page]=e,void(U.Args[U.KeyEnum.Section]=t)}for(e in M.Zones)if(-1!==a.indexOf(e))return void(U.Args[U.KeyEnum.Go]=e)}var r=U.Args[X.Checklists.Collectible1.urlkey];r&&(U.Args[U.KeyEnum.Page]=I.PageEnum.Map,U.Args[U.KeyEnum.Section]=I.SectionEnum.Map.Collectible,U.Args[U.KeyEnum.Article]="2",U.Args[U.KeyEnum.Go]="4816,16443,1")},sanitizeURLOptionsValue:function(e,t){var n=e.substring(0,O.lengthOfPrefixes),i=t.toLowerCase();switch(n){case O.TypeEnum.isBoolean:return"true"===i||"false"===i?i:O.Options[e].toString();case O.TypeEnum.isInteger:if(isFinite(i)){var a=parseInt(i);if(a>=O.OptionRange[e][0]&&a<=O.OptionRange[e][1])return a.toString()}return O.Options[e].toString();case O.TypeEnum.isFloat:if(isFinite(i)){var r=parseFloat(i);if(r>=O.OptionRange[e][0]&&r<=O.OptionRange[e][1])return r.toString()}return O.Options[e].toString();case O.TypeEnum.isEnum:return O.validateEnum(e,t);case O.TypeEnum.isString:return U.escapeHTML(t)}return"null"},stripToAlphanumeric:function(e){return e.replace(/\W/g,"")},stripToSentence:function(e){return e.replace(/[^\w\s\'\"\:\,]/gi,"")},stripToCalculation:function(e){return e.replace(/[^0-9.()\-+/*]/gi,"")},toFirstUpperCase:function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},changeCase:function(e,t){var n,i=[];if(void 0===t||t===U.CaseEnum.None)return e;switch((t===U.CaseEnum.Title||t===U.CaseEnum.Every)&&(i=e.split(" ")),t){case U.CaseEnum.Lower:return e.toLowerCase();case U.CaseEnum.Sentence:return U.toFirstUpperCase(e);case U.CaseEnum.Title:if(i.length>1){for(i[0]=U.toFirstUpperCase(i[0]),n=1;n<i.length;n++)2!==i[n].length&&(i[n]=U.toFirstUpperCase(i[n]));return i.join(" ")}return U.toFirstUpperCase(e);case U.CaseEnum.Every:if(i.length>1){for(n in i)i[n]=U.toFirstUpperCase(i[n]);return i.join(" ")}return U.toFirstUpperCase(e);case U.CaseEnum.All:return e.toUpperCase()}},wrapSubstringHTML:function(e,t,n){var i=e.toLowerCase().indexOf(t.toLowerCase()),a=i+t.length,r="";return-1!==i?(void 0===n&&(n="u"),r=e.substring(0,i)+"<"+n+">"+e.substring(i,a)+"</"+n+">"+e.substring(a,e.length)):r=e,r},escapeHTML:function(e){return e.replace(/&/g,"&").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},replaceCharAt:function(e,t,n){return e.substr(0,t)+n+e.substr(t+n.length)},repeatChar:function(e,t){return Array(t+1).join(e)},countOccurrence:function(e,t){return e.split(t).length-1},updateAddressBar:function(e){history.replaceState("",null,e),K.reapplyFilters()},updateQueryString:function(){if(""!==I.PageCurrent){var e=I[I.sectionPrefix+I.PageCurrent],t=U.Args[U.KeyEnum.Article],n=U.Args[U.KeyEnum.Go],i="?"+U.KeyEnum.Page+"="+I.PageCurrent,a="",r="",o="",s="";I.ModeCurrent===I.ModeEnum.Overlay&&(s="&mode=Overlay"),e&&(a="&"+U.KeyEnum.Section+"="+e),t&&(r="&"+U.KeyEnum.Article+"="+t),n&&(o="&"+U.KeyEnum.Go+"="+n),U.updateAddressBar(i+a+r+o+s)}},openSectionFromURL:function(){setTimeout(function(){if(void 0!==U.Args[U.KeyEnum.Section]){var e=U.stripToAlphanumeric(U.Args[U.KeyEnum.Section]),t=$(I.cHeaderPrefix+I.PageCurrent+"_"+U.toFirstUpperCase(e));t.length||(t=$(I.cHeaderPrefix+I.PageCurrent+"_"+e.toUpperCase())),t.trigger("click")}},0)},openPageFromURL:function(){if(void 0!==U.Args[U.KeyEnum.Page]){var e=U.stripToAlphanumeric(U.Args[U.KeyEnum.Page]);$(I.cMenuPrefix+U.toFirstUpperCase(e)).trigger("click")}},convertExternalLink:function(e){$(e).each(function(){$(this).attr("href",I.cSiteURL+"out?"+escape($(this).attr("href"))),$(this).attr("target","_blank")})},openExternalURL:function(e){var t=e;I.ModeCurrent!==I.ModeEnum.Overlay&&(t=I.cSiteURL+"out?"+escape(e)),window.open(t,"_blank")},getSubstringFromHTMLID:function(e){return O.getVariableSuffix(e.attr("id"))},getSubintegerFromHTMLID:function(e){return parseInt(O.getVariableSuffix(e.attr("id")))},getImageHosted:function(e){return I.cImageHost+e+I.cPNG},getWikiLink:function(e){return e=e.replace(/ /g,"_"),"http://wiki.guildwars2.com/wiki/"+escape(e)},getWikiLanguageLink:function(e){return e=e.replace(/ /g,"_"),"http://wiki-"+D.getFullySupportedLanguage()+".guildwars2.com/wiki/"+escape(e)},getWikiSearchLink:function(e){return e=e.replace(/ /g,"+"),"http://wiki.guildwars2.com/index.php?title=Special%3ASearch&search="+escape(e)},getYouTubeLink:function(e){return"http://www.youtube.com/results?search_query="+escape(e)},getTradingSearchLink:function(e){return"https://www.gw2tp.com/search?name="+escape(e)},getTradingItemLink:function(e,t){return"http://www.gw2spidy.com/item/"+escape(e)+"#"+U.stripToSentence(t)},getChatlinkFromPoiID:function(e){for(var t=String.fromCharCode(4),n=0;4>n;n++)t+=String.fromCharCode(e>>8*n&255);return"[&"+btoa(t)+"]"},getChatlinkFromItemID:function(e){return"[&"+btoa(String.fromCharCode(2)+String.fromCharCode(1)+String.fromCharCode(e%256)+String.fromCharCode(Math.floor(e/256))+String.fromCharCode(0)+String.fromCharCode(0))+"]"},getAssetIconURL:function(e){return U.URL_API.ItemRender+e.icon_file_signature+"/"+e.icon_file_id+".png"}},X={Checklists:{Chain:{key:"str_chlChain",value:""},ChainSubscription:{key:"str_chlChainSubscription",value:""},JP:{key:"str_chlJP",value:""},Dungeon:{key:"str_chlDungeon",value:"",money:0},Custom:{key:"str_chlCustom",value:""},Collectible0:{key:"str_chlDiveMaster",urlkey:"divemaster",value:"",cushion:new Array},Collectible1:{key:"str_chlBuriedChest",urlkey:"chests",value:"",cushion:new Array},Collectible2:{key:"str_chlCoinProspect",urlkey:"coinprospect",value:"",cushion:new Array},Collectible3:{key:"str_chlCoinUplands",urlkey:"coinuplands",value:"",cushion:new Array},Collectible4:{key:"str_chlCoinChallenger",urlkey:"coinchallenger",value:"",cushion:new Array},TradingOverwrite:{key:"str_chlTradingOverwrite",value:""},TradingNotify:{key:"str_chlTradingNotify",value:""}},ChecklistEnum:{Unchecked:"0",Checked:"1",Disabled:"2",Unfound:"0",Tracked:"1",Found:"2"},ChecklistJob:{AllUnchecked:0,AllChecked:1,UncheckTheChecked:2},Textlists:{CustomText:{key:"str_txlCustomText",value:new Array,valueDefault:new Array},NotepadText:{key:"str_txlNotepadText",value:new Array,valueDefault:new Array},TradingItem:{key:"str_txlTradingItem",value:new Array},TradingName:{key:"str_txlTradingName",value:new Array},TradingBuy:{key:"str_txlTradingBuy",value:new Array},TradingSell:{key:"str_txlTradingSell",value:new Array},TradingQuantity:{key:"str_txlTradingQuantity",value:new Array},NotifyBuyLow:{key:"str_txlNotifyBuyLow",value:new Array},NotifyBuyHigh:{key:"str_txlNotifyBuyHigh",value:new Array},NotifySellLow:{key:"str_txlNotifySellLow",value:new Array},NotifySellHigh:{key:"str_txlNotifySellHigh",value:new Array},ExchangeUnit:{key:"str_txlExchangeUnit",value:new Array}},boolToChecklistEnum:function(e){return e?X.ChecklistEnum.Checked:X.ChecklistEnum.Unchecked},initializeChecklist:function(e,t,n,i){var a,r,o,s=localStorage[e.key];if(e.length=t,n){X.clearChecklist(e),r=n.split(",");for(a in r)o=parseInt(r[a]),isFinite(o)&&X.setChecklistItem(e,o-1,X.ChecklistEnum.Checked)}else if(void 0===s)X.clearChecklist(e,i);else if(s.length>t)localStorage[e.key]=s.substring(0,t);else if(s.length<t){var c=U.repeatChar(t-s.length,X.ChecklistEnum.Unchecked);localStorage[e.key]=s+c}e.value=localStorage[e.key]},setChecklistItem:function(e,t,n){t=parseInt(t);var i=n.toString();if(1===i.length&&e.value[t]!==i&&t>=0&&t<e.value.length){var a=U.replaceCharAt(e.value,t,i);localStorage[e.key]=a,e.value=a}},trackChecklistItem:function(e,t){t=parseInt(t);var n=e.value.charAt(t);switch(n){case X.ChecklistEnum.Unfound:n=X.ChecklistEnum.Tracked;break;case X.ChecklistEnum.Tracked:n=X.ChecklistEnum.Found;break;case X.ChecklistEnum.Found:n=X.ChecklistEnum.Unfound;break;default:n=X.ChecklistEnum.Unfound}var i=U.replaceCharAt(e.value,t,n);return localStorage[e.key]=i,e.value=i,n},getChecklistItem:function(e,t,n){var i=e.value.charAt(t);return void 0===n?i:n===O.TypeEnum.isInteger?parseInt(i):n===O.TypeEnum.isBoolean?O.intToBool(parseInt(i)):i},isChecked:function(e,t){var n=U.getSubintegerFromHTMLID(t);return X.getChecklistItem(e,n)===X.ChecklistEnum.Checked?!0:!1},getCheckedIndexes:function(e){var t,n="",i=e.value;for(t=0;t<i.length;t++)i[t]===X.ChecklistEnum.Checked&&(n+=t+1+",");return n=n.slice(0,-1)},clearChecklist:function(e,t){var n,i="",a="";switch(t){case X.ChecklistJob.AllChecked:for(n=0;n<e.length;n++)i+=X.ChecklistEnum.Checked;break;case X.ChecklistJob.UncheckTheChecked:for(a=void 0!==localStorage[e.key]?localStorage[e.key]:e.value,n=0;n<a.length;n++)i+=a[n]===X.ChecklistEnum.Checked?X.ChecklistEnum.Unchecked:a[n];break;default:for(n=0;n<e.length;n++)i+=X.ChecklistEnum.Unchecked}e.value=i,localStorage[e.key]=i},countChecklist:function(e,t){return U.countOccurrence(e.value,t)},getCheckboxEnumState:function(e){return e.prop("disabled")===!0?X.ChecklistEnum.Disabled:e.prop("checked")===!0?X.ChecklistEnum.Checked:X.ChecklistEnum.Unchecked},setCheckboxEnumState:function(e,t){switch(t){case X.ChecklistEnum.Disabled:e.prop("disabled",!0),e.prop("checked",!1);break;case X.ChecklistEnum.Checked:e.prop("checked",!0);break;default:e.prop("checked",!1)}e.trigger("change")},triggerCheckbox:function(e,t){var n=X.getCheckboxEnumState(e);t===X.ChecklistEnum.Checked&&n===X.ChecklistEnum.Unchecked||t===X.ChecklistEnum.Unchecked&&n===X.ChecklistEnum.Checked?e.trigger("click"):t===X.ChecklistEnum.Disabled&&n!==X.ChecklistEnum.Disabled&&e.trigger("dblclick")},triggerCheckboxEnumState:function(e,t,n){var i=X.getChecklistItem(e,t);X.triggerCheckbox(n,i)},styleCheckbox:function(e,t,n){var i=X.getChecklistItem(e,t);switch(i){case X.ChecklistEnum.Disabled:n.parent().removeClass("chlCheckboxChecked").addClass("chlCheckboxDisabled");break;case X.ChecklistEnum.Checked:n.parent().removeClass("chlCheckboxDisabled").addClass("chlCheckboxChecked");break;default:n.parent().removeClass("chlCheckboxDisabled").removeClass("chlCheckboxChecked")}},initializeCheckboxlist:function(e,t,n){X.initializeChecklist(e,t.length,null,n),t.each(function(t){$(this).change(function(){var n=X.getCheckboxEnumState($(this));X.setChecklistItem(e,t,n)}),X.triggerCheckboxEnumState(e,t,$(this))})},initializeTextlist:function(e,t,n,i,a){t.each(function(){var t=$(this).val();e.value.push(t),e.valueDefault&&e.valueDefault.push(t)});var r;if(void 0===localStorage[e.key])localStorage[e.key]=e.value.join(I.cTextDelimiterChar);else{var o=localStorage[e.key].split(I.cTextDelimiterChar);for(r=0;r<e.value.length;r++)e.value[r]=o[r]?o[r]:"";localStorage[e.key]=e.value.join(I.cTextDelimiterChar)}var s=function(){t.each(function(t){e.value[t]=$(this).val().replace(I.cTextDelimiterRegex,"")}),localStorage[e.key]=e.value.join(I.cTextDelimiterChar)};t.each(function(t){$(this).attr("maxlength",i),$(this).val(e.value[t]),$(this).change(function(){n&&I.write(n+" #"+(t+1)+" updated."),s()})}),a&&a.click(function(){t.each(function(t){$(this).val(e.valueDefault[t]).trigger("change")})})},initializeChainChecklist:function(){var e,t;X.initializeChecklist(X.Checklists.Chain,C.Chains.length),X.initializeChecklist(X.Checklists.ChainSubscription,C.Chains.length);for(e in C.Chains){t=C.Chains[e];var n=$("#barChain_"+t.nexus),i=$("#chnCheck_"+t.nexus),a=$("#chnTime_"+t.nexus);switch(X.getChecklistItem(X.Checklists.Chain,t.nexus)){case X.ChecklistEnum.Unchecked:break;case X.ChecklistEnum.Checked:n.css({opacity:K.iconOpacityChecked}),i.addClass("chnChecked"),O.Options.bol_hideChecked&&n.hide();break;case X.ChecklistEnum.Disabled:n.hide()}X.getChecklistItem(X.Checklists.ChainSubscription,t.nexus)===X.ChecklistEnum.Checked&&a.addClass("chnTimeSubscribed"),a.click(function(){var e=U.getSubintegerFromHTMLID($(this));X.getChecklistItem(X.Checklists.ChainSubscription,e)===X.ChecklistEnum.Checked?($(this).removeClass("chnTimeSubscribed"),X.setChecklistItem(X.Checklists.ChainSubscription,e,X.ChecklistEnum.Unchecked)):($(this).addClass("chnTimeSubscribed"),X.setChecklistItem(X.Checklists.ChainSubscription,e,X.ChecklistEnum.Checked))}),i.click(function(){var e=U.getSubintegerFromHTMLID($(this)),t=$("#barChain_"+e);switch(X.getChecklistItem(X.Checklists.Chain,e)){case X.ChecklistEnum.Unchecked:t.css({opacity:1}).animate({opacity:K.iconOpacityChecked},K.iconOpacitySpeed),$("#chnDetails_"+e).hide("fast"),$(this).addClass("chnChecked"),X.setChecklistItem(X.Checklists.Chain,e,X.ChecklistEnum.Checked);break;case X.ChecklistEnum.Checked:t.css({opacity:1}).show("fast"),t.css({opacity:K.iconOpacityChecked}).animate({opacity:1},K.iconOpacitySpeed),$("#chnDetails_"+e).show("fast"),$(this).removeClass("chnChecked"),X.setChecklistItem(X.Checklists.Chain,e,X.ChecklistEnum.Unchecked);break;case X.ChecklistEnum.Disabled:t.css({opacity:1}).show("fast"),$("#chnDetails_"+e).show("fast"),$(this).removeClass("chnChecked"),X.setChecklistItem(X.Checklists.Chain,e,X.ChecklistEnum.Unchecked)}X.getChecklistItem(X.Checklists.Chain,e)===X.ChecklistEnum.Checked&&(O.Options.bol_hideChecked?t.hide("fast"):t.show("fast")),K.checkoffChainIcon(e)}),$("#chnDelete_"+t.nexus).click(function(){var e=U.getSubintegerFromHTMLID($(this)),t=$("#barChain_"+e);t.hide("slow"),X.setChecklistItem(X.Checklists.Chain,e,X.ChecklistEnum.Disabled),K.checkoffChainIcon(e)})}},getChainChecklistState:function(e){return X.getChecklistItem(X.Checklists.Chain,e.nexus)},initializeDungeonChecklist:function(){X.initializeChecklist(X.Checklists.Dungeon,$("#chlDungeon input").length),$("#chlDungeon .chlDungeonBar").each(function(){$(this).prepend("<img src='img/dungeon/"+$(this).data("name").toLowerCase()+I.cPNG+"' />")});var e=function(){var e=X.Checklists.Dungeon.money,t=~~(e/E.Exchange.COPPER_IN_GOLD),n=~~(e/E.Exchange.SILVER_IN_GOLD)%E.Exchange.COPPER_IN_SILVER,i=e%E.Exchange.COPPER_IN_SILVER;$("#chlDungeonCalculator_Gold").text(t),$("#chlDungeonCalculator_Silver").text(n),$("#chlDungeonCalculator_Copper").text(i)};$("#chlDungeon input").each(function(t){$(this).change(function(){var n=X.getCheckboxEnumState($(this));X.setChecklistItem(X.Checklists.Dungeon,t,n),X.styleCheckbox(X.Checklists.Dungeon,t,$(this));var i=$("#chlDungeonCalculator"),a=X.Checklists.Dungeon.money,r=$(this).data("money");switch($(this).data("mode")){case"E":r+=i.data("moneyaddexp")}switch(n){case X.ChecklistEnum.Disabled:X.Checklists.Dungeon.money=a-r;break;case X.ChecklistEnum.Checked:X.Checklists.Dungeon.money=a+r;break;default:X.Checklists.Dungeon.money=a-r}e()})}),$("#chlDungeon label").each(function(e){$(this).dblclick(function(){var t=$(this).find("input:first-child");t.prop("disabled")===!1?(t.prop("checked")===!0&&X.triggerCheckbox(t,X.ChecklistEnum.Unchecked),t.prop("disabled",!0).prop("checked",!1)):t.prop("disabled",!1),X.setChecklistItem(X.Checklists.Dungeon,e,X.getCheckboxEnumState(t)),X.styleCheckbox(X.Checklists.Dungeon,e,t)})}),$("#chlDungeon input").each(function(e){X.triggerCheckboxEnumState(X.Checklists.Dungeon,e,$(this))}),$("#chlDungeonUncheck").click(function(){X.clearChecklist(X.Checklists.Dungeon,X.ChecklistJob.UncheckTheChecked),$("#chlDungeon input").each(function(e){$(this).prop("checked")===!0&&$(this).trigger("click"),X.styleCheckbox(X.Checklists.Dungeon,e,$(this))})})},initializeCustomChecklist:function(){var e=$("#chlCustom input:checkbox");X.initializeChecklist(X.Checklists.Custom,e.length),e.each(function(e){$(this).change(function(){var t=X.getCheckboxEnumState($(this));X.setChecklistItem(X.Checklists.Custom,e,t),X.styleCheckbox(X.Checklists.Custom,e,$(this)),t===X.ChecklistEnum.Checked?$(this).parent().next().addClass("chlCustomTextChecked"):$(this).parent().next().removeClass("chlCustomTextChecked")}),X.triggerCheckboxEnumState(X.Checklists.Custom,e,$(this))}),$("#chlCustomUncheck").click(function(){X.clearChecklist(X.Checklists.Custom,X.ChecklistJob.UncheckTheChecked),$("#chlCustom input:checkbox").each(function(e){$(this).prop("checked")===!0&&$(this).trigger("click"),X.styleCheckbox(X.Checklists.Custom,e,$(this))})});var t=$("#chlCustom input:text"),n=$("#chlCustomRestore");X.initializeTextlist(X.Textlists.CustomText,t,"Custom checklist item",48,n)},initializeNotepad:function(){$("#chlNotepadButtons button").each(function(e){$(this).click(function(){$("#chlNotepadSheets textarea").hide().eq(e).show().css({opacity:.5}).animate({opacity:1},400),$("#chlNotepadButtons button").removeClass("btnFocused"),$(this).addClass("btnFocused")})}).first().click();var e=$("#chlNotepadSheets textarea"),t=$("#chlNotepadRestore");X.initializeTextlist(X.Textlists.NotepadText,e,"Notepad sheet",4096,t),e.css("height",O.Options.int_sizeNotepadHeight),e.css("font-size",O.Options.int_sizeNotepadFont),e.first().show()}},E={Exchange:{COPPER_IN_SILVER:100,COPPER_IN_GOLD:1e4,SILVER_IN_GOLD:100,CENTS_IN_DOLLAR:100,GEM_PER_DOLLAR:.8,DOLLAR_PER_GEM:1.25,GEM_SAMPLE:100,COIN_SAMPLE:1e6},Rarity:{Junk:0,Basic:1,Fine:2,Masterwork:3,Rare:4,Exotic:5,Ascended:6,Legendary:7},cNUM_ITEM_RARITIES:8,cREFRESH_LIMIT:5e3,cSEARCH_LIMIT:750,cEXCHANGE_LIMIT:250,isTradingCalculatorsInitialized:!1,RefreshTimeout:{},ProgressTimeout:{},ProgressWait:0,ProgressTick:0,CalculatorHistoryArray:new Array(64),CalcHistoryIndex:0,copper:function(e){return"<copper>"+e+"</copper>"},silver:function(e){return"<silver>"+e+"</silver>"},gold:function(e){return"<gold>"+e+"</gold>"},parseCoinString:function(e){if(void 0===e||null===e)return 0;var t=e.split("."),n=t.length,i=0,a=0,r=0;return 0===n?0:(1===n&&(a=parseInt(t[0])),n>=2&&(i=parseInt(t[n-1]),a=parseInt(t[n-2])),2===n&&1===t[n-1].length&&(i*=T.cBASE_10),n>=3&&(r=parseInt(t[n-3])),isFinite(i)||(i=0),isFinite(a)||(a=0),isFinite(r)||(r=0),parseInt(i+a*E.Exchange.COPPER_IN_SILVER+r*E.Exchange.COPPER_IN_GOLD))},parseGemString:function(e){return void 0===e||null===e?0:isFinite(parseInt(e))?parseInt(e):0},parseQuantityString:function(e){var t=parseInt(e);return isFinite(t)||(t=1),t},createCoinString:function(e){if(void 0===e||isFinite(e)===!1)return"0.00";e=parseInt(e);var t=Math.abs(~~(e/E.Exchange.COPPER_IN_GOLD)),n=Math.abs(~~(e/E.Exchange.SILVER_IN_GOLD)%E.Exchange.COPPER_IN_SILVER),i=Math.abs(e%E.Exchange.COPPER_IN_SILVER),a=0>e?"−":"";return t>0&&n<T.cBASE_10&&(n="0"+n),i<T.cBASE_10&&(i="0"+i),t>0?a+t+"."+n+"."+i:n>0?a+n+"."+i:a+"0."+i},parseMoneyString:function(e){if(void 0===e||null===e)return 0;var t=e.split("."),n=t.length,i=0,a=0;return 0===n?0:(1===n&&(a=parseInt(t[0])),n>=2&&(i=parseInt(t[n-1]),a=parseInt(t[n-2])),n>=2&&1===t[n-1].length?i*=T.cBASE_10:n>=2&&t[n-1].length>=2&&(i=parseInt(i.toString().substring(0,2))),isFinite(i)||(i=0),isFinite(a)||(a=0),parseInt(i+a*E.Exchange.CENTS_IN_DOLLAR))},createMoneyString:function(e){if(void 0===e||isFinite(e)===!1)return"0.00";e=parseInt(e);var t=Math.abs(~~(e/E.Exchange.CENTS_IN_DOLLAR)),n=Math.abs(e%E.Exchange.CENTS_IN_DOLLAR),i=0>e?"−":"";return n<T.cBASE_10&&(n="0"+n),i+t+"."+n},createPercentString:function(e,t){if(void 0===e||isFinite(e)===!1)return"0%";void 0===t&&(t=0);var n=0>e?"−":"";return n+Math.abs(100*e).toFixed(t)+"%"},setRarityClass:function(e,t){e.each(function(){for(var e=0;e<E.cNUM_ITEM_RARITIES;e++)$(this).removeClass("rarity"+e.toString())}),void 0!==E.Rarity[t]&&e.addClass("rarity"+E.Rarity[t].toString())},animateValue:function(e,t,n){t>n?e.css({color:"#ff2200"}).animate({color:"#ffeebb"},5e3):n>t?e.css({color:"#44dd44"}).animate({color:"#ffeebb"},5e3):e.css({"border-radius":32}).animate({"border-radius":4},1e3)},calculateTrading:function(e){var t=.05,n=.1,i=t+n,a=1-i,r=E.parseCoinString(e.find(".trdBuy").val()),o=E.parseCoinString(e.find(".trdSell").val()),s=E.parseQuantityString(e.find(".trdQuantity").val()),c=e.find(".trdCost"),l=e.find(".trdTax"),u=e.find(".trdRevenue"),h=e.find(".trdProfit"),p=e.find(".trdBreak"),d=e.find(".trdMargin"),C=(o-o*i-r)*s,m=(o-o*n)*s,g=r*s,f=o*t*s,T=o*n*s;
c.val("−"+E.createCoinString(Math.round(g))),l.val("−"+E.createCoinString(Math.round(f))+" + −"+E.createCoinString(Math.round(T))),p.val(E.createCoinString(Math.round(r/a))),u.val(E.createCoinString(Math.round(m))),h.val(E.createCoinString(Math.round(C))),d.val(E.createPercentString(m/(g+f)-1,2)),$([h,d]).each(function(){var e=Math.round(C);$(this).removeClass("trdZero trdGain trdLoss"),0===e?$(this).addClass("trdZero"):e>0?$(this).addClass("trdGain"):0>e&&$(this).addClass("trdLoss")})},updateTradingDetails:function(e){var t=e.find(".trdName").val(),n=e.find(".trdItem").val();isFinite(parseInt(n))!==!1&&0!==t.length&&$.getJSON(U.URL_API.ItemDetails+n,function(t){E.setRarityClass(e.find(".trdName"),t.rarity),e.find(".trdIcon").attr("src",U.getAssetIconURL(t)),e.find(".trdLink").val(U.getChatlinkFromItemID(n))})},updateTradingPrices:function(e){var t=encodeURIComponent(e.find(".trdName").val()),n=e.find(".trdItem").val();if(isFinite(parseInt(n))!==!1&&0!==t.length){var i=0,a=0,r=0,o=0,s=e.find(".trdName"),c=e.find(".trdCurrentBuy"),l=e.find(".trdCurrentSell"),u=e.find(".trdNotifyBuyLow"),h=e.find(".trdNotifyBuyHigh"),p=e.find(".trdNotifySellLow"),d=e.find(".trdNotifySellHigh"),C=E.parseCoinString(u.val()),m=E.parseCoinString(h.val()),g=E.parseCoinString(p.val()),f=E.parseCoinString(d.val());$.getJSON(U.URL_API.ItemPrices+n,function(t){i=E.parseCoinString(e.find(".trdCurrentBuy").first().val()),a=E.parseCoinString(e.find(".trdCurrentSell").first().val()),void 0!==t.buys&&(r=parseInt(t.buys.unit_price)),void 0!==t.sells&&(o=parseInt(t.sells.unit_price)),c.val(E.createCoinString(r)),l.val(E.createCoinString(o)),X.getChecklistItem(X.Checklists.TradingOverwrite,U.getSubintegerFromHTMLID(e))===X.ChecklistEnum.Checked&&(e.find(".trdBuy").val(c.val()).trigger("input"),e.find(".trdSell").val(l.val()).trigger("input"))}).done(function(){E.animateValue(c,i,r),E.animateValue(l,a,o),X.isChecked(X.Checklists.TradingNotify,e)&&(s.removeClass("trdMatched"),C>=r&&0!==C&&0!==r?(s.addClass("trdMatched"),u.addClass("trdMatched"),D.speak(D.getString("buy low")+" "+t)):u.removeClass("trdMatched"),r>=m&&0!==m&&0!==r?(s.addClass("trdMatched"),h.addClass("trdMatched"),D.speak(D.getString("buy high")+" "+t)):h.removeClass("trdMatched"),g>=o&&0!==g&&0!==o?(s.addClass("trdMatched"),p.addClass("trdMatched"),D.speak(D.getString("sell low")+" "+t)):p.removeClass("trdMatched"),o>=f&&0!==f&&0!==o?(s.addClass("trdMatched"),d.addClass("trdMatched"),D.speak(D.getString("sell high")+" "+t)):d.removeClass("trdMatched"))}).fail(function(){I.write("Error retrieving API data for "+U.escapeHTML(e.find(".trdName").val()))})}},updateAllTradingDetails:function(){$("#trdList .trdEntry").each(function(){E.updateTradingDetails($(this))})},updateAllTradingPrices:function(){$("#trdList .trdEntry").each(function(){E.updateTradingPrices($(this))})},clearCalculator:function(e){E.setRarityClass(e.find(".trdName")),e.find(".trdIcon").attr("src",U.URL_IMG.Placeholder),e.find(".trdItem").val("").trigger("change"),e.find(".trdCurrentBuy").val(""),e.find(".trdCurrentSell").val(""),e.find(".trdLink").val(""),e.find(".trdResultsContainer").remove(),e.find(".trdName").removeClass("trdMatched"),e.find(".trdNotifyBuyLow").val("").trigger("change").removeClass("trdMatched"),e.find(".trdNotifyBuyHigh").val("").trigger("change").removeClass("trdMatched"),e.find(".trdNotifySellLow").val("").trigger("change").removeClass("trdMatched"),e.find(".trdNotifySellHigh").val("").trigger("change").removeClass("trdMatched")},initializeTrading:function(){var e,t,n,i,a,r="";for(e=0;e<O.Options.int_numTradingCalculators;e++)r="#trdEntry_"+e,$("#trdList").append("<div id='trdEntry_"+e+"' class='trdEntry'><div class='trdAccordion trdAccordionShut'><samp><img class='trdIcon' src='"+U.URL_IMG.Placeholder+"' /></samp><input class='trdItem' type='text' /><div class='trdResultsFocus'><input class='trdName' type='text' /></div><div class='trdButtons'><button class='trdSearch' tabindex='-1'>S</button><button class='trdWiki' tabindex='-1'>W</button><br /></div><div class='trdExpand'><samp>$~O</samp><input class='trdBuy' type='text' /><samp>−$~</samp><input class='trdCost trdOutput' type='text' tabindex='-1' /><br /><samp>O~$</samp><input class='trdSell' type='text' /><samp>$=$</samp><input class='trdBreak trdOutput' type='text' tabindex='-1' /><br /><samp>×</samp><input class='trdQuantity' type='text' /><samp>−$%</samp><input class='trdTax trdOutput' type='text' tabindex='-1' /><br /><samp>+$</samp><input class='trdProfit trdOutput' type='text' tabindex='-1' /><samp>=$</samp><input class='trdRevenue trdOutput' type='text' tabindex='-1' /><br /><samp>+$%</samp><input class='trdMargin trdOutput' type='text' tabindex='-1' /><samp>[]</samp><input class='trdLink trdOutput' type='text' tabindex='-1' /><br /><samp>$~!</samp><input class='trdNotifyBuyHigh' type='text' /><input class='trdCurrentBuy trdOutput' type='text' tabindex='-1' /><input class='trdNotifyBuyLow' type='text' /><label title='<dfn>"+D.getSentence("overwrite")+"</dfn>: Replace your buy and sell prices with the current prices when refreshing.'><input class='trdOverwrite' type='checkbox' tabindex='-1' />&zwnj;</label><samp>!~$</samp><input class='trdNotifySellHigh' type='text' /><input class='trdCurrentSell trdOutput' type='text' tabindex='-1' /><input class='trdNotifySellLow' type='text' /><label title='<dfn>"+D.getSentence("notify")+"</dfn>: Turn on sound notification for this item.'><input class='trdNotify' type='checkbox' tabindex='-1' />&zwnj;</label><br /><br /></div></div><div class='trdPreview'><input class='trdCurrentBuy trdOutput' type='text' tabindex='-1' /><input class='trdCurrentSell trdOutput' type='text' tabindex='-1' /></div></div>"),I.qTip.init($(r+" .trdOverwrite").parent()),I.qTip.init($(r+" .trdNotify").parent()),t=$(r+" .trdName"),n=$(r+" .trdBuy"),i=$(r+" .trdSell"),a=$(r+" .trdQuantity"),$(r+" input").click(function(){$(this).select()}),$(r+" .trdWiki").click(function(){var e=$(this).parents(".trdEntry").find(".trdName").val();U.openExternalURL(U.getWikiLink(e))}),$(r+" .trdSearch").click(function(){var e=$(this).parents(".trdEntry").find(".trdItem").val(),t=$(this).parents(".trdEntry").find(".trdName").val();U.openExternalURL(0===e.length?U.getTradingSearchLink(t):U.getTradingItemLink(e,t))}),$([n,i,a]).each(function(){$(this).on("input",function(){E.calculateTrading($(this).parent())})}),$(r+" .trdCurrentBuy, "+r+" .trdCurrentSell").each(function(){$(this).dblclick(function(){var e=E.parseCoinString($(this).val());0!==e&&($(this).prev().val(E.createCoinString(e+1)).trigger("change"),$(this).next().val(E.createCoinString(e-1)).trigger("change"),E.updateTradingPrices($(this).parents(".trdEntry")))})}),$(t).on("input",$.throttle(E.cSEARCH_LIMIT,function(){var e,t,n=$(this).val(),i=$(this).parents(".trdEntry");return n.length<3?void E.clearCalculator(i):void $.getJSON(U.URL_API.ItemSearch+n,function(a){i.find(".trdResultsContainer").remove();var r,o,s;if(a.results.length>0)for(e=$("<div class='trdResultsContainer jsRemovable'></div>").insertAfter(i.find(".trdName")),t=$("<div class='trdResults cntPopup'></div>").appendTo(e),r=0;r<a.results.length&&r<O.Options.int_numTradingResults;r++)o=a.results[r],s=$("<ins class='rarity"+o.rarity+"' data-id='"+o.data_id+"' data-buy='"+E.createCoinString(o.max_offer_unit_price)+"' data-sell='"+E.createCoinString(o.min_sale_unit_price)+"'><img src='"+o.img+"'>"+U.wrapSubstringHTML(o.name,n,"u")+"</ins>").appendTo(t),s.click(function(){var e=$(this).parents(".trdResultsContainer"),t=e.parents(".trdEntry");t.find(".trdItem").val($(this).data("id")).trigger("change"),t.find(".trdName").val($(this).text()).trigger("change"),E.updateTradingDetails(t),E.updateTradingPrices(t),e.remove()})})})).onEnterKey(function(){U.openExternalURL(U.getTradingSearchLink($(this).val()))}).onEscapeKey(function(){$(this).parents(".trdEntry").find(".trdResultsContainer").remove()}).click(function(){$(this).trigger("input")});r="#trdEntry_0",$(r+" .trdIcon").attr("src","img/ui/faq.png"),$(r+" .trdName").val("Bifrost"),$(r+" .trdBuy").val("4500.37.68"),$(r+" .trdSell").val("550037.68"),$(r+" .trdQuantity").val("1"),$(r).css("margin-bottom","6px");var o=function(e,t,n){n=void 0===n?"":": "+n,$(r+" .trd"+e).attr("title","<dfn>"+D.getString(t)+"</dfn>"+n)};o("Name","name"),o("Buy","your buy"),o("Sell","your sell"),o("Quantity","quantity"),o("Cost","cost","Money needed to buy the items."),o("Break","breakpoint","Sell higher than this to make a profit."),o("Tax","tax","Pay 5% fee of sell price to list, and deduct 10% tax of sell price when sold."),o("Profit","profit","Gains after losses from buying and tax."),o("Margin","margin","Revenue over cost and fee."),o("Revenue","revenue","What you will receive at the trader."),o("Link","chatlink","Paste this in game chat to see the item."),o("NotifyBuyLow","notify if current buy < this buy"),o("NotifyBuyHigh","notify if this buy < current buy"),o("NotifySellLow","notify if current sell < this sell"),o("NotifySellHigh","notify if this sell < current sell"),o("CurrentBuy","current buy","Double click to flank price."),o("CurrentSell","current sell","Double click to flank price."),I.qTip.init($(r+" input")),X.initializeTextlist(X.Textlists.TradingItem,$("#trdList .trdItem"),null,16),X.initializeTextlist(X.Textlists.TradingName,$("#trdList .trdName"),null,64),X.initializeTextlist(X.Textlists.TradingBuy,$("#trdList .trdBuy"),null,16),X.initializeTextlist(X.Textlists.TradingSell,$("#trdList .trdSell"),null,16),X.initializeTextlist(X.Textlists.TradingQuantity,$("#trdList .trdQuantity"),null,16),X.initializeTextlist(X.Textlists.NotifyBuyLow,$("#trdList .trdNotifyBuyLow"),null,16),X.initializeTextlist(X.Textlists.NotifyBuyHigh,$("#trdList .trdNotifyBuyHigh"),null,16),X.initializeTextlist(X.Textlists.NotifySellLow,$("#trdList .trdNotifySellLow"),null,16),X.initializeTextlist(X.Textlists.NotifySellHigh,$("#trdList .trdNotifySellHigh"),null,16),X.initializeCheckboxlist(X.Checklists.TradingOverwrite,$("#trdList .trdOverwrite"),X.ChecklistJob.AllChecked),X.initializeCheckboxlist(X.Checklists.TradingNotify,$("#trdList .trdNotify"),X.ChecklistJob.AllChecked),$("#trdList .trdSell").trigger("input"),E.updateAllTradingDetails(),$("#trdToggle").click(function(){$("#trdEntry_0 .trdBuy").is(":visible")?($(".trdAccordion").addClass("trdAccordionShut").removeClass("trdAccordionOpen"),$(".trdPreview").removeClass("cssHidden")):($(".trdAccordion").removeClass("trdAccordionShut").addClass("trdAccordionOpen"),$(".trdPreview").addClass("cssHidden"))}),$("#trdRefresh").click($.throttle(E.cREFRESH_LIMIT,function(){E.loopRefresh(!0)})),$("#trdMute").click(function(){D.resetSpeechQueue()})},updateCoinTo:function(e){var t=0,n=0,i=0,a=0,r=0,o=0,s=0,c=0,l=$("#trdExchange .trdCoinTo"),u=$("#trdExchange .trdCoinToGem"),h=$("#trdExchange .trdCoinToMoney"),p=$("#trdExchange .trdCoinToGemInverse"),d=$("#trdExchange .trdCoinToMoneyInverse"),C=0,m=E.parseCoinString(l.val());0===m?(u.val(""),h.val(""),p.val(""),d.val("")):($.getJSON(U.URL_API.GemPrice+m,function(e){void 0!==e.quantity&&(t=parseInt(u.val()),i=E.parseMoneyString(h.val()),n=parseInt(e.quantity),a=Math.round(n*E.Exchange.DOLLAR_PER_GEM),u.val(n),h.val(E.createMoneyString(a)))}).always(function(){(void 0===e||e)&&(E.animateValue(u,t,n),E.animateValue(h,i,a)),0===n&&(u.val("0"),h.val("0"))}),$.getJSON(U.URL_API.CoinPrice+E.Exchange.GEM_SAMPLE,function(e){void 0!==e.quantity&&(C=E.Exchange.GEM_SAMPLE/e.quantity)}).always(function(){0!==C&&(r=parseInt(p.val()),s=E.parseMoneyString(d.val()),o=Math.round(m*C),c=Math.round(o*E.Exchange.DOLLAR_PER_GEM),p.val(o),d.val(E.createMoneyString(c)),(void 0===e||e)&&(E.animateValue(p,r,o),E.animateValue(d,s,c)))}))},updateGemTo:function(e){var t=0,n=0,i=0,a=0,r=0,o=0,s=$("#trdExchange .trdGemTo"),c=$("#trdExchange .trdGemToCoin"),l=$("#trdExchange .trdGemToMoney"),u=$("#trdExchange .trdGemToCoinInverse"),h=0,p=s.val();0===p?(c.val(""),l.val("")):($.getJSON(U.URL_API.CoinPrice+p,function(e){void 0!==e.quantity&&(t=E.parseCoinString(c.val()),i=E.parseMoneyString(l.val()),n=parseInt(e.quantity),a=parseInt(p*E.Exchange.DOLLAR_PER_GEM),c.val(E.createCoinString(n)),l.val(E.createMoneyString(a)))}).always(function(){(void 0===e||e)&&(E.animateValue(c,t,n),E.animateValue(l,i,a)),0===n&&(c.val("0"),l.val("0"))}),$.getJSON(U.URL_API.GemPrice+E.Exchange.COIN_SAMPLE,function(e){void 0!==e.quantity&&(h=E.Exchange.COIN_SAMPLE/e.quantity)}).always(function(){0!==h&&(r=E.parseCoinString(u.val()),o=Math.round(p*h),u.val(E.createCoinString(o)),(void 0===e||e)&&E.animateValue(u,r,o))}))},updateMoneyTo:function(e){var t=0,n=0,i=0,a=0,r=$("#trdExchange .trdMoneyTo"),o=$("#trdExchange .trdMoneyToGem"),s=$("#trdExchange .trdMoneyToCoin"),c=E.parseMoneyString(r.val()),l=c*E.Exchange.GEM_PER_DOLLAR;0===c?(o.val(""),s.val("")):$.getJSON(U.URL_API.CoinPrice+l,function(e){void 0!==e.quantity&&(t=parseInt(o.val()),i=E.parseCoinString(s.val()),n=l,a=parseInt(e.quantity),o.val(l),s.val(E.createCoinString(a)))}).always(function(){(void 0===e||e)&&(E.animateValue(o,t,n),E.animateValue(s,i,a)),0===a&&(o.val("0"),s.val("0"))})},updateNotifyCoinTo:function(e){var t=0,n=0,i=$("#trdExchange .trdNotifyCoinTo"),a=$("#trdExchange .trdNotifyCoinToGem"),r=$("#trdExchange .trdNotifyCoinToGemHigh"),o=E.parseGemString(r.val()),s=E.parseCoinString(i.val());0===s?a.val(""):$.getJSON(U.URL_API.GemPrice+s,function(e){void 0!==e.quantity&&(t=parseInt(a.val()),n=parseInt(e.quantity),a.val(n))}).always(function(){(void 0===e||e)&&E.animateValue(a,t,n),0===n?a.val("0"):n>=o&&0!==o?(r.addClass("trdMatched"),D.speak(D.getString("buy gem high"))):r.removeClass("trdMatched")})},updateNotifyGemTo:function(e){var t=0,n=0,i=$("#trdExchange .trdNotifyGemTo"),a=$("#trdExchange .trdNotifyGemToCoin"),r=$("#trdExchange .trdNotifyGemToCoinHigh"),o=E.parseCoinString(r.val()),s=i.val();0===s?a.val(""):$.getJSON(U.URL_API.CoinPrice+s,function(e){void 0!==e.quantity&&(t=E.parseCoinString(a.val()),n=parseInt(e.quantity),a.val(E.createCoinString(n)))}).always(function(){(void 0===e||e)&&E.animateValue(a,t,n),0===n?a.val("0"):n>=o&&0!==o?(r.addClass("trdMatched"),D.speak(D.getString("buy coin high"))):r.removeClass("trdMatched")})},updateAllExchange:function(){E.updateCoinTo(),E.updateGemTo(),E.updateMoneyTo(),E.updateNotifyCoinTo(),E.updateNotifyGemTo()},initializeExchange:function(){var e=$("#trdExchange .trdCoinTo"),t=$("#trdExchange .trdGemTo"),n=$("#trdExchange .trdMoneyTo"),i=$("#trdExchange .trdNotifyCoinTo"),a=$("#trdExchange .trdNotifyGemTo"),r=$("#trdExchange .trdNotifyCoinToGemHigh"),o=$("#trdExchange .trdNotifyGemToCoinHigh");e.val("200.."),t.val("4000"),n.val("50");var s=function(e,t){$("#trdExchange .trd"+e).attr("title","<dfn>"+D.getString(t)+"</dfn>")};s("CoinTo","your coin"),s("GemTo","your gem"),s("MoneyTo","your dollar"),s("CoinToGem","your coin to gem"),s("GemToCoin","your gem to coin"),s("MoneyToGem","your dollar to gem"),s("CoinToMoney","your coin to dollar"),s("GemToMoney","your gem to dollar"),s("MoneyToCoin","your dollar to coin"),s("CoinToGemInverse","gem to your coin"),s("GemToCoinInverse","coin to your gem"),s("CoinToMoneyInverse","dollar to your coin"),s("NotifyCoinTo","your coin"),s("NotifyGemTo","your gem"),s("NotifyCoinToGem","your coin to current gem"),s("NotifyGemToCoin","your gem to current coin"),s("NotifyCoinToGemHigh","notify if current gem > this gem"),s("NotifyGemToCoinHigh","notify if current coin > this coin"),I.qTip.init($("#trdExchange input")),$("#trdExchange input").click(function(){$(this).select()}),e.on("input",$.throttle(E.cEXCHANGE_LIMIT,function(){E.updateCoinTo(!1)})).onEnterKey($.throttle(E.cEXCHANGE_LIMIT,function(){E.updateCoinTo()})),t.on("input",$.throttle(E.cEXCHANGE_LIMIT,function(){E.updateGemTo(!1)})).onEnterKey($.throttle(E.cEXCHANGE_LIMIT,function(){E.updateGemTo()})),n.on("input",$.throttle(E.cEXCHANGE_LIMIT,function(){E.updateMoneyTo(!1)})).onEnterKey($.throttle(E.cEXCHANGE_LIMIT,function(){E.updateMoneyTo()})),i.on("input",$.throttle(E.cEXCHANGE_LIMIT,function(){E.updateNotifyCoinTo(!1)})).onEnterKey($.throttle(E.cEXCHANGE_LIMIT,function(){E.updateNotifyCoinTo()})),a.on("input",$.throttle(E.cEXCHANGE_LIMIT,function(){E.updateNotifyGemTo(!1)})).onEnterKey($.throttle(E.cEXCHANGE_LIMIT,function(){E.updateNotifyGemTo()})),X.initializeTextlist(X.Textlists.ExchangeUnit,$([e,t,n,i,a,r,o]),null,16),$(".trdProgress").data("width",$(".trdProgress").width()),E.isTradingCalculatorsInitialized=!0,E.loopRefresh()},cancelLoopRefresh:function(){window.clearTimeout(E.ProgressTimeout),window.clearTimeout(E.RefreshTimeout),$(".trdProgress").width($(".trdProgress").data("width"))},animateProgress:function(){var e=$(".trdProgress");E.ProgressTick<E.ProgressWait&&e.width(e.width()-e.data("width")/E.ProgressWait),E.ProgressTick-=1,E.ProgressTimeout=setTimeout(E.animateProgress,T.cMILLISECONDS_IN_SECOND)},loopRefresh:function(e){if(E.cancelLoopRefresh(),(e===!0||O.Options.bol_refreshPrices)&&(E.updateAllTradingPrices(),E.updateAllExchange(),O.Options.bol_refreshPrices)){var t=O.Options.int_secTradingRefresh*T.cMILLISECONDS_IN_SECOND;E.ProgressTick=O.Options.int_secTradingRefresh,E.ProgressWait=O.Options.int_secTradingRefresh,E.animateProgress(),E.RefreshTimeout=setTimeout(E.loopRefresh,t)}},initializeCalculator:function(){$("#trdCalculation .trdCalculator").onEnterKey(function(){E.doCalculation($(this))}).click(function(){$(this).select()}),$("#trdCalculation .trdCalcSubmit").click(function(){E.doCalculation($(this).prev())});for(var e in E.CalculatorHistoryArray)E.CalculatorHistoryArray[e]="";$("#trdCalculation .trdCalculator").onArrowUpKey(function(){if(0===E.CalcHistoryIndex){var e=U.stripToCalculation($(this).val());E.CalculatorHistoryArray[0]!==$(this).val().toString()&&(E.CalculatorHistoryArray.pop(),E.CalculatorHistoryArray.unshift(e))}E.CalcHistoryIndex+1<E.CalculatorHistoryArray.length&&(E.CalcHistoryIndex++,$(this).val(E.CalculatorHistoryArray[E.CalcHistoryIndex]))}),$("#trdCalculation .trdCalculator").onArrowDownKey(function(){E.CalcHistoryIndex-1>=0&&(E.CalcHistoryIndex--,$(this).val(E.CalculatorHistoryArray[E.CalcHistoryIndex]))})},doCalculation:function(pCalculator){var expression=U.stripToCalculation(pCalculator.val()),result="";try{result=eval(expression)}catch(pException){}pCalculator.val(parseFloat(result)).select(),result.toString().length>0&&(E.CalculatorHistoryArray.pop(),E.CalculatorHistoryArray.unshift(expression),E.CalcHistoryIndex=0)}},D={Phrase:{s_TEMPLATE:{de:"",es:"",fr:"",cs:"",it:"",pl:"",pt:"",ru:"",zh:""},s_h:{de:"s",es:"h",fr:"h",cs:"h",it:"o",pl:"g",pt:"h",ru:"ч",zh:"時"},s_m:{de:"m",es:"m",fr:"m",cs:"m",it:"m",pl:"m",pt:"m",ru:"м",zh:"分"},s_s:{de:"s",es:"s",fr:"s",cs:"s",it:"s",pl:"s",pt:"s",ru:"с",zh:"秒"},s_hour:{de:"stunde",es:"hora",fr:"heure",cs:"hodina",it:"ora",pl:"godzinę",pt:"hora",ru:"час",zh:"時"},s_minute:{de:"minute",es:"minuto",fr:"minute",cs:"minuta",it:"minuto",pl:"minuta",pt:"minuto",ru:"минута",zh:"分"},s_second:{de:"sekunde",es:"segundo",fr:"seconde",cs:"sekunda",it:"secondo",pl:"sekund",pt:"segundo",ru:"секунду",zh:"秒"},s_hours:{de:"studen",es:"horas",fr:"heures",cs:"hodin",it:"secondi",pl:"godzin",pt:"horas",ru:"часов",zh:"時"},s_minutes:{de:"minuten",es:"minutos",fr:"minutes",cs:"minut",it:"minuti",pl:"minut",pt:"minutos",ru:"минут",zh:"分"},s_seconds:{de:"sekunden",es:"segundos",fr:"secondes",cs:"sekund",it:"ore",pl:"sekund",pt:"segundos",ru:"секунд",zh:"秒"},s_half_an_hour:{de:"eine halbe stunde",es:"media hora",fr:"demi-heure",cs:"půl hodiny",it:"mezz'ora",pl:"pół godziny",pt:"meia hora",ru:"полчаса",zh:"半小時"},s_world_boss:{de:"weltboss",es:"jefe mundo",fr:"chef monde",cs:"svět boss",it:"boss mondo",pl:"świat szef",pt:"chefe mundo",ru:"мир босс",zh:"世界頭目"},s_section:{de:"paragraph",es:"sección",fr:"section",cs:"oddíl",it:"sezione",pl:"sekcja",pt:"seção",ru:"параграф",zh:"節"},s_Vista:{de:"Aussichtspunkt",es:"Vista",fr:"Panorama"},s_Skill_Challenge:{de:"Fertigkeitspunkt",es:"Desafío de habilidad",fr:"Défi de compétence"},s_checklist:{de:"prüfliste",es:"lista de comprobación",fr:"liste de contrôle",cs:"kontrolní seznam",it:"elenco di controllo",pl:"lista kontrolna",pt:"lista de verificação",ru:"контрольный список",zh:"檢查清單"},s_subscription:{de:"abonnement",es:"suscripción",fr:"abonnement",cs:"předplatné",it:"sottoscrizione",pl:"abonament",pt:"assinatura",ru:"подписка",zh:"訂閱"},s_alarm:{de:"alarm",es:"alarma",fr:"alarme",cs:"alarmu",it:"allarme",pl:"alarmu",pt:"alarme",ru:"будильник",zh:"鬧鐘"},s_mode:{de:"modus",es:"modo",fr:"mode",cs:"režim",it:"modalità",pl:"tryb",pt:"modo",ru:"режим",zh:"方式"},s_chatlink:{de:"chatlink",es:"vínculo chat",fr:"lien chat",cs:"chat odkaz",it:"collegamento chat",pl:"czat łącze",pt:"link bate-papo",ru:"чат связь",zh:"連結聊天"},s_is:{de:"ist",es:"es",fr:"est",cs:"je",it:"è",pl:"jest",pt:"é",ru:"является",zh:"是"},s_subscribe:{de:"abonnieren",es:"subscribir",fr:"abonner",cs:"předplatit si",it:"sottoscrivere",pl:"abonować",pt:"assinar",ru:"подписываться",zh:"訂閱"},s_will_start:{de:"wird starten",es:"se iniciará",fr:"débutera",cs:"začne",it:"inizierà",pl:"rozpocznie się",pt:"começará",ru:"начнется",zh:"開始"},s_ago:{de:"vor",es:"hace",fr:"il ya",cs:"před",it:"fa",pl:"temu",pt:"há",ru:"назад",zh:"前"},s_also:{de:"auch",es:"también",fr:"aussi",cs:"také",it:"anche",pl:"też",pt:"também",ru:"то́же",zh:"也"},s_checked:{de:"abgehakt",es:"visto",fr:"coché",cs:"odškrtnout",it:"controllato",pl:"zakończony",pt:"marcado",ru:"галочка",zh:"勾掉"},s_current:{de:"aktuelle",es:"actual",fr:"actuel",cs:"současný",it:"corrente",pl:"bieżący",pt:"corrente",ru:"текущий",zh:"活期"},s_next:{de:"nächste",es:"siguiente",fr:"prochain",cs:"příští",it:"seguente",pl:"następny",pt:"próximo",ru:"следующий",zh:"下一"},s_off:{de:"aus",es:"desactivado",fr:"désactivé",cs:"vypnuto",it:"disattivato",pl:"wyłączany",pt:"desativado",ru:"выключено",zh:"關"},s_subscribed:{de:"abonniert",es:"suscrito",fr:"souscrit",cs:"odebírané",it:"sottoscritti",pl:"subskrypcji",pt:"assinado",ru:"подписал",zh:"訂閱"},s_then:{de:"dann",es:"luego",fr:"puis",cs:"pak",it:"poi",pl:"potem",pt:"então",ru:"затем",zh:"接著"},s_and:{de:"und",es:"y",fr:"et",cs:"a",it:"e",pl:"i",pt:"e",ru:"и",zh:"和"},s_if:{de:"wenn",es:"si",fr:"si",cs:"jestliže",it:"se",pl:"jeśli",pt:"se",ru:"если",zh:"如果"},s_in:{de:"in",es:"en",fr:"en",cs:"za",it:"in",pl:"w",pt:"em",ru:"в",zh:"在"},s_to:{de:"zu",es:"a",fr:"contre",cs:"ku",it:"a",pl:"na",pt:"a",ru:"до",zh:"比"},s_Scheduled_Bosses:{de:"Geplant",es:"Programado",fr:"Planifié",cs:"Plánované",it:"Pianificata",pl:"Zaplanowane",pt:"Agendado",ru:"Запланирован",zh:"已排程"},s_Dry_Top:{de:"Trockenkuppe",es:"Cima Seca",fr:"Col Aride"},s_Legacy_Bosses:{de:"Legacy",es:"Heredado",fr:"Hérité",cs:"Starší",it:"Legacy",pl:"Starsze",pt:"Herdado",ru:"Устаревший",zh:"舊版"},s_Orr_Temples:{de:"Tempel",es:"Templos",fr:"Temples",cs:"Chrámy",it:"Templi",pl:"Świątynie",pt:"Templos",ru:"Храмы",zh:"寺廟"},s_Full_Timetable:{de:"Zeitplan",es:"Horario",fr:"Horaire",cs:"Plán",it:"Programma",pl:"Harmonogram",pt:"Horário",ru:"Расписание",zh:"時間表"},s_news:{de:"nachrichten",es:"noticias",fr:"actualités",cs:"zprávy",it:"notizie",pl:"wiadomości",pt:"notícias",ru:"новости",zh:"新聞"},s_simple_mode:{de:"einfach modus",es:"modo simple",fr:"mode simple",cs:"prostý režim",it:"modalità semplice",pl:"prosty tryb",pt:"modo simples",ru:"простой режим",zh:"方式簡單"},s_chests:{de:"schatztruhen",es:"cofres del tesoro",fr:"coffres au trésor",cs:"truhly",it:"scrigni del tesoro",pl:"skrzynie",pt:"baús de tesouro",ru:"сундуки с сокровищами",zh:"寶箱"},s_this:{de:"dieses",es:"esto",fr:"ce",cs:"toto",it:"questo",pl:"to",pt:"isto",ru:"это",zh:"這"},s_your:{de:"dein",es:"tu",fr:"ton",cs:"tvůj",it:"tuo",pl:"twój",pt:"teu",ru:"твой",zh:"你的"},s_name:{de:"namen",es:"nombre",fr:"nom",cs:"název",it:"nome",pl:"nazwa",pt:"nome",ru:"имя",zh:"名"},s_buy:{de:"kaufen",es:"comprar",fr:"acheter",cs:"koupit",it:"comprare",pl:"kupić",pt:"comprar",ru:"купить",zh:"買"},s_sell:{de:"verkaufen",es:"vender",fr:"vendre",cs:"prodat",it:"vendere",pl:"sprzedać",pt:"vender",ru:"продать",zh:"賣"},s_quantity:{de:"quantität",es:"cantidad",fr:"quantité",cs:"množství",it:"quantità",pl:"ilość",pt:"quantidade",ru:"количество",zh:"量"},s_profit:{de:"gewinn",es:"beneficio",fr:"profit",cs:"zisk",it:"profitto",pl:"zysk",pt:"lucro",ru:"прибыль",zh:"利潤"},s_cost:{de:"kosten",es:"costo",fr:"coût",cs:"náklady",it:"costo",pl:"koszt",pt:"custo",ru:"стоимость",zh:"成本"},s_breakpoint:{de:"gewinnschwelle",es:"punto muerto",fr:"seuil de rentabilité",cs:"bod zvratu",it:"punto di pareggio",pl:"próg rentowności",pt:"ponto de equilíbrio",ru:"точка безубыточности",zh:"收支平衡點"},s_tax:{de:"steuer",es:"impuestos",fr:"impôt",cs:"daň",it:"fiscale",pl:"podatek",pt:"fiscal",ru:"налог",zh:"稅"},s_revenue:{de:"einnahmen",es:"ingresos",fr:"revenus",cs:"příjmy",it:"entrate",pl:"dochody",pt:"receita",ru:"доходов",zh:"收入"},s_margin:{de:"marge",es:"margen",fr:"marge",cs:"marže",it:"margine",pl:"marża",pt:"margem",ru:"валовая",zh:"邊際"},s_low:{de:"niedrigen",es:"bajo",fr:"bas",cs:"nízký",it:"bassa",pl:"niski",pt:"baixa",ru:"низкая",zh:"低"},s_high:{de:"hohen",es:"alta",fr:"haut",cs:"vysoký",it:"alta",pl:"wysoki",pt:"alta",ru:"высокая",zh:"高"},s_notify:{de:"benachrichtigen",es:"notificar",fr:"notifier",cs:"oznámit",it:"notifica",pl:"powiadom",pt:"notificar",ru:"уведомить",zh:"通知"},s_overwrite:{de:"überschreiben",es:"sobrescribir",fr:"remplacer",cs:"přepsat",it:"sovrascrivi",pl:"zastąp",pt:"substituir",ru:"перезаписать",zh:"覆寫"},s_gem:{de:"edelsteine",es:"gema",fr:"gemme",cs:"klenot",it:"gemma",pl:"klejnot",pt:"gema",ru:"самоцвет",zh:"寶石"},s_coin:{de:"münze",es:"moneda",fr:"monnaie",cs:"mince",it:"moneta",pl:"moneta",pt:"moeda",ru:"монета",zh:"硬幣"},s_dollar:{de:"dollar",es:"dólar",fr:"dollar",cs:"dolar",it:"dollaro",pl:"polar",pt:"dólar",ru:"доллар",zh:"元"}},Element:{s_TEMPLATE:{de:"",es:"",fr:"",cs:"",it:"",pl:"",pt:"",ru:"",zh:""},s_menuChains:{de:"Ketten",es:"Cadenas",fr:"Chaînes",cs:"Řetězy",it:"Catene",pl:"Łańcuchy",pt:"Cadeias",ru:"Цепи",zh:"鏈"},s_menuMap:{de:"Werkzeuge",es:"Útiles",fr:"Outils",cs:"Nástroje",it:"Strumenti",pl:"Narzędzia",pt:"Ferramentas",ru:"Средства",zh:"工具"},s_menuWvW:{de:"WvW",es:"WvW",fr:"WvW",cs:"WvW",it:"WvW",pl:"WvW",pt:"WvW",ru:"WvW",zh:"WvW"},s_menuHelp:{de:"Hilfe",es:"Ayuda",fr:"Assistance",cs:"Pomoci",it:"Guida",pl:"Pomoc",pt:"Ajuda",ru:"Помощь",zh:"輔助"},s_menuOptions:{de:"Optionen",es:"Opciónes",fr:"Options",cs:"Možnosti",it:"Opzioni",pl:"Opcje",pt:"Opções",ru:"Параметры",zh:"選項"}},getTranslation:function(e,t){if(O.Options.enu_Language===O.OptionEnum.Language.Default)return e;var n,i,a=e;-1!==a.indexOf(" ")&&(a=a.replace(/ /g,"_"));var n=t["s_"+a];return n&&(i=n[O.Options.enu_Language])?i:e},getPhrase:function(e){return D.getTranslation(e,D.Phrase)},getSentence:function(e){return U.toFirstUpperCase(D.getTranslation(e,D.Phrase))},getElement:function(e){return D.getTranslation(e,D.Element)},getString:function(e,t){void 0===t&&(t=U.CaseEnum.Every);var n=e.split(" ");for(var i in n)n[i]=D.getTranslation(n[i],D.Phrase);return U.changeCase(n.join(" "),t)},getModifiedWord:function(e,t,n){var i="";if(t){var a=D.getPhrase(e),r=D.getPhrase(t);i=D.isLanguageModifierFirst()?r+" "+a:a+" "+r}else i=D.getPhrase(e);return U.changeCase(i,n)},translatePageHeader:function(e){O.Options.enu_Language!==O.OptionEnum.Language.Default&&$("#layer"+e+" .cntHeader").text(D.getElement("menu"+e))},translateAfter:function(){O.Options.enu_Language!==O.OptionEnum.Language.Default&&($(".jsTranslate").each(function(){$(this).text(D.getPhrase($(this).text()))}),$(".menuButton").each(function(){$(this).attr("title","<dfn>"+D.getElement($(this).attr("id"))+"</dfn>"),I.qTip.init($(this))}),D.translatePageHeader(I.PageEnum.Options)),$("#optAlarmLegend").text(D.getModifiedWord("mode","alarm",U.CaseEnum.Every)),$("#opt_int_setAlarm").after(" "+D.getSentence("off")),$("#optAlarmChecklist").after(" "+D.getSentence("checklist")),$("#optAlarmSubscription").after(" "+D.getSentence("subscription"))},isLanguageFullySupported:function(){return O.Options.enu_Language===O.OptionEnum.Language.English||O.Options.enu_Language===O.OptionEnum.Language.German||O.Options.enu_Language===O.OptionEnum.Language.Spanish||O.Options.enu_Language===O.OptionEnum.Language.French?!0:!1},getFullySupportedLanguage:function(){return D.isLanguageFullySupported()?O.Options.enu_Language:O.OptionEnum.Language.Default},isLanguageSecondary:function(){return O.Options.enu_Language===O.OptionEnum.Language.German||O.Options.enu_Language===O.OptionEnum.Language.Spanish||O.Options.enu_Language===O.OptionEnum.Language.French?!0:!1},isLanguageModifierFirst:function(){return O.Options.enu_Language===O.OptionEnum.Language.French||O.Options.enu_Language===O.OptionEnum.Language.Spanish||O.Options.enu_Language===O.OptionEnum.Language.Italian||O.Options.enu_Language===O.OptionEnum.Language.Portuguese||O.Options.enu_Language===O.OptionEnum.Language.Mandarin?!1:!0},isLanguageLogographic:function(){return O.Options.enu_Language===O.OptionEnum.Language.Mandarin?!0:!1},ChainTitle:[{en:"Fire Elemental",de:"Feuerelementar",es:"Elemental de Fuego",fr:"Elémentaire de Feu",cs:"Ohnivý Elementál",it:"Elementale del Fuoco",pl:"Ognisty Żywioł",pt:"Fogo Elemental",ru:"Огонь Элементаль",zh:"火焰元素"},{en:"Golem Mark II",de:"Golem Typ II",es:"Gólem Serie II",fr:"Golem Marque II",cs:"Golem Typu II",it:"Golem Tipo II",pl:"Golem Model II",pt:"Golem Tipo II",ru:"Голем Тип II",zh:"魔像馬克II型"},{en:"Claw of Jormag",de:"Klaue Jormags",es:"Garra de Jormag",fr:"Griffe de Jormag",cs:"Dráp Jormag",it:"Artiglio di Jormag",pl:"Szpon Jormaga",pt:"Garra de Jormag",ru:"Йормаг Коготь",zh:"卓瑪之爪"},{en:"Svanir Shaman",de:"Schamanenoberhaupt der Svanir",es:"Jefe Chamán Svanir",fr:"Chef Chamane de Svanir",cs:"Hlavní Svanir Šaman",it:"Capo Sciamano Svanir",pl:"Wódz Szamanów Svanira",pt:"Chefe Xamã Svanir",ru:"Главный Шаман Сванир",zh:"斯瓦尼亞薩滿"},{en:"Megadestroyer",de:"Megazerstörer",es:"Megadestructor",fr:"Mégadestructeur",cs:"Meganičitel",it:"Megadistruttore",pl:"Wielkiniszczyciel",pt:"Megadestruidor",ru:"Мегадеструктор",zh:"超能毀滅者"},{en:"Shadow Behemoth",de:"Schatten-Behemoth",es:"Behemot de las Sombras",fr:"Béhémoth des Ombres",cs:"Stín Behemoth",it:"Behemoth d'Ombra",pl:"Mroczny Behemot",pt:"Behemoth de Sombra",ru:"Бегемот из Тени",zh:"暗影巨獸"},{en:"The Shatterer",de:"Den Zerschmetterer",es:"El Asolador",fr:"Le Destructeur",cs:"Shatterer",it:"Il Shatterer",pl:"Shatterer",pt:"O Shatterer",ru:"Шаттерер",zh:"碎裂巨獸"},{en:"Taidha Covington",de:"Taidha Covington",es:"Taidha Covington",fr:"Taidha Covington",cs:"Taidha Covington",it:"Taidha Covington",pl:"Taidha Covington",pt:"Taidha Covington",ru:"Таидха Цовингтон",zh:"泰達·科文頓"},{en:"Modniir Ulgoth",de:"Ulgoth den Modniir",es:"Ulgoth el Modniir",fr:"Ulgoth le Modniir",cs:"Ulgoth na Modniir",it:"Ulgoth il Modniir",pl:"Modniir Ulgoth",pt:"Ulgoth o Modniir",ru:"Улготх в Модниир",zh:"莫迪爾沃爾格斯"},{en:"Great Jungle Wurm",de:"Großen Dschungelwurm",es:"Gran Sierpe de la Selva",fr:"Grande Guivre de la Jungle",cs:"Velká Džungle Červ",it:"Grande Verme Giungla",pl:"Wielki Robak z Dżungli",pt:"Grande Verme Selva",ru:"Великий Червь из Джунглей",zh:"巨型叢林地虫"},{en:"Karka Queen",de:"Karka-Königin",es:"Reina Karka",fr:"Reine Karka",cs:"Karka Královna",it:"Regina Karka",pl:"Karka Królowa",pt:"Rainha Karka",ru:"Карка Королева",zh:"喀殼虫女王"},{en:"Tequatl the Sunless",de:"Tequatl den Sonnenlosen",es:"Tequatl el Sombrío",fr:"Tequatl le Sans-soleil",cs:"Tequatl Bez Slunce",it:"Tequatl il Senza Sole",pl:"Tequatl ma Słońca",pt:"Tequatl o Sem Sol",ru:"Теqуатл Тусклый",zh:"吞噬托"},{en:"Triple Wurm",de:"Dreifach Wurm",es:"Sierpe Triple",fr:"Guivre Triple",cs:"Trojitý Červ",it:"Verme Triplo",pl:"Potrójne Robak",pt:"Verme Triplo",ru:"Тройной Червь",zh:"進化巨型叢林地虫"},{en:"Dry Top Q1",de:"Trockenkuppe Q1",es:"Cima Seca Q1",fr:"Col Aride Q1"},{en:"Dry Top Q2",de:"Trockenkuppe Q2",es:"Cima Seca Q2",fr:"Col Aride Q2"},{en:"Dry Top Q3",de:"Trockenkuppe Q3",es:"Cima Seca Q3",fr:"Col Aride Q3"},{en:"Dry Top Q4",de:"Trockenkuppe Q4",es:"Cima Seca Q4",fr:"Col Aride Q4"},{en:"Lyssa",de:"Verderbte Hohepriesterin der Lyssa",es:"Suma Sacerdotisa Corrupta de Lyssa",fr:"Grande Prêtresse Corrompue de Lyssa",cs:"Lyssa Chrám",it:"Tempio di Lyssa",pl:"Lyssa Świątynia",pt:"Templo de Lyssa",ru:"Лысса Храм",zh:"Lyssa 的寺廟"},{en:"Dwayna",de:"Besessene Dwayna-Statue",es:"Estatua Poseída de Dwayna",fr:"Statue Possédée de Dwayna",cs:"Dwayna Chrám",it:"Tempio di Dwayna",pl:"Dwayna Świątynia",pt:"Templo de Dwayna",ru:"Дwаына Храм",zh:"Dwayna 的寺廟"},{en:"Melandru",de:"Auferstandenen Priester der Melandru",es:"Sacerdote de Melandru Resurgido",fr:"Prêtre Revenant de Melandru",cs:"Melandru Chrám",it:"Tempio di Melandru",pl:"Melandru Świątynia",pt:"Templo de Melandru",ru:"Меландру Храм",zh:"Melandru 的寺廟"},{en:"Grenth",de:"Auferstandenen Priester des Grenth",es:"Sacerdote de Grenth Resurgido",fr:"Prêtre Revenant de Grenth",cs:"Grenth Chrám",it:"Tempio di Grenth",pl:"Grenth Świątynia",pt:"Templo de Grenth",ru:"Грентх Храм",zh:"Grenth 的寺廟"},{en:"Arah",de:"Tore von Arah",es:"Puertas de Arah",fr:"Portes d'Arah",cs:"Arah Brány",it:"Porte di Arah",pl:"Arah Bramy",pt:"Portões de Ará",ru:"Ворота Арах",zh:"Arah 的寺廟"},{en:"Balthazar",de:"Auferstandenen Priester des Balthasar",es:"Sacerdote de Balthazar Resurgido",fr:"Prêtre Revenant de Balthazar",cs:"Balthazar Chrám",it:"Tempio di Balthazar",pl:"Świątynia Balthazar",pt:"Templo de Balthazar",ru:"Балтхазар Храм",zh:"Balthazar 的寺廟"},{en:"Balthazar North",de:"Nord Invasion von Orr",es:"Invasión del Norte de Orr",fr:"Invasion du Nord de Orr",cs:"Severní Invaze Orr",it:"Invasione Settentrionale di Orr",pl:"Północnej Inwazja Orr",pt:"Invasão Norte de Orr",ru:"Северная Вторжение Орр",zh:"北部入侵 Orr"},{en:"Balthazar Central",de:"Zentral Invasion von Orr",es:"Invasión Central de Orr",fr:"Invasion Central de Orr",cs:"Centrální Invaze Orr",it:"Invasione Centrale di Orr",pl:"Centralny Inwazja Orr",pt:"Invasão Central Orr",ru:"Центральный Вторжение Орр",zh:"中部入侵 Orr"},{en:"Balthazar South",de:"Invasion der Südlichen Orr",es:"Invasión del Sur de Orr",fr:"Invasion du Sud de Orr",cs:"Jižní Invaze Orr",it:"Invasione del Sud di Orr",pl:"Południowej Inwazja Orr",pt:"Invasão do Sul de Orr",ru:"Южный Вторжение Орр",zh:"南部入侵 Orr"},{en:"Fire Shaman",de:"Feuerschamanen",es:"Chamán de Fuego",fr:"Chamane de Feu",cs:"Požární Šaman",it:"Sciamano Fuoco",pl:"Ognia Szaman",pt:"Xamã Fogo",ru:"Oгня Шаман",zh:"火薩滿"},{en:"Rhendak the Crazed",de:"Rhendak den Verrückten",es:"Rhendak el Perturbado",fr:"Rhendak le Fou",cs:"Poblázněný Rhendak",it:"Rhendak il Folle",pl:"Szalony Rhendak",pt:"Rhendak o Enlouquecido",ru:"Сумасшедший Рхендак",zh:"瘋狂 Rhendak"},{en:"Foulbear Chieftain",de:"Faulbär-Häuptling",es:"Cabecilla de Osoinmundo",fr:"Chef Oursefol",cs:"Foulbear Náčelník",it:"Capo Foulbear",pl:"Faulwódz Niedźwiedź",pt:"Chefe Foulbear",ru:"Фолмедведь Вождь",zh:"臭熊頭目"},{en:"Dredge Commissar",de:"Schaufler-Kommissar",es:"Comisario Draga",fr:"Kommissar Draguerre",cs:"Vybagrovat Komisař",it:"Commissario Dragare",pl:"Pogłębiarka Komisarza",pt:"Comissário Dragar",ru:"Драги Комиссар",zh:"疏浚政委"},{en:"Nebo Terrace",de:"Nebo-Terrasse",es:"Terraza de Nebo",fr:"Terrasse de Nebo",cs:"Nebo Terasa",it:"Terrazzo di Nebo",pl:"Nebo Taras",pt:"Esplanada de Nebo",ru:"Нево Терраса",zh:"階地 Nebo"},{en:"Eye of Zhaitan",de:"Auge des Zhaitan",es:"Ojo de Zhaitan",fr:"Œil de Zhaïtan",cs:"Oko Zhaitan",it:"Occhio Zhaitan",pl:"Oko Zhaitan",pt:"Olho de Zhaitan",ru:"Глаз Жаитан",zh:"眼的 Zhaitan"}],getChainTitle:function(e){return C.Chains[e].series===C.ChainSeriesEnum.DryTop?D.isLanguageFullySupported()?D.ChainTitle[e][O.Options.enu_Language]:D.ChainTitle[e][O.OptionEnum.Language.Default]:O.Options.enu_Language===O.OptionEnum.Language.Default?C.Chains[e].title:D.ChainTitle[e][O.Options.enu_Language]
},getChainTitleAny:function(e){return C.Chains[e].series===C.ChainSeriesEnum.DryTop?C.Chains[e].title:D.ChainTitle[e][O.Options.enu_Language]},getChainAlias:function(e){return O.Options.enu_Language===O.OptionEnum.Language.Default?C.Chains[e].alias:D.getChainTitle(e)},getEventName:function(e){return e["name_"+O.Options.enu_Language]?e["name_"+O.Options.enu_Language]:e.name_en},speechWait:0,speak:function(e,t){var n=function(e){var t,n;I.BrowserCurrent===I.BrowserEnum.Chrome?(n=document.getElementById("jsTTSFrame"),t="http://translate.google.com/translate_tts?tl="+O.Options.enu_Language+"&q="+e,n.src=t):(n=document.getElementById("jsTTSAudio"),t="http://tts-api.com/tts.mp3?q="+e,n.src=t,n.load(),n.play())};if(void 0===t){var i=D.isLanguageLogographic()?4:12;t=1+Math.round(e.length/i)}var a=t*T.cMILLISECONDS_IN_SECOND;0===D.speechWait?(D.speechWait+=a,n(e),setTimeout(function(){D.speechWait-=a},a)):(D.speechWait+=a,setTimeout(function(){D.speechWait>0&&(n(e),D.speechWait-=a)},D.speechWait-a))},isSpeaking:function(){return 0===D.speechWait?!1:!0},stopSpeech:function(){document.getElementById("jsTTSFrame").src="",document.getElementById("jsTTSAudio").src=""},resetSpeechQueue:function(e){void 0===e&&(e=0),D.speechWait>e*T.cMILLISECONDS_IN_SECOND&&(D.speechWait=0,D.stopSpeech())},getSpeech:function(e,t){return I.BrowserCurrent===I.BrowserEnum.Chrome?t?D.getModifiedWord(e,t):D.getPhrase(e):t?t+e:e},getChainPronunciation:function(e){return O.Options.enu_Language===O.OptionEnum.Language.Default||I.BrowserCurrent!==I.BrowserEnum.Chrome?C.Chains[e.nexus].pronunciation:D.getChainTitle(e.nexus)}},C={Chains:GW2T_CHAIN_DATA,cIndexSynonym:"nexus",CurrentChainSD:{},NextChainSD1:{},NextChainSD2:{},NextChainSD3:{},NextChainSD4:{},CurrentChainHC:{},NextChainHC1:{},NextChainHC2:{},NextChainHC3:{},NextChainHC4:{},CurrentChains:[],PreviousChains1:[],PreviousChains2:[],NextChains1:[],cChainTitleCharLimit:30,ScheduledChains:[],DryTopChains:[],LegacyChains:[],TempleChains:[],ChainSeriesEnum:{Temple:0,Legacy:1,ScheduledCutoff:1,Standard:2,Hardcore:3,DryTop:4},EventPrimacyEnum:{Optional:0,Normal:1,Primary:2,Boss:3},isChainScheduled:function(e){return e.series>C.ChainSeriesEnum.ScheduledCutoff?!0:!1},parseChainAlias:function(e){return-1!==e.indexOf("XXX")?e.split("XXX")[0]:e},getEventStepNumber:function(e){if(1===e.length)return e;var t,n="";for(t=0;t<e.length;t++){if(!isFinite(e.charAt(t)))return n;n+=e.charAt(t)}return n},truncateTitleString:function(e,t,n){return n=n||"",e.length>t?e.substring(0,t)+n:e},styleBarIcon:function(e){document.getElementById("chnIcon_"+e.nexus).src="img/chain/"+C.parseChainAlias(e.alias).toLowerCase()+I.cPNG},initializeChainAndHTML:function(e){var t,n,i,a="";switch(e.series){case C.ChainSeriesEnum.Standard:a="#listChainsScheduled",C.ScheduledChains.push(e);break;case C.ChainSeriesEnum.Hardcore:a="#listChainsScheduled",C.ScheduledChains.push(e);break;case C.ChainSeriesEnum.DryTop:a="#listChainsDryTop",C.ScheduledChains.push(e),C.DryTopChains.push(e);break;case C.ChainSeriesEnum.Legacy:a="#listChainsLegacy",C.LegacyChains.push(e);break;case C.ChainSeriesEnum.Temple:a="#listChainsTemple",C.TempleChains.push(e)}$(a).append("<div id='barChain_"+e.nexus+"' class='barChain'><div class='chnTitle'><img id='chnIcon_"+e.nexus+"' src='' /><div id='chnCheck_"+e.nexus+"' class='chnCheck'></div><h1 id='chnTitle_"+e.nexus+"'>"+C.truncateTitleString(D.getChainTitle(e.nexus),C.cChainTitleCharLimit)+"</h1><time id='chnTime_"+e.nexus+"' class='chnTimeFutureFar'></time></div><div id='chnDetails_"+e.nexus+"' class='chnDetails'><ol id='chnEvents_"+e.nexus+"' class='chnEvents'></ol><div class='chnDetailsLinks'><ins id='chnDelete_"+e.nexus+"' title='Permanently hide this event chain (can undo in Options, Defaults).'>[x]</ins></div></div>"),C.isChainScheduled(e)&&C.styleBarIcon(e);var r=function(e,t){var n=t,i="&lt;br /&gt;",a=function(e){return"&lt;dfn&gt;"+e+"&lt;/dfn&gt;"},r="";r=e.series===C.ChainSeriesEnum.DryTop?a("Event Number: ")+n.num+i+a("Start Time: ")+n.lim+i+i+"&quot;"+D.getEventName(n).replace(/["']/g,"")+"&quot;":a("Event Number: ")+n.num+i+a("If Success Go To: ")+n.sGotoNum+i+a("If Failure Go To: ")+n.fGotoNum+i+a("If Success Wait: ")+n.sInterim+i+a("If Failure Wait: ")+n.fInterim+i+a("Time Limit: ")+n.lim+i+a("Avg to Complete: ")+n.avg+i+a("Min to Complete: ")+n.min+i+a("Max to Complete: ")+n.max+i+i+"&quot;"+D.getEventName(n).replace(/["']/g,"")+"&quot;";var o=0,s=44,c=function(){o=12,s=40},l=C.getEventStepNumber(n.num);if(l.length!==n.num.length){var u=n.num.slice(l.length);-1!==n.num.indexOf(".")?c():2===n.num.length?-1===u.indexOf("A")&&-1===u.indexOf("a")&&c():-1===u.indexOf("A1")&&-1===u.indexOf("a1")&&c()}$("#chnEvents_"+e.nexus).append("<li id='chnEvent_"+e.nexus+"_"+n.num+"' class='chnStep_"+e.nexus+"_"+n.step+"' style='margin-left:"+o+"px'><img src='img/event/"+n.icon+I.cPNG+"' title='"+r+"'/><span>"+C.truncateTitleString(D.getEventName(n),s,"..")+"</span></li>")};for(t in e.events)if(i=e.events[t],i.primacy===C.EventPrimacyEnum.Primary)e.primaryEvents.push(i);else if(i.primacy===C.EventPrimacyEnum.Boss){e.primaryEvents.push(i),e.primaryEvents[0].minSum=0,e.primaryEvents[0].avgSum=0,e.primaryEvents[0].minavgSum=0;break}for(t=1;t<e.primaryEvents.length;t++){var o=T.parseEventTime(e.primaryEvents[t-1].sInterim[0]);e.primaryEvents[t].minSum=T.parseEventTime(e.primaryEvents[t-1].min)+o+e.primaryEvents[t-1].minSum,e.primaryEvents[t].avgSum=T.parseEventTime(e.primaryEvents[t-1].avg)+o+e.primaryEvents[t-1].avgSum,e.primaryEvents[t].minavgSum=e.primaryEvents[t].minSum+~~(Math.abs(e.primaryEvents[t].avgSum-e.primaryEvents[t].minSum)/2)}if(t--,e.minFinish=e.primaryEvents[t].minSum+T.parseEventTime(e.primaryEvents[t].min),e.avgFinish=e.primaryEvents[t].avgSum+T.parseEventTime(e.primaryEvents[t].avg),e.minavgFinish=e.minFinish+~~(Math.abs(e.avgFinish-e.minFinish)/2),n=0,C.isChainScheduled(e)){for(t in e.events)if(e.events[t].primacy!==C.EventPrimacyEnum.Optional&&(C.getEventStepNumber(e.events[t].num)!==C.getEventStepNumber(e.primaryEvents[n].num)&&n++,r(e,e.events[t])),e.events[t].primacy===C.EventPrimacyEnum.Boss)break}else for(t in e.events)r(e,e.events[t])},initializeAllChains:function(){for(var e in C.Chains){for(var t in C.Chains[e].events)C.Chains[e].events[t].step=parseInt(C.getEventStepNumber(C.Chains[e].events[t].num))-1;C.Chains[e].nexus=parseInt(e),C.Chains[e].isSorted=!1,C.Chains[e].primaryEvents=new Array,C.Chains[e].scheduleKeys=new Array,C.initializeChainAndHTML(C.Chains[e])}$(".chnDetails").hide(),$("#listChainsScheduled .barChain h1, #listChainsDryTop .barChain h1").addClass("chnTitleFutureFar")},isChainCurrent:function(e){for(var t in C.CurrentChains)if(e.nexus===C.CurrentChains[t].nexus)return!0;return!1},isChainUnchecked:function(e){return X.getChainChecklistState(e)===X.ChecklistEnum.Unchecked?!0:!1},isChainSubscribed:function(e){return X.getChecklistItem(X.Checklists.ChainSubscription,e.nexus)===X.ChecklistEnum.Checked?!0:!1},updateChainTimeTooltipHTML:function(e){var t,n="",i="<dfn>"+D.getSentence("subscribe")+"?</dfn><br />";e.series===C.ChainSeriesEnum.DryTop&&(i="");for(var a in e.scheduleKeys)t=0===parseInt(a)?i:" <br /> ",n=n+t+T.getTimeFormatted({wantSeconds:!1,customTimeInSeconds:T.convertScheduleKeyToLocalSeconds(e.scheduleKeys[a])});$("#chnTime_"+e.nexus).prop("title",n)},updateChainsTimeHTML:function(){var e,t,n,i=!1;for(e in C.ScheduledChains)t=C.ScheduledChains[e],C.updateChainTimeTooltipHTML(t),C.isChainCurrent(t)||(O.Options.bol_useCountdown?(n=T.getSecondsUntilChainStarts(t),i=!0):(n=T.convertScheduleKeyToLocalSeconds(t.scheduleKeys[0]),i=!1),$("#chnTime_"+t.nexus).text(T.getTimeFormatted({wantLetters:i,wantSeconds:!1,customTimeInSeconds:n})));I.qTip.init(".chnTitle time")},updateCurrentChainTimeHTML:function(e){var t=T.getCurrentTimeframeElapsedTime(),n=e.countdownToFinish-t,i=n,a="-";e.series===C.ChainSeriesEnum.DryTop?$("#chnTime_"+e.nexus).text(T.getTimeFormatted({reference:T.ReferenceEnum.UTC,want24:!0,wantHours:!1})):(0>=n&&(i=T.cSECONDS_IN_TIMEFRAME-t,a="−"),$("#chnTime_"+e.nexus).text(a+T.getTimeFormatted({wantHours:!1,wantLetters:!0,customTimeInSeconds:i})))},initializeTimetableHTML:function(){$("#listChainsTimetable").empty();var e,t,n,i,a;for(e in T.Schedule){n=T.getScheduleSlotChainsByKey(e);for(t in n){if(i=n[t],i.series!==C.ChainSeriesEnum.Standard&&i.series!==C.ChainSeriesEnum.Hardcore)break;a=T.getTimeFormatted({wantSeconds:!1,customTimeInSeconds:T.convertScheduleKeyToLocalSeconds(e)}),$("#listChainsTimetable").append("<div class='barChainDummy barChainDummy_"+e+"'><div class='chnTitle'><img src='img/chain/"+C.parseChainAlias(i.alias).toLowerCase()+I.cPNG+"' /><h1>"+C.truncateTitleString(D.getChainTitleAny(i.nexus),C.cChainTitleCharLimit)+"</h1><time>"+a+"</time></div></div>")}}$("#listChainsTimetable .barChainDummy_"+T.getTimeframeKey()).addClass("chnBarCurrent"),$("#listChainsTimetable .barChainDummy_"+T.getTimeframeKey()+" .chnTitle h1").addClass("chnTitleCurrent"),$("#listChainsTimetable .barChainDummy_"+T.getTimeframeKey(1)+" .chnTitle h1").addClass("chnTitleFuture")},sortChainsListHTML:function(){for(var e,t,n=0,i=C.ScheduledChains.length,a=0,r=0,o="";i>n;){e=T.getTimeframeChains(a);for(r in e){if(n>=i)break;if(t=e[r],t.isSorted===!1){switch(t.series){case C.ChainSeriesEnum.DryTop:o="#listChainsDryTop";break;default:o="#listChainsScheduled"}$("#barChain_"+t.nexus).appendTo(o),t.isSorted=!0,t.scheduleKeyImmediate=T.getTimeframeKey(a),n++}}a++}for(a in C.ScheduledChains){t=C.ScheduledChains[a],t.isSorted=!1;for(r in t.scheduleKeys)if(t.scheduleKeys[r]===t.scheduleKeyImmediate){t.scheduleKeys=t.scheduleKeys.slice(r,t.scheduleKeys.length).concat(t.scheduleKeys.slice(0,r));break}}O.Enact.bol_useCountdown();for(a in C.CurrentChains)t=C.CurrentChains[a],$("#barChain_"+t.nexus).addClass("chnBarCurrent"),C.isChainUnchecked(t)&&(t.series===C.ChainSeriesEnum.DryTop&&O.Options.bol_expandLS||t.series!==C.ChainSeriesEnum.DryTop&&O.Options.bol_expandWB)&&$("#chnDetails_"+t.nexus).show("fast"),$("#barChain_"+t.nexus+" h1").first().removeClass("chnTitleFuture chnTitleFutureFar").addClass("chnTitleCurrent"),$("#barChain_"+t.nexus+" time").first().removeClass("chnTimeFuture chnTimeFutureFar").addClass("chnTimeCurrent");for(a in C.PreviousChains1)t=C.PreviousChains1[a],$("#barChain_"+t.nexus).removeClass("chnBarCurrent").addClass("chnBarPrevious"),O.Options.bol_collapseChains&&$("#chnDetails_"+t.nexus).hide(),$("#barChain_"+t.nexus+" h1").first().removeClass("chnTitleCurrent").addClass("chnTitleFutureFar"),$("#barChain_"+t.nexus+" time").first().removeClass("chnTimeCurrent").addClass("chnTimeFutureFar");for(a in C.PreviousChains2)t=C.PreviousChains2[a],$("#barChain_"+t.nexus).removeClass("chnBarPrevious");for(a in C.NextChains1)t=C.NextChains1[a],$("#barChain_"+t.nexus+" h1").first().removeClass("chnTitleFutureFar").addClass("chnTitleFuture"),$("#barChain_"+t.nexus+" time").first().removeClass("chnTimeFutureFar").addClass("chnTimeFuture");$("#listChainsTimetable .barChainDummy_"+T.getTimeframeKey(-1)).removeClass("chnBarCurrent"),$("#listChainsTimetable .barChainDummy_"+T.getTimeframeKey()).addClass("chnBarCurrent"),$("#listChainsTimetable .barChainDummy_"+T.getTimeframeKey(-1)+" .chnTitle h1").removeClass("chnTitleCurrent"),$("#listChainsTimetable .barChainDummy_"+T.getTimeframeKey()+" .chnTitle h1").removeClass("chnTitleFuture").addClass("chnTitleCurrent"),$("#listChainsTimetable .barChainDummy_"+T.getTimeframeKey(1)+" .chnTitle h1").addClass("chnTitleFuture")},queueEventsHighlight:function(e){var t,n,i=e,a=T.getCurrentTimeframeElapsedTime(),r=!1;if(a>0){$(".barChain:not(.barChainCurrent) .chnEvents li").addClass("chnEventPast");for(t in i.primaryEvents)if(n=C.getSumBasedOnOptions(i,t),n>=a&&t>0){C.highlightEvents(i,parseInt(t-1)),r=!0;break}r===!1&&(n=C.getSumBasedOnOptions(i,-1),n>=a?C.highlightEvents(i,t):C.highlightEvents(i,-1))}for(t in i.primaryEvents)n=C.getSumBasedOnOptions(i,t),n>=a&&(n-=a,setTimeout(function(e,t){return function(){C.highlightEvents(e,t)}}(i,parseInt(t)),n*T.cMILLISECONDS_IN_SECOND));n=C.getSumBasedOnOptions(i,-1),n>=a&&(n-=a,setTimeout(function(e){return function(){C.highlightEvents(e,-1)}}(i),n*T.cMILLISECONDS_IN_SECOND))},highlightEvents:function(e,t){var n,i,a=500,r=320,o=e.primaryEvents.length-1;if(e.series===C.ChainSeriesEnum.DryTop){for(n in e.events)i=e.events[n],i.eventicon._icon.style.display="none",i.eventring._icon.style.display="none";M.DryTopEventActive=null,M.DryTopEventActive=new Array}if(t>-1){for(e.CurrentPrimaryEvent=e.primaryEvents[t],n=0;t>n;n++)$(".chnStep_"+e.nexus+"_"+n).removeClass("chnEventCurrent").addClass("chnEventPast");if($(".chnStep_"+e.nexus+"_"+(t-1)).css({opacity:1}).animate({opacity:.5},a,function(){e.series===C.ChainSeriesEnum.DryTop&&$(this).hide()}),$(".chnStep_"+e.nexus+"_"+t).each(function(){$(this).removeClass("chnEventPast chnEventFuture").addClass("chnEventCurrent").show().css({width:0,opacity:.5}).animate({width:r,opacity:1},a).css({width:"auto"}),e.series===C.ChainSeriesEnum.DryTop&&(i=e.events[$(this).attr("data-eventindex")],M.DryTopEventActive.push(i.eventicon),M.DryTopEventActive.push(i.eventring),I.PageCurrent!==I.PageEnum.Map&&(i.eventicon._icon.style.display="block",i.eventring._icon.style.display="block")),M.burySubmaps()}),t<e.primaryEvents.length)for(n=t+1;n<e.primaryEvents.length;n++)$(".chnStep_"+e.nexus+"_"+n).show().removeClass("chnEventCurrent").addClass("chnEventFuture");O.Options.bol_tourPrediction&&!O.Options.bol_followCharacter&&I.PageCurrent===I.PageEnum.Chains&&M.isMapAJAXDone&&C.isChainUnchecked(e)&&e.series!==C.ChainSeriesEnum.DryTop&&$("#listChainsDryTop").is(":visible")===!1&&(e.series===C.ChainSeriesEnum.DryTop&&O.Options.bol_expandLS||e.series!==C.ChainSeriesEnum.DryTop)&&$("#chnEvent_"+e.nexus+"_"+e.CurrentPrimaryEvent.num).trigger("click")}else if(e.CurrentPrimaryEvent=e.primaryEvents[o],$("#chnEvents_"+e.nexus+" li").show().removeClass("chnEventCurrent").addClass("chnEventPast"),$(".chnStep_"+e.nexus+"_"+o).css({opacity:1}).animate({opacity:.5},a),O.Options.int_setAlarm===O.IntEnum.Alarm.Checklist&&O.Options.bol_alertAtEnd&&I.isProgramLoaded&&e.nexus===C.CurrentChainSD.nexus&&e.series!==C.ChainSeriesEnum.DryTop){var s=", "+D.getSpeech("checked"),c="",l="",u=O.objToBool(C.NextChainSD1),h=O.objToBool(C.NextChainHC1),p=D.getSpeech("world boss","next")+" "+D.getSpeech("is")+" ";C.NextChainSD1&&!C.isChainUnchecked(C.NextChainSD1)&&(c=s),C.NextChainHC1&&!C.isChainUnchecked(C.NextChainHC1)&&(l=s),O.Options.bol_alertChecked===!1&&(c.length>0&&(u=!1),l.length>0&&(h=!1)),u&&h?(D.speak(p+D.getChainPronunciation(C.NextChainSD1)+c,5),D.speak(D.getSpeech("also")+", "+D.getChainPronunciation(C.NextChainHC1)+l,3)):u?D.speak(p+D.getChainPronunciation(C.NextChainSD1)+c,5):h&&D.speak(p+D.getChainPronunciation(C.NextChainHC1)+l,5),(u||h)&&D.speak(T.getTimeTillChainFormatted(C.NextChainSD1,"speech"),3)}},getSumBasedOnOptions:function(e,t){var n=T.getTimeOffsetSinceMidnight(T.ReferenceEnum.Server,T.UnitEnum.Hours);if(t>-1)switch(O.Options.int_setPredictor){case O.IntEnum.Predictor.Auto:if(n>=16&&20>n)return e.primaryEvents[t].minSum;if(n>=20&&23>n)return e.primaryEvents[t].minavgSum;if(n>=23||12>n)return e.primaryEvents[t].avgSum;if(n>=12&&16>n)return e.primaryEvents[t].minavgSum;break;case O.IntEnum.Predictor.Min:return e.primaryEvents[t].minSum;case O.IntEnum.Predictor.MinAvg:return e.primaryEvents[t].minavgSum;case O.IntEnum.Predictor.Avg:return e.primaryEvents[t].avgSum}else switch(O.Options.int_setPredictor){case O.IntEnum.Predictor.Auto:if(n>=16&&20>n)return e.countdownToFinish=e.minFinish,e.minFinish;if(n>=20&&23>n)return e.countdownToFinish=e.minavgFinish,e.minavgFinish;if(n>=23||12>n)return e.countdownToFinish=e.avgFinish,e.avgFinish;if(n>=12&&16>n)return e.countdownToFinish=e.minavgFinish,e.minavgFinish;break;case O.IntEnum.Predictor.Min:return e.countdownToFinish=e.minFinish,e.minFinish;case O.IntEnum.Predictor.MinAvg:return e.countdownToFinish=e.minavgFinish,e.minavgFinish;case O.IntEnum.Predictor.Avg:return e.countdownToFinish=e.avgFinish,e.avgFinish}}},M={Zones:GW2T_ZONE_DATA,ZoneAssociations:GW2T_ZONE_ASSOCIATION,Regions:GW2T_REGION_DATA,cInitialZone:"lion",Map:{},Events:{},Resources:{},Collectibles:{},ZoneCurrent:{},currentIconSize:32,currentRingSize:256,cICON_SIZE_STANDARD:32,cRING_SIZE_MAX:256,isMapInitialized:!1,isMouseOnHUD:!1,isMapAJAXDone:!1,isAPIRetrieved_MAPFLOOR:!1,isMappingIconsGenerated:!1,isEventIconsGenerated:!1,cLEAFLET_PATH_OPACITY:.5,cMAP_BOUND:32768,cMAP_CENTER:[16384,16384],cMAP_MOUSEMOVE_RATE:100,cZoomLevelFactor:2,ZoomLevelEnum:{Min:0,Default:3,Space:3,Sky:5,Bird:6,Ground:7,Max:7},cZIndexRaise:999999,cZIndexBury:-999999,cMETER_TO_INCH:39.3701,cCIRCLE_RIGHT_DEGREE:90,cCIRCLE_HALF_DEGREE:180,cCIRCLE_FULL_DEGREE:360,cRADIAN_TO_DEGREE:180/Math.PI,GPSTimeout:{},PinPersonal:{},PinProgram:{},PinEvent:{},PinOver:{},PinCharacter:{},PinCamera:{},MappingEnum:{Sector:0,Waypoint:1,Landmark:2,Vista:3,Skill:4,Heart:5,EventIcon:6,EventRing:7},APIPOIEnum:{Sector:"sectors",Waypoint:"waypoint",Landmark:"landmark",Vista:"vista",Skill:"skill_challenges",Heart:"tasks"},PinEntities:new Array,DailyEntities:new Array,JPEntities:new Array,ChainPathEntities:new Array,isShowingIconsForDaily:!0,isShowingIconsForResource:!1,isShowingIconsForJP:!0,isShowingIconsForCollectible:!1,SubmapEntities:new Array,SubmapTemp:{},DryTopEventIcons:new Array,DryTopEventRings:new Array,DryTopEventActive:new Array,isZoneValid:function(e){return void 0===M.ZoneAssociations[e]?!1:!0},getZoneFromID:function(e){return M.Zones[M.ZoneAssociations[e]]},getZoneName:function(e){var t;if("string"==typeof e&&M.Zones[e])t=M.Zones[e];else{if(!e.name)return"nozonename";t=e}return M.isAPIRetrieved_MAPFLOOR&&D.isLanguageSecondary()===!0?t["name_"+D.getFullySupportedLanguage()]:t.name},getRegionName:function(e){var t=M.Regions[e];return D.isLanguageSecondary()===!0?t[D.getFullySupportedLanguage()]:t[O.OptionEnum.Language.Default]},initializeMap:function(){M.Map=L.map("paneMap",{minZoom:M.ZoomLevelEnum.Min,maxZoom:M.ZoomLevelEnum.Max,inertiaThreshold:100,doubleClickZoom:!1,touchZoom:!1,zoomControl:I.isOnSmallDevice,attributionControl:!1,crs:L.CRS.Simple}).setView([-128,128],M.ZoomLevelEnum.Default),I.isOnSmallDevice&&M.Map.dragging.disable(),L.tileLayer(U.URL_API.Tiles,{continuousWorld:!0}).addTo(M.Map);for(var e in M.Zones)M.Zones[e].ZoneEntities=new Array,M.Zones[e].center=M.getZoneCenter(e),M.Zones[e].nick=e;M.ZoneCurrent=M.Zones[M.cInitialZone],M.bindHUDEventCanceler(),P.generateSubmaps(),P.populateMap(),P.drawChainPaths(),M.Map.on("click",function(e){if(!M.isMouseOnHUD){var t=M.convertLCtoGC(e.latlng);$("#mapCoordinatesCopy").val("["+t[0]+", "+t[1]+"]").select()}}),M.Map.on("dblclick",function(e){M.isMouseOnHUD||M.PinPersonal.setLatLng(e.latlng)}),$("#mapCoordinatesCopy").onEnterKey(function(){var e=M.parseCoordinates($(this).val());e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),$("#mapCoordinatesCopy").val("["+e[0]+", "+e[1]+"]").select(),""!==e[0]&&2===e.length&&M.goToView(e,M.PinPersonal)}),$("#mapGPSButton").click(function(){M.goToPlayer(!0)}),$("#mapDisplayButton").click(function(){$("#panelRight").toggle(),M.refreshMap()}),$("#mapCompassButton").one("mouseenter",M.bindZoneList).click(function(){M.goToDefault()}),M.isMapInitialized=!0},refreshMap:function(){M.isMapInitialized&&M.Map.invalidateSize()},bindHUDEventCanceler:function(){var e=document.getElementById("paneHUD");e.onmouseover=function(){M.isMouseOnHUD=!0},e.onmouseout=function(){M.isMouseOnHUD=!1}},bindMapVisualChanges:function(){M.Map.on("mousemove",$.throttle(M.cMAP_MOUSEMOVE_RATE,function(e){M.isMouseOnHUD||M.showCurrentZone(M.convertLCtoGC(e.latlng))})),M.Map.on("zoomstart",function(){M.SubmapEntities.length>0&&M.setEntityGroupDisplay(M.SubmapEntities,"hide")}),M.Map.on("zoomend",function(){M.adjustZoomMapping(),M.adjustZoomDryTop()})},showCurrentZone:function(e){if(document.getElementById("mapCoordinatesMouse").value=e[0]+", "+e[1],!(e[0]>=M.ZoneCurrent.rect[0][0]&&e[1]>=M.ZoneCurrent.rect[0][1]&&e[0]<=M.ZoneCurrent.rect[1][0]&&e[1]<=M.ZoneCurrent.rect[1][1])){var t,n,i,a,r,o=M.ZoneCurrent.nick,s="";for(t in M.Zones)if(e[0]>=M.Zones[t].rect[0][0]&&e[1]>=M.Zones[t].rect[0][1]&&e[0]<=M.Zones[t].rect[1][0]&&e[1]<=M.Zones[t].rect[1][1]){for(n in M.Zones[o].ZoneEntities)M.Zones[o].ZoneEntities[n]._icon.style.display="none";M.ZoneCurrent=M.Zones[t],s=M.getZoneName(M.ZoneCurrent),document.getElementById("mapCoordinatesName").value=s;for(i in M.ZoneCurrent.ZoneEntities)a=M.ZoneCurrent.ZoneEntities[i],r=a.options.mappingtype,(r===M.MappingEnum.Waypoint&&O.Options.bol_displayWaypoints||r===M.MappingEnum.Landmark&&O.Options.bol_displayPOIs||r===M.MappingEnum.Vista&&O.Options.bol_displayVistas||r===M.MappingEnum.Skill&&O.Options.bol_displaySkills||r===M.MappingEnum.Heart&&O.Options.bol_displayHearts||r===M.MappingEnum.Sector&&O.Options.bol_displaySectors||r===M.MappingEnum.EventIcon&&O.Options.bol_displayEvents||r===M.MappingEnum.EventRing&&O.Options.bol_displayEvents)&&(a._icon.style.display="block");M.adjustZoomMapping();break}}},refreshCurrentZone:function(){var e=M.ZoneCurrent.center;M.showCurrentZone(M.getZoneCenter("dry")),M.showCurrentZone(M.getZoneCenter("rata")),M.showCurrentZone(e)},getZoneCenter:function(e){var t=M.Zones[e].rect,n=t[0][0]+~~((t[1][0]-t[0][0])/2),i=t[0][1]+~~((t[1][1]-t[0][1])/2);return[n,i]},getEventCenter:function(e){var t=M.getZoneFromID(e.map_id),n=e.location.center;return M.convertEventCoord(n,t)},scaleDimension:function(e,t){return t=t||M.Map.getZoom(),parseInt(e/Math.pow(M.cZoomLevelFactor,M.ZoomLevelEnum.Max-t))},adjustZoomMapping:function(){var e,t,n,i,a,r,o,s,c=M.Map.getZoom();switch(c){case 7:n=40,i=32,a=32,r=256;break;case 6:n=32,i=24,a=24,r=128;break;case 5:n=26,i=16,a=16,r=64;break;case 4:n=20,i=0,a=12,r=32;break;case 3:n=16,i=0,a=0,r=0;break;default:n=0,i=0,a=0,r=0}switch(c){case 7:o="28px",s=.9;break;case 6:o="20px",s=.6;break;case 5:o="16px",s=.3;break;default:o="0px",s=0}for(e in M.ZoneCurrent.ZoneEntities)switch(t=M.ZoneCurrent.ZoneEntities[e],t.options.mappingtype){case M.MappingEnum.Waypoint:M.changeMarkerIcon(t,U.URL_IMG.Waypoint,n);break;case M.MappingEnum.Landmark:M.changeMarkerIcon(t,U.URL_IMG.Landmark,i),t._icon.style.opacity=c<M.ZoomLevelEnum.Max?.6:.8;break;case M.MappingEnum.Vista:M.changeMarkerIcon(t,U.URL_IMG.Vista,i);break;case M.MappingEnum.Skill:M.changeMarkerIcon(t,U.URL_IMG.Skill,i);break;case M.MappingEnum.Heart:M.changeMarkerIcon(t,U.URL_IMG.Heart,i);break;case M.MappingEnum.Sector:t._icon.style.fontSize=o,t._icon.style.opacity=s,t._icon.style.zIndex=M.cZIndexBury+1,O.Options.bol_displaySectors&&(t._icon.style.display="table");break;case M.MappingEnum.EventIcon:M.changeMarkerIcon(t,t._icon.src,a),t._icon.style.zIndex=1e3;break;case M.MappingEnum.EventRing:M.changeMarkerIcon(t,t._icon.src,r),t._icon.style.zIndex=-1e4}M.burySubmaps()},adjustZoomDryTop:function(){var e,t,n,i,a,r=M.Map.getZoom();switch(r){case 7:M.currentIconSize=32;break;case 6:M.currentIconSize=28;break;case 5:M.currentIconSize=24;break;case 4:M.currentIconSize=20;break;case 3:M.currentIconSize=16;break;default:M.currentIconSize=0}if(M.SubmapEntities.length>0){M.setEntityGroupDisplay(M.SubmapEntities,"show");for(e in M.SubmapEntities)n=M.SubmapEntities[e],i=M.scaleDimension(n.spatiality.maxwidth),a=M.scaleDimension(n.spatiality.maxheight),n.setIcon(new L.icon({iconUrl:n._icon.src,iconSize:[i,a],iconAnchor:[0,0]})),M.SubmapEntities[e]._icon.style.zIndex=M.cZIndexBury}if(M.DryTopEventIcons.length>0){M.currentRingSize=M.scaleDimension(M.cRING_SIZE_MAX);for(e in M.DryTopEventIcons)t=M.DryTopEventIcons[e],M.changeMarkerIcon(t,t._icon.src,M.currentIconSize),t=M.DryTopEventRings[e],M.changeMarkerIcon(t,t._icon.src,M.currentRingSize),M.DryTopEventIcons[e]._icon.style.zIndex=1e3,M.DryTopEventRings[e]._icon.style.zIndex=1}},burySubmaps:function(){if(M.SubmapEntities.length>0)for(var e in M.SubmapEntities)M.SubmapEntities[e]._icon.style.zIndex=M.cZIndexBury},changeMarkerIcon:function(e,t,n){void 0===n&&(n=M.cICON_SIZE_STANDARD),e.setIcon(new L.icon({iconUrl:t,iconSize:[n,n],iconAnchor:[n/2,n/2]}))},setEntityGroupDisplay:function(e,t){var n,i,a;i=t===!1||"hide"===t||0>t?"none":"block";for(n in e)a=e[n],void 0!==a._container?a._container.style.display=i:a._icon.style.display=i},movePin:function(e,t){void 0===t&&(t=[0,0]),e.setLatLng(M.convertGCtoLC(t)),e._icon.style.zIndex=M.cZIndexRaise},goToView:function(e,t,n){void 0===t&&(t=M.PinProgram),null!==t&&M.movePin(t,e);var i;i=n?n:M.ZoomLevelEnum.Ground,M.Map.setView(M.convertGCtoLC(e),i),M.showCurrentZone(e)},goToZone:function(e,t){var n=M.getZoneCenter(e);M.showCurrentZone(n),M.goToView(n,null,t)},goToPlayer:function(e){if(void 0!==GPSPositionArray&&null!==GPSPositionArray&&3===GPSPositionArray.length&&void 0!==GPSIdentityJSON&&null!==GPSIdentityJSON){if(!M.isZoneValid(GPSIdentityJSON.map_id))return M.movePin(M.PinCharacter),void M.movePin(M.PinCamera);var t=M.convertPlayerCoord(GPSPositionArray,GPSIdentityJSON.map_id);if(!(t[0]>M.cMAP_BOUND||t[0]<=0||t[1]>M.cMAP_BOUND||t[1]<=0)){(O.Options.bol_followCharacter||e)&&M.goToView(t,null,M.Map.getZoom()),O.Options.bol_displayCharacter&&(M.movePin(M.PinCharacter,t),M.movePin(M.PinCamera,t),M.PinCamera._icon.style.zIndex=M.cZIndexBury);var n=-M.convertPlayerAngle(GPSDirectionArray),i=-M.convertPlayerAngle(GPSCameraArray),a=M.PinCharacter._icon.style.transform.toString(),r=M.PinCamera._icon.style.transform.toString();-1===a.indexOf("rotate")&&(M.PinCharacter._icon.style.transform=a+" rotate("+n+"deg)"),-1===r.indexOf("rotate")&&(M.PinCamera._icon.style.transform=r+" rotate("+i+"deg)")}}},goToDefault:function(){M.Map.setView(M.convertGCtoLC(M.cMAP_CENTER),M.ZoomLevelEnum.Default)},goToURLCoords:function(){var e,t=U.Args[U.KeyEnum.Go],n=[];if(t)if(n=M.parseCoordinates(t),2===n.length)isFinite(n[0])&&isFinite(n[1])&&M.goToView(n,M.PinPersonal);else if(n.length>=3){if(isFinite(n[0])&&isFinite(n[1])&&isFinite(n[2])){var i=M.ZoomLevelEnum.Max-T.wrapInteger(n[2],M.ZoomLevelEnum.Max);M.goToView([n[0],n[1]],M.PinPersonal,i)}}else e=t.toLowerCase(),M.Zones[e]&&M.goToView(M.getZoneCenter(e),null,M.ZoomLevelEnum.Bird);U.Args[U.KeyEnum.Go]=null},convertGCtoLC:function(e){return M.Map.unproject(e,M.Map.getMaxZoom())},convertGCtoLCMulti:function(e,t){t=t||0;var n,i=new Array;for(n=t;n<e.length;n++)i.push(M.convertGCtoLC(e[n]));return i},convertLCtoGC:function(e){var t=M.Map.project(e,M.ZoomLevelEnum.Max);return[Math.floor(t.x),Math.floor(t.y)]},convertEventCoord:function(e,t){var n=t.continent_rect,i=t.map_rect;return[~~(n[0][0]+(n[1][0]-n[0][0])*(e[0]-i[0][0])/(i[1][0]-i[0][0])),~~(n[0][1]+(n[1][1]-n[0][1])*(1-(e[1]-i[0][1])/(i[1][1]-i[0][1])))]},convertPlayerCoord:function(e,t){var n=M.getZoneFromID(t),i=new Array(3);return i[0]=e[0]*M.cMETER_TO_INCH,i[1]=e[2]*M.cMETER_TO_INCH,i[2]=e[1]*M.cMETER_TO_INCH,M.convertEventCoord(i,n)},convertPlayerAngle:function(e){var t=e[0],n=e[2];return n>=0?~~(Math.acos(t)*M.cRADIAN_TO_DEGREE):~~(M.cCIRCLE_FULL_DEGREE-Math.acos(t)*M.cRADIAN_TO_DEGREE)},parseCoordinates:function(e){var t=e.replace(/[^\d,-.]/g,"");return t.split(",")},getElementCoordinates:function(e){return M.parseCoordinates(e.attr("data-coord"))},bindMapLinks:function(e){$(e+" ins").each(function(){$(this).text("["+$(this).text()+"]"),M.bindMapLinkBehavior($(this),M.PinProgram)})},bindMapLinkBehavior:function(e,t,n){e.click(function(){var e=M.getElementCoordinates($(this));M.goToView(e,t,n)}),e.mouseover(function(){var e=M.getElementCoordinates($(this));M.movePin(M.PinOver,e)}),e.mouseout(function(){M.movePin(M.PinOver)})},bindMarkerZoomBehavior:function(e,t){e.on(t,function(e){M.Map.getZoom()===M.ZoomLevelEnum.Max?M.Map.setZoom(M.ZoomLevelEnum.Default):M.Map.setView(e.latlng,M.ZoomLevelEnum.Max)})},bindMappingZoomBehavior:function(e,t){e.on(t,function(e){M.Map.getZoom()===M.ZoomLevelEnum.Max?M.Map.setZoom(M.ZoomLevelEnum.Sky):M.Map.setView(e.latlng,M.ZoomLevelEnum.Max)})},bindZoneList:function(){$("#mapZoneList li").each(function(){var e=$(this).attr("data-zone");$(this).text(M.getZoneName(e)),$(this).attr("data-coord",M.getZoneCenter(e).toString()),M.bindMapLinkBehavior($(this),null,M.ZoomLevelEnum.Sky)}),$("#mapZoneList h2").each(function(){var e=$(this).attr("data-region");$(this).text(M.getRegionName(e))})},displayIcons:function(e,t){var n;if(void 0===e||null===e)M.isShowingIconsForDaily&&$("#mapToggle_Daily").trigger("click"),M.isShowingIconsForResource?$("#mapToggle_Resource").trigger("click"):$("#mapToggle_Resource").trigger("click").trigger("click"),M.isShowingIconsForCollectible?$("#mapToggle_Collectible").trigger("click"):$("#mapToggle_Collectible").trigger("click").trigger("click"),M.isShowingIconsForJP&&$("#mapToggle_JP").trigger("click");else if(t){if(M["isShowingIconsFor"+e]||$("#mapToggle_"+e).trigger("click"),I.ArticleCurrent>=0){switch(e){case"Collectible":for(n in M.Collectibles)"Collectible"+I.ArticleCurrent!==n&&$("#ned_"+n).trigger("click")}U.Args[U.KeyEnum.Article]=null}}else"Resource"===e?M["isShowingIconsFor"+e]?$("#mapToggle_"+e).trigger("click"):$("#mapToggle_"+e).trigger("click").trigger("click"):"Collectible"===e?M["isShowingIconsFor"+e]?$("#mapToggle_"+e).trigger("click"):$("#mapToggle_"+e).trigger("click").trigger("click"):M["isShowingIconsFor"+e]&&$("#mapToggle_"+e).trigger("click")},tickGPS:function(){(O.Options.bol_followCharacter||O.Options.bol_displayCharacter)&&(M.goToPlayer(),window.clearTimeout(M.GPSTimeout),M.GPSTimeout=setTimeout(M.tickGPS,O.Options.int_msecGPSRefresh))}},P={generateSubmaps:function(){},createSubmap:function(e,t,n){var i=M.scaleDimension(e[0]),a=M.scaleDimension(e[1]),r=L.marker(M.convertGCtoLC([t[0],t[1]]),{icon:L.icon({iconUrl:n,iconSize:[i,a],iconAnchor:[0,0]}),draggable:!1,clickable:!1}).addTo(M.Map);return r.spatiality={maxwidth:e[0],maxheight:e[1]},M.SubmapEntities.push(r),r},createPin:function(e,t){return void 0===t&&(t=[32,32]),L.marker(M.convertGCtoLC([0,0]),{icon:L.icon({iconUrl:e,iconSize:t,iconAnchor:[t[0]/2,t[1]/2]}),draggable:!0}).addTo(M.Map)},populateMap:function(){$.getJSON(U.URL_API.MapFloor,function(e){var t,n,i,a,r,o,s,c,l,u,h,p;for(n in e.regions){i=e.regions[n];for(a in i.maps)if(M.ZoneAssociations[a]){for(r=i.maps[a],D.isLanguageSecondary()&&(M.getZoneFromID(a)["name_"+D.getFullySupportedLanguage()]=r.name),M.getZoneFromID(a).map_rect=r.map_rect,M.getZoneFromID(a).continent_rect=r.continent_rect,s=r.points_of_interest.length,t=0;s>t;t++){switch(o=r.points_of_interest[t],o.type){case M.APIPOIEnum.Waypoint:h=M.MappingEnum.Waypoint,l=U.URL_IMG.Waypoint,u="mapWp",p=o.name;break;case M.APIPOIEnum.Landmark:if(O.Options.bol_showWorldCompletion===!1)continue;h=M.MappingEnum.Landmark,l=U.URL_IMG.Landmark,u="mapPoi",p=o.name;break;case M.APIPOIEnum.Vista:if(O.Options.bol_showWorldCompletion===!1)continue;h=M.MappingEnum.Vista,l=U.URL_IMG.Vista,u="mapPoi",p=D.getPhrase("Vista");break;default:continue}switch(c=L.marker(M.convertGCtoLC(o.coord),{title:"<span class='"+u+"'>"+p+"</span>",entityname:o.name,mappingtype:h,icon:L.icon({iconUrl:l,iconSize:[16,16],iconAnchor:[8,8]}),link:U.getChatlinkFromPoiID(o.poi_id)}).addTo(M.Map),c._icon.style.display="none",o.type){case"waypoint":c.on("mouseout",function(){this._icon.src=U.URL_IMG.Waypoint}),c.on("mouseover",function(){this._icon.src=U.URL_IMG.WaypointOver});break;case"landmark":c.on("mouseout",function(){this._icon.src=U.URL_IMG.Landmark}),c.on("mouseover",function(){this._icon.src=U.URL_IMG.LandmarkOver})}"waypoint"===o.type||"landmark"===o.type?(c.on("click",function(){$("#mapCoordinatesCopy").val(this.options.link).select(),$("#mapCoordinatesName").val(this.options.entityname)}),M.bindMappingZoomBehavior(c,"dblclick")):M.bindMappingZoomBehavior(c,"click"),M.getZoneFromID(a).ZoneEntities.push(c)}if(O.Options.bol_showWorldCompletion){for(s=r.skill_challenges.length,t=0;s>t;t++)o=r.skill_challenges[t],c=L.marker(M.convertGCtoLC(o.coord),{title:"<span class='mapPoi'>"+D.getPhrase("Skill Challenge")+"</span>",mappingtype:M.MappingEnum.Skill,icon:L.icon({iconUrl:U.URL_IMG.Skill,iconSize:[16,16],iconAnchor:[8,8]})}).addTo(M.Map),c._icon.style.display="none",M.bindMappingZoomBehavior(c,"click"),M.getZoneFromID(a).ZoneEntities.push(c);
for(s=r.tasks.length,t=0;s>t;t++)o=r.tasks[t],c=L.marker(M.convertGCtoLC(o.coord),{title:"<span class='mapPoi'>"+o.objective+" ("+o.level+")</span>",task:o.objective,mappingtype:M.MappingEnum.Heart,icon:L.icon({iconUrl:U.URL_IMG.Heart,iconSize:[16,16],iconAnchor:[8,8]})}).addTo(M.Map),c._icon.style.display="none",c.on("click",function(){var e=this.options.task;e.indexOf(".")===e.length-1&&(e=e.slice(0,-1)),U.openExternalURL(U.getWikiLanguageLink(e))}),M.getZoneFromID(a).ZoneEntities.push(c);for(s=r.sectors.length,t=0;s>t;t++)o=r.sectors[t],c=L.marker(M.convertGCtoLC(o.coord),{clickable:!1,mappingtype:M.MappingEnum.Sector,icon:L.divIcon({className:"mapSec",html:"<span class='mapSecIn'>"+o.name+"</span>",iconSize:[512,64],iconAnchor:[256,32]})}).addTo(M.Map),c._icon.style.display="none",M.getZoneFromID(a).ZoneEntities.push(c);M.isMappingIconsGenerated=!0}}}}).done(function(){M.isAPIRetrieved_MAPFLOOR=!0,O.Options.bol_showChainPaths===!0&&I.PageCurrent!==I.PageEnum.Map&&M.setEntityGroupDisplay(M.ChainPathEntities,"show"),O.Options.bol_displayEvents===!1&&P.donePopulation()}).fail(function(){I.ModeCurrent===I.ModeEnum.Website&&I.write("Guild Wars 2 API server is unreachable.<br />Reasons could be:<br />- The GW2 server is down for maintenance.<br />- Your browser is too old (if IE then need 11+).<br />- Your computer's time is out of sync.<br />- This website's code encountered a bug.<br />Map features will be limited.<br />",15)}).always(function(){O.Options.bol_displayEvents===!0?P.populateEvents():P.finishPopulation()}),M.PinPersonal=P.createPin("img/map/pin_white.png"),M.PinProgram=P.createPin("img/map/pin_blue.png"),M.PinEvent=P.createPin("img/map/pin_green.png"),M.PinOver=P.createPin("img/map/pin_over.png",[128,128]),M.PinCharacter=P.createPin("img/map/pin_character.png",[40,40]),M.PinCamera=L.marker(M.convertGCtoLC([0,0]),{icon:L.icon({iconUrl:"img/map/pin_camera.png",iconSize:[256,256],iconAnchor:[128,128]}),clickable:!1}).addTo(M.Map),M.PinEntities.push(M.PinPersonal),M.PinEntities.push(M.PinProgram),M.PinEntities.push(M.PinEvent),M.PinEntities.push(M.PinOver),M.PinEntities.push(M.PinCharacter),M.PinEntities.push(M.PinCamera);for(var e in M.PinEntities)M.PinEntities[e].on("click",function(){var e=M.convertLCtoGC(this.getLatLng());$("#mapCoordinatesCopy").val("["+e[0]+", "+e[1]+"]").select()}),M.PinEntities[e].on("dblclick",function(){M.movePin(this)})},populateEvents:function(){var e=function(e){return-1!==e.indexOf("guild")||-1!==e.indexOf("subdue")||-1!==e.indexOf("skill")||-1!==e.indexOf("offshoot")||-1!==e.indexOf("vigil en")||-1!==e.indexOf("haunted")?!0:!1},t=function(e){return-1!==e.indexOf("free")?"img/event/release.png":-1!==e.indexOf("rescue")?"img/event/release.png":-1!==e.indexOf("capture")?"img/event/flag.png":-1!==e.indexOf("retake")?"img/event/flag.png":-1!==e.indexOf("reclaim")?"img/event/flag.png":-1!==e.indexOf("liberate")?"img/event/flag.png":-1!==e.indexOf("protect")?"img/event/shield.png":-1!==e.indexOf("defend")?"img/event/shield.png":-1!==e.indexOf("escort")?"img/event/shield.png":-1!==e.indexOf("kill")?"img/event/boss.png":-1!==e.indexOf("slay")?"img/event/boss.png":-1!==e.indexOf("defeat")?"img/event/boss.png":-1!==e.indexOf("collect")?"img/event/collect.png":-1!==e.indexOf("help")?"img/event/star.png":-1!==e.indexOf("destroy")?"img/event/cog.png":-1!==e.indexOf("gather")?"img/event/collect.png":-1!==e.indexOf("bring")?"img/event/collect.png":-1!==e.indexOf("recover")?"img/event/collect.png":-1!==e.indexOf("return")?"img/event/collect.png":-1!==e.indexOf("retrieve")?"img/event/collect.png":-1!==e.indexOf("burglar")?"img/event/fist.png":"img/event/swords.png"},n=function(e){var t=e.location.radius;switch(e.location.type){case"sphere":return 2e3>t?"img/ring/c_s.png":"img/ring/c_m.png";case"cylinder":return"img/ring/e_m_h.png";case"poly":return"img/ring/e_l_h.png"}return"img/ring/c_m.png"};$.getJSON(U.URL_API.EventNames,function(e){var t;for(t in e)M.Events[e[t].id]={},M.Events[e[t].id].name=e[t].name}).done(function(){$.getJSON(U.URL_API.EventDetails,function(i){var a,r,o,s,c,l,u;for(a in i.events)r=i.events[a],o=r.name.toLowerCase(),s=void 0!==M.Events[a]?M.Events[a].name:r.name,u=M.getZoneFromID(r.map_id),void 0===M.Events[a]||void 0===u||e(o)||988===r.map_id||50===r.map_id||(l=M.convertGCtoLC(M.getEventCenter(r)),c=L.marker(l,{clickable:!1,mappingtype:M.MappingEnum.EventRing,icon:L.icon({iconUrl:n(r),iconSize:[256,256],iconAnchor:[128,128]})}).addTo(M.Map),c._icon.style.display="none",u.ZoneEntities.push(c),c=L.marker(l,{title:"<span class='mapPoi'>"+s+" ("+r.level+")</span>",mappingtype:M.MappingEnum.EventIcon,icon:L.icon({iconUrl:t(o),iconSize:[48,48],iconAnchor:[24,24]})}).addTo(M.Map),c._icon.style.display="none",M.bindMappingZoomBehavior(c,"click"),u.ZoneEntities.push(c));M.isEventIconsGenerated=!0}).done(function(){P.donePopulation()}).fail(function(){}).always(function(){P.finishPopulation()})}).fail(function(){P.finishPopulation()}).always(function(){})},donePopulation:function(){I.qTip.init(".leaflet-marker-icon"),O.Options.bol_tourPrediction&&!O.Options.bol_followCharacter&&I.PageCurrent===I.PageEnum.Chains&&void 0===U.Args[U.KeyEnum.Go]&&(M.showCurrentZone(M.getZoneCenter(M.cInitialZone)),$("#chnEvent_"+C.CurrentChainSD.nexus+"_"+C.CurrentChainSD.CurrentPrimaryEvent.num).trigger("click"))},finishPopulation:function(){M.isMapAJAXDone=!0,M.bindMapVisualChanges(),M.adjustZoomMapping(),M.adjustZoomDryTop(),M.goToURLCoords(),M.tickGPS()},drawChainPaths:function(){var e,t,n,i,a,r,o;for(e in C.Chains){for(n=C.Chains[e],t=0;t<n.primaryEvents.length;t++){switch(a=n.primaryEvents[t],t){case 0:r="red";break;case 1:r="orange";break;case 2:r="yellow";break;case 3:r="lime";break;case 4:r="cyan";break;case 5:r="blue";break;case 6:r="violet";break;case 7:r="purple";break;default:r="white"}o=M.convertGCtoLCMulti(a.path,1),M.ChainPathEntities.push(L.polyline(o,{color:r}).addTo(M.Map))}var s;for(t in n.events)i=n.events[t],s=i.num,-1!==s.indexOf(".")&&(s=s.replace(".","\\.")),$("#chnEvent_"+n.nexus+"_"+s).each(function(){var e=i.path[0];$(this).attr("data-coord",e[0]+","+e[1]),$(this).attr("data-eventindex",t),M.bindMapLinkBehavior($(this),M.PinEvent)}),n.series===C.ChainSeriesEnum.DryTop&&(i.eventring=L.marker(M.convertGCtoLC(i.path[0]),{clickable:!1,icon:L.icon({iconUrl:"img/ring/"+i.ring+I.cPNG,iconSize:[32,32],iconAnchor:[16,16]})}).addTo(M.Map),i.eventicon=L.marker(M.convertGCtoLC(i.path[0]),{title:"<span class='mapEvent'>"+D.getEventName(i)+"</span>",icon:L.icon({iconUrl:"img/event/"+i.icon+I.cPNG,iconSize:[16,16],iconAnchor:[8,8]})}).addTo(M.Map),i.eventring._icon.style.display="none",i.eventicon._icon.style.display="none",M.DryTopEventRings.push(i.eventring),M.DryTopEventIcons.push(i.eventicon))}M.setEntityGroupDisplay(M.ChainPathEntities,"hide")},generateAndInitializeDailies:function(){P.shiftLoginTrack(),$("#mapLoginTrack img").each(function(){$(this).click(function(){P.shiftLoginValue(parseInt($(this).data("i")))}).mouseenter(function(){$("#mapLoginRecordHover").text("("+(parseInt($(this).data("i"))+1)+")")})}),$("#mapLoginTrack").mouseleave(function(){$("#mapLoginRecordHover").text("")}),$(".mapDailyLists dt").each(function(){M.bindMapLinkBehavior($(this),null);var e=M.getElementCoordinates($(this)),t=U.getSubstringFromHTMLID($(this).parent()),n=L.marker(M.convertGCtoLC(e),{title:"<div class='mapLoc'><dfn>Daily:</dfn> "+t+"</div>"}).addTo(M.Map);n.setIcon(new L.icon({iconUrl:"img/daily/"+t.toLowerCase()+I.cPNG,iconSize:[32,32],iconAnchor:[16,16]})),n._icon.style.opacity="0.9",M.bindMarkerZoomBehavior(n,"click"),M.DailyEntities.push(n)}),$("#mapToggle_Daily").click(function(){M.isShowingIconsForDaily=!M.isShowingIconsForDaily,M.setEntityGroupDisplay(M.DailyEntities,M.isShowingIconsForDaily)}),I.qTip.init("#mapLoginTrack img")},shiftLoginTrack:function(){var e=28,t=1418774400,n=~~((T.getUNIXSeconds()-t)/T.cSECONDS_IN_DAY),i=T.wrapInteger(n-O.Options.int_shiftLogin,e),a=T.wrapInteger(n,e),r=0,o=0;$("#mapLoginTrack img").each(function(){$(this).css({"border-radius":"auto",opacity:.3}).removeClass("mapLoginCurrent mapLoginOfficial").data("i",o),o===a&&($(this).addClass("mapLoginOfficial"),T.loginTrackOfficial=o),o++}),$("#mapLoginTrack img").each(function(){return r===i+1?!1:(r===i&&$(this).addClass("mapLoginCurrent"),$(this).css({opacity:1}),void r++)}),$("#mapLoginRecordCurrent").text(i+1+" / "+e)},shiftLoginValue:function(e){var t=28,n=T.wrapInteger(T.loginTrackOfficial-e,t);$("#opt_int_shiftLogin").val(n).trigger("change"),P.shiftLoginTrack()},generateAndInitializeResourceNodes:function(){M.Resources=GW2T_RESOURCE_DATA;var e,t,n,i,a=function(e,t){e.setIcon(new L.icon({iconUrl:"img/node/"+t.toLowerCase()+I.cPNG,iconSize:[32,32],iconAnchor:[16,16]})),e._icon.style.borderRadius="16px",e._icon.style.opacity="0.9",e._icon.style.border="2px solid lime",M.bindMarkerZoomBehavior(e,"click")};for(e in M.Resources)if(n=M.Resources[e],n.NodeEntities=new Array,void 0!==n.nodes)for(t in n.nodes)i=L.marker(M.convertGCtoLC(n.nodes[t])).addTo(M.Map),a(i,e),n.approx===!0&&(i._icon.style.border="2px dotted lime"),n.NodeEntities.push(i);else if(void 0!==n.zones)for(t in n.zones){var r=n.zones[t],o=M.getZoneCenter(r);o[0]+=n.offset[0],o[1]+=n.offset[1],i=L.marker(M.convertGCtoLC(o)).addTo(M.Map),a(i,e),i._icon.style.border="2px dashed lime",n.NodeEntities.push(i)}for(e in M.Resources)n=M.Resources[e],$("#mapResource_"+n.type).append("<label><input id='nod_"+e+"' type='checkbox' /> <img src='img/node/"+e.toLowerCase()+I.cPNG+"' /> "+e+"</label>");for(e in M.Resources)$("#nod_"+e).change(function(){var e=U.getSubstringFromHTMLID($(this));M.setEntityGroupDisplay(M.Resources[e].NodeEntities,$(this).prop("checked"))});$("#mapToggle_Resource").click(function(){M.isShowingIconsForResource=!M.isShowingIconsForResource;for(e in M.Resources)$("#nod_"+e).prop("checked",M.isShowingIconsForResource),M.setEntityGroupDisplay(M.Resources[e].NodeEntities,M.isShowingIconsForResource)})},styleJPMarkers:function(e,t){var n="2px solid lime";switch(t){case 1:n="2px solid orange";break;case 2:n="2px solid red"}e._icon.style.border=n},generateAndInitializeJPs:function(){X.Checklists.JP.length=$(".mapJPList dt").length;var e,t=function(e,t,n){var i=M.getElementCoordinates(e),a=L.marker(M.convertGCtoLC(i),{id:t,dif:n,title:"<div class='mapLoc'><dfn>JP:</dfn> "+e.text()+"<img src='"+U.getImageHosted(e.data("img"))+"' /></div>"}).addTo(M.Map);a.setIcon(new L.icon({iconUrl:"img/ui/jp.png",iconSize:[32,32],iconAnchor:[16,16]})),a._icon.style.borderRadius="50%",a._icon.style.opacity="0.9",P.styleJPMarkers(a,n),M.JPEntities.push(a)};for(e=0;e<X.Checklists.JP.length;e++)$("#mapJP_"+e).each(function(){t($(this),U.getSubstringFromHTMLID($(this)),$(this).parent().data("jpdif"))});$("#mapToggle_JP").click(function(){M.isShowingIconsForJP=!M.isShowingIconsForJP,M.setEntityGroupDisplay(M.JPEntities,M.isShowingIconsForJP)}),I.qTip.init(".leaflet-marker-icon")},generateAndInitializeJPChecklistHTML:function(){$(".mapJPList dt").each(function(){var e=$(this).text();$(this).after("&nbsp;<cite><a href='"+U.getYouTubeLink(e+" "+I.cGameNick)+"' target='_blank'>[Y]</a> <a href='"+U.getWikiLink(e)+"' target='_blank'>[W]</a></cite>"),M.bindMapLinkBehavior($(this),null),$(this).after("<label><input type='checkbox' id='mapJPCheck_"+U.getSubstringFromHTMLID($(this))+"' /></label>")}),U.convertExternalLink(".mapJPList a"),X.initializeChecklist(X.Checklists.JP,X.Checklists.JP.length);var e,t=function(){var e=X.countChecklist(X.Checklists.JP,X.ChecklistEnum.Checked),t=X.Checklists.JP.length;$("#mapJPCounter").text(e+"/"+t)};for(e=0;e<X.Checklists.JP.length;e++)$("#mapJPCheck_"+e).each(function(){var t=X.getChecklistItem(X.Checklists.JP,e,O.TypeEnum.isBoolean);$(this).prop("checked",t),t===!1?$(this).parent().prev().removeClass("mapJPListNameHover"):($(this).parent().prev().addClass("mapJPListNameHover"),M.JPEntities[e]._icon.style.border="2px solid black")}).change(function(){var e=X.getCheckboxEnumState($(this)),n=U.getSubintegerFromHTMLID($(this));e===X.ChecklistEnum.Unchecked?($(this).parent().prev().removeClass("mapJPListNameHover"),P.styleJPMarkers(M.JPEntities[n],M.JPEntities[n].options.dif)):($(this).parent().prev().addClass("mapJPListNameHover"),M.JPEntities[n]._icon.style.border="2px solid black"),X.setChecklistItem(X.Checklists.JP,n,e),t()}).parent().hover(function(){$(this).prev().css({"text-decoration":"underline"}).trigger("mouseenter")},function(){$(this).prev().css({"text-decoration":"none"}).trigger("mouseleave")}),function(e){M.JPEntities[e].on("click",function(){$("#mapJPCheck_"+e).trigger("click")}),M.JPEntities[e].on("dblclick",function(){M.Map.getZoom()===M.ZoomLevelEnum.Max?M.Map.setZoom(M.ZoomLevelEnum.Default):$("#mapJP_"+e).trigger("click")})}(e);$("#mapJPUncheck").click(function(){var n="";for(e=0;e<X.Checklists.JP.length;e++)$("#mapJPCheck_"+e).prop("checked",!1).parent().prev().removeClass("mapJPListNameHover"),P.styleJPMarkers(M.JPEntities[e],M.JPEntities[e].options.dif),n+="0";X.Checklists.JP.value=n,localStorage[X.Checklists.JP.key]=X.Checklists.JP.value,t()}),t()},styleCollectibleMarker:function(e,t){switch(t){case X.ChecklistEnum.Unfound:e._icon.style.border="2px solid lime";break;case X.ChecklistEnum.Tracked:e._icon.style.border="2px solid red";break;case X.ChecklistEnum.Found:e._icon.style.border="2px solid white"}},generateAndInitializeCollectibles:function(){M.Collectibles=GW2T_COLLECTIBLE_DATA;var e,t,n,i,a,r,o,s,c,l=function(e,t,n,i){e.setIcon(new L.divIcon({className:"mapNeedle",html:"<span style='color:"+i+"'>"+t+"</span>",iconSize:[16,16],iconAnchor:[8,8]})),e._icon.style.borderRadius="16px",e._icon.style.opacity="0.9",P.styleCollectibleMarker(e,n),e.on("click",function(){var e=this.options.needleType,t=this.options.needleKey,n=this.options.needleIndex,i=X.trackChecklistItem(X.Checklists[e],n);P.styleCollectibleMarker(this,i);var a=X.getCheckedIndexes(X.Checklists[e]);0===a.length?U.updateQueryString():U.updateAddressBar("?"+t+"="+a)})};for(e in M.Collectibles){i=U.Args[X.Checklists[e].urlkey],X.Checklists[e].length=M.Collectibles[e].needles.length,X.initializeChecklist(X.Checklists[e],X.Checklists[e].length,i),a=M.Collectibles[e],a.NeedleEntities=new Array;for(t in a.needles)n=parseInt(t)+1,r=a.needles[t],o=X.getChecklistItem(X.Checklists[e],t),c="<div class='mapLoc'><dfn>"+a.name+":</dfn> #"+n,r.i?c+="<img src='"+U.getImageHosted(r.i)+"' />":r.t&&(c+="<br /><span class='mapTip'>"+r.t+" (User Contributed)</span>"),c+="</div>",s=L.marker(M.convertGCtoLC(r.c),{needleIndex:t,needleType:e,needleKey:X.Checklists[e].urlkey,title:c}).addTo(M.Map),l(s,n,o,a.color),X.Checklists[e].cushion.push(s),a.NeedleEntities.push(s);a=M.Collectibles[e],$("#mapCollectibleList").append("<div><label style='color:"+a.color+"'><input id='ned_"+e+"' type='checkbox' /> "+a.name+"</label><span class='cssRight'><cite><a href='"+U.getYouTubeLink(a.name+" "+I.cGameNick)+"'>[Y]</a>&nbsp;<a href='"+a.wiki+"'>[W]</a>&nbsp;<a href='"+a.credit+"'>[C]</a>&nbsp;&nbsp;-&nbsp;&nbsp;</cite><a id='nedUncheck_"+e+"' class='cssRight'>Reset</a></span></div>"),$("#ned_"+e).change(function(){var e=U.getSubstringFromHTMLID($(this));M.setEntityGroupDisplay(M.Collectibles[e].NeedleEntities,$(this).prop("checked"))}),$("#nedUncheck_"+e).click(function(){var e=U.getSubstringFromHTMLID($(this)),t=X.Checklists[e].cushion;for(var n in t)P.styleCollectibleMarker(t[n],X.ChecklistEnum.Unfound);X.clearChecklist(X.Checklists[e]),U.updateQueryString()})}I.qTip.init(".mapNeedle"),U.convertExternalLink("#mapCollectibleList cite a"),$("#mapToggle_Collectible").click(function(){M.isShowingIconsForCollectible=!M.isShowingIconsForCollectible;for(e in M.Collectibles)$("#ned_"+e).prop("checked",M.isShowingIconsForCollectible),M.setEntityGroupDisplay(M.Collectibles[e].NeedleEntities,M.isShowingIconsForCollectible)})}},T={DST_IN_EFFECT:0,SECONDS_TILL_RESET:0,TIMESTAMP_UNIX_SECONDS:0,cUTC_OFFSET_USER:0,cUTC_OFFSET_SERVER:-8,cUTC_OFFSET_HAWAII:-10,cUTC_OFFSET_EASTERN:-4,cMILLISECONDS_IN_SECOND:1e3,cSECONDS_IN_MINUTE:60,cSECONDS_IN_HOUR:3600,cSECONDS_IN_DAY:86400,cMINUTES_IN_HOUR:60,cMINUTES_IN_DAY:1440,cHOURS_IN_MERIDIEM:12,cHOURS_IN_DAY:24,cSECONDS_IN_TIMEFRAME:900,cMINUTES_IN_TIMEFRAME:15,cMINUTES_IN_EVENTFRAME:5,cNUM_TIMEFRAMES_IN_HOUR:4,cSECS_MARK_0:0,cSECS_MARK_1:900,cSECS_MARK_2:1800,cSECS_MARK_3:2700,cSECS_MARK_4:3599,cBASE_10:10,ReferenceEnum:{UTC:0,Local:1,Server:2},UnitEnum:{Milliseconds:0,Seconds:1,Minutes:2,Hours:3},loginTrackOfficial:0,Events:{numOfSets:7,en0:"Supplies@[&BJcHAAA=] Rustbucket@[&BJYHAAA=] TendrilW@[&BIYHAAA=] Shaman@[&BIsHAAA=] Victims@[&BIwHAAA=] Tootsie@[&BHYHAAA=] Crystals@[&BHIHAAA=] TendrilSE@[&BHMHAAA=]",en1:"Beetles@[&BJYHAAA=] Bridge@[&BIkHAAA=] Experiment@[&BIwHAAA=] Golem@[&BIoHAAA=] Nochtli@[&BHkHAAA=] COLOCAL@[&BHwHAAA=] Serene@[&BHQHAAA=] MineE@[&BHsHAAA=]",en2:"Suit@[&BJMHAAA=] Leyline@[&BIMHAAA=] Town@[&BH4HAAA=] Basket@[&BHMHAAA=] MineNE@[&BH0HAAA=]",en3:"Eway@[&BJcHAAA=] Giant@[&BIwHAAA=] Skritts@[&BIwHAAA=] Mites@[&BHUHAAA=] Haze@[&BHIHAAA=] Explosives@[&BH4HAAA=]",en4:"DEVOURER(2)@[&BHkHAAA=] Giant@[&BIwHAAA=]",en5:"Eway@[&BJcHAAA=] Chrii'kkt(4)@[&BIoHAAA=] Skritts@[&BIwHAAA=] Chickenado@[&BI4HAAA=] TWISTER(3)@[&BHoHAAA=] Haze@[&BHIHAAA=]",en6:"Beetle(5)@[&BJcHAAA=] Monster(4)@[&BHoHAAA=]",de0:"Vorräte@[&BJcHAAA=] Schrotteimer@[&BJYHAAA=] DschungelrankeW@[&BIYHAAA=] Schamanin@[&BIsHAAA=] Unfallopfer@[&BIwHAAA=] Tootsie@[&BHYHAAA=] Kristalle@[&BHIHAAA=] DschungelrankeSO@[&BHMHAAA=]",de1:"Käfern@[&BJYHAAA=] Rankenbrücke@[&BIkHAAA=] Experimente@[&BIwHAAA=] Golem@[&BIoHAAA=] Nochtli@[&BHkHAAA=] COLOCAL@[&BHwHAAA=] Serene@[&BHQHAAA=] MinenO@[&BHsHAAA=]",de2:"Aspektanzug@[&BJMHAAA=] Leylinien@[&BIMHAAA=] Kleinstadt@[&BH4HAAA=] Drachenkorb@[&BHMHAAA=] MinenNO@[&BH0HAAA=]",de3:"Eway@[&BJcHAAA=] Riesen@[&BIwHAAA=] Skritt@[&BIwHAAA=] Staubmilben@[&BHUHAAA=] Dunst@[&BHIHAAA=] Sprengstoff@[&BH4HAAA=]",de4:"VERSCHLINGER(2)@[&BHkHAAA=] Riesen@[&BIwHAAA=]",de5:"Eway@[&BJcHAAA=] Chrii'kkt(4)@[&BIoHAAA=] Skritt@[&BIwHAAA=] Hühnado@[&BI4HAAA=] STAUBWIRBELWIND(3)@[&BHoHAAA=] Dunst@[&BHIHAAA=]",de6:"Riesenkäfer(5)@[&BJcHAAA=] Staubmonster(4)@[&BHoHAAA=]",es0:"Suministros@[&BJcHAAA=] Chatarro@[&BJYHAAA=] ZarcilloO@[&BIYHAAA=] Chamán@[&BIsHAAA=] Víctimas@[&BIwHAAA=] Ñique@[&BHYHAAA=] Cristales@[&BHIHAAA=] ZarcilloSE@[&BHMHAAA=]",es1:"Escarabajos@[&BJYHAAA=] Puente@[&BIkHAAA=] Experimento@[&BIwHAAA=] Gólem@[&BIoHAAA=] Nochtli@[&BHkHAAA=] COLOCAL@[&BHwHAAA=] Serene@[&BHQHAAA=] MinaE@[&BHsHAAA=]",es2:"Traje@[&BJMHAAA=] Líneasley@[&BIMHAAA=] Villa@[&BH4HAAA=] Cestas@[&BHMHAAA=] MinaNE@[&BH0HAAA=]",es3:"Eway@[&BJcHAAA=] Gigante@[&BIwHAAA=] Skritt@[&BIwHAAA=] Ácaros@[&BHUHAAA=] Bruma@[&BHIHAAA=] Explosivos@[&BH4HAAA=]",es4:"DEVORADORA(2)@[&BHkHAAA=] Gigante@[&BIwHAAA=]",es5:"Eway@[&BJcHAAA=] Chrii'kkt(4)@[&BIoHAAA=] Skritt@[&BIwHAAA=] Pollonado@[&BI4HAAA=] HURACÁN(3)@[&BHoHAAA=] Bruma@[&BHIHAAA=]",es6:"Escarabajo(5)@[&BJcHAAA=] Monstruo(4)@[&BHoHAAA=]",fr0:"Provisions@[&BJcHAAA=] Tadrouille@[&BJYHAAA=] VrilleO@[&BIYHAAA=] Chamane@[&BIsHAAA=] Survivants@[&BIwHAAA=] Bipbip@[&BHYHAAA=] Cristales@[&BHIHAAA=] VrilleSE@[&BHMHAAA=]",fr1:"Scarabées@[&BJYHAAA=] Pont@[&BIkHAAA=] Expériences@[&BIwHAAA=] Golem@[&BIoHAAA=] Nochtli@[&BHkHAAA=] COLOCAL@[&BHwHAAA=] Serene@[&BHQHAAA=] MineE@[&BHsHAAA=]",fr2:"Combinaison@[&BJMHAAA=] Lignesforce@[&BIMHAAA=] Bourg@[&BH4HAAA=] Panier@[&BHMHAAA=] MineNE@[&BH0HAAA=]",fr3:"Eway@[&BJcHAAA=] Géant@[&BIwHAAA=] Skritts@[&BIwHAAA=] Acarides@[&BHUHAAA=] Haze@[&BHIHAAA=] Explosifs@[&BH4HAAA=]",fr4:"DÉVOREUSE(2)@[&BHkHAAA=] Géant@[&BIwHAAA=]",fr5:"Eway@[&BJcHAAA=] Chrii'kkt(4)@[&BIoHAAA=] Skritts@[&BIwHAAA=] Poulenade@[&BI4HAAA=] TORNADE(3)@[&BHoHAAA=] Haze@[&BHIHAAA=]",fr6:"Scarabée(5)@[&BJcHAAA=] Monstre(4)@[&BHoHAAA=]"},Schedule:{},Hourly:{},getCurrentDryTopEvents:function(e){e=e||0;var t=new Date,n=t.getUTCMinutes(),i=~~(n/T.cMINUTES_IN_EVENTFRAME)*T.cMINUTES_IN_EVENTFRAME+e*T.cMINUTES_IN_EVENTFRAME;return T.Hourly["t"+T.wrapInteger(i,T.cMINUTES_IN_HOUR)]+I.siteTagCurrent},initializeHourlyDryTop:function(){if(!(C.DryTopChains.length<=0)){var e,t=O.OptionEnum.Language.Default;for(D.isLanguageFullySupported()&&(t=O.Options.enu_Language),e=0;e<T.Events.numOfSets;e++)T.Events["Set"+e]=T.Events[t+e];T.Hourly={t0:":00 "+T.Events.Set0,t5:":05 "+T.Events.Set1,t10:":10 "+T.Events.Set2,t15:":15 "+T.Events.Set0,t20:":20 "+T.Events.Set1,t25:":25 "+T.Events.Set2,t30:":30 "+T.Events.Set0,t35:":35 "+T.Events.Set1,t40:":40 "+T.Events.Set3,t45:":45 "+T.Events.Set4,t50:":50 "+T.Events.Set5,t55:":55 "+T.Events.Set6}}},initializeSchedule:function(){C.FE=C.Chains[0],C.Golem=C.Chains[1],C.Jormag=C.Chains[2],C.Maw=C.Chains[3],C.Megades=C.Chains[4],C.SB=C.Chains[5],C.Shatterer=C.Chains[6],C.Taidha=C.Chains[7],C.Ulgoth=C.Chains[8],C.Wurm=C.Chains[9],C.Queen=C.Chains[10],C.Tequatl=C.Chains[11],C.Triple=C.Chains[12],C.DryTop0=C.Chains[13],C.DryTop1=C.Chains[14],C.DryTop2=C.Chains[15],C.DryTop3=C.Chains[16],T.Schedule={t0:{t:"00:00",c:[C.Taidha,C.Tequatl]},t15:{t:"00:15",c:[C.Maw]},t30:{t:"00:30",c:[C.Megades]},t45:{t:"00:45",c:[C.FE]},t60:{t:"01:00",c:[C.Shatterer,C.Triple]},t75:{t:"01:15",c:[C.Wurm]},t90:{t:"01:30",c:[C.Ulgoth]},t105:{t:"01:45",c:[C.SB]},t120:{t:"02:00",c:[C.Golem,C.Queen]},t135:{t:"02:15",c:[C.Maw]},t150:{t:"02:30",c:[C.Jormag]},t165:{t:"02:45",c:[C.FE]},t180:{t:"03:00",c:[C.Taidha,C.Tequatl]},t195:{t:"03:15",c:[C.Wurm]},t210:{t:"03:30",c:[C.Megades]},t225:{t:"03:45",c:[C.SB]},t240:{t:"04:00",c:[C.Shatterer,C.Triple]},t255:{t:"04:15",c:[C.Maw]},t270:{t:"04:30",c:[C.Ulgoth]},t285:{t:"04:45",c:[C.FE]},t300:{t:"05:00",c:[C.Golem]},t315:{t:"05:15",c:[C.Wurm]},t330:{t:"05:30",c:[C.Jormag]},t345:{t:"05:45",c:[C.SB]},t360:{t:"06:00",c:[C.Taidha,C.Queen]},t375:{t:"06:15",c:[C.Maw]},t390:{t:"06:30",c:[C.Megades]},t405:{t:"06:45",c:[C.FE]},t420:{t:"07:00",c:[C.Shatterer,C.Tequatl]},t435:{t:"07:15",c:[C.Wurm]},t450:{t:"07:30",c:[C.Ulgoth]},t465:{t:"07:45",c:[C.SB]},t480:{t:"08:00",c:[C.Golem,C.Triple]},t495:{t:"08:15",c:[C.Maw]},t510:{t:"08:30",c:[C.Jormag]},t525:{t:"08:45",c:[C.FE]},t540:{t:"09:00",c:[C.Taidha]},t555:{t:"09:15",c:[C.Wurm]},t570:{t:"09:30",c:[C.Megades]},t585:{t:"09:45",c:[C.SB]},t600:{t:"10:00",c:[C.Shatterer]},t615:{t:"10:15",c:[C.Maw]},t630:{t:"10:30",c:[C.Ulgoth,C.Queen]},t645:{t:"10:45",c:[C.FE]},t660:{t:"11:00",c:[C.Golem]},t675:{t:"11:15",c:[C.Wurm]},t690:{t:"11:30",c:[C.Jormag,C.Tequatl]},t705:{t:"11:45",c:[C.SB]},t720:{t:"12:00",c:[C.Taidha]},t735:{t:"12:15",c:[C.Maw]},t750:{t:"12:30",c:[C.Megades,C.Triple]},t765:{t:"12:45",c:[C.FE]},t780:{t:"13:00",c:[C.Shatterer]},t795:{t:"13:15",c:[C.Wurm]},t810:{t:"13:30",c:[C.Ulgoth]},t825:{t:"13:45",c:[C.SB]},t840:{t:"14:00",c:[C.Golem]},t855:{t:"14:15",c:[C.Maw]},t870:{t:"14:30",c:[C.Jormag]},t885:{t:"14:45",c:[C.FE]},t900:{t:"15:00",c:[C.Taidha,C.Queen]},t915:{t:"15:15",c:[C.Wurm]},t930:{t:"15:30",c:[C.Megades]},t945:{t:"15:45",c:[C.SB]},t960:{t:"16:00",c:[C.Shatterer,C.Tequatl]},t975:{t:"16:15",c:[C.Maw]},t990:{t:"16:30",c:[C.Ulgoth]},t1005:{t:"16:45",c:[C.FE]},t1020:{t:"17:00",c:[C.Golem,C.Triple]},t1035:{t:"17:15",c:[C.Wurm]},t1050:{t:"17:30",c:[C.Jormag]},t1065:{t:"17:45",c:[C.SB]},t1080:{t:"18:00",c:[C.Taidha,C.Queen]},t1095:{t:"18:15",c:[C.Maw]},t1110:{t:"18:30",c:[C.Megades]},t1125:{t:"18:45",c:[C.FE]},t1140:{t:"19:00",c:[C.Shatterer,C.Tequatl]},t1155:{t:"19:15",c:[C.Wurm]},t1170:{t:"19:30",c:[C.Ulgoth]},t1185:{t:"19:45",c:[C.SB]},t1200:{t:"20:00",c:[C.Golem,C.Triple]},t1215:{t:"20:15",c:[C.Maw]},t1230:{t:"20:30",c:[C.Jormag]},t1245:{t:"20:45",c:[C.FE]},t1260:{t:"21:00",c:[C.Taidha]},t1275:{t:"21:15",c:[C.Wurm]},t1290:{t:"21:30",c:[C.Megades]},t1305:{t:"21:45",c:[C.SB]},t1320:{t:"22:00",c:[C.Shatterer]},t1335:{t:"22:15",c:[C.Maw]},t1350:{t:"22:30",c:[C.Ulgoth]},t1365:{t:"22:45",c:[C.FE]},t1380:{t:"23:00",c:[C.Golem,C.Queen]},t1395:{t:"23:15",c:[C.Wurm]},t1410:{t:"23:30",c:[C.Jormag]},t1425:{t:"23:45",c:[C.SB]}};var e,t,n,i,a=0;for(e in T.Schedule)T.Schedule[e].c.push(C["DryTop"+a]),a++,a>T.cNUM_TIMEFRAMES_IN_HOUR-1&&(a=0);C.ScheduledChains=new Array,C.initializeAllChains();for(e in T.Schedule){T.Schedule[e].t=T.parseChainTime(T.Schedule[e].t),i=T.Schedule[e];for(t in C.ScheduledChains)for(n in i.c)if(C.ScheduledChains[t].nexus===i.c[n].nexus){C.ScheduledChains[t].scheduleKeys.push(e);break}}X.initializeChainChecklist(),C.CurrentChainSD=T.getStandardChain(),T.initializeHourlyDryTop()},getScheduleSlotTime:function(e){return T.Schedule[e].t},getScheduleSlotChainsByKey:function(e){return T.Schedule[e].c},getCurrentTimeframe:function(){var e=T.getTimeOffsetSinceMidnight(T.ReferenceEnum.UTC,T.UnitEnum.Minutes);return e-e%T.cMINUTES_IN_TIMEFRAME},getTimeframe:function(e){e=e||0;var t=T.getCurrentTimeframe()+e*T.cMINUTES_IN_TIMEFRAME;return T.wrapInteger(t,T.cMINUTES_IN_DAY)},getTimeframeChains:function(e){return T.Schedule["t"+T.getTimeframe(e)].c},getTimeframeChainBySeries:function(e,t){var n,i=T.getTimeframeChains(e);for(n in i)if(i[n].series===t)return i[n];return null},getStandardChain:function(e){return T.getTimeframeChainBySeries(e,C.ChainSeriesEnum.Standard)},getHardcoreChain:function(e){return T.getTimeframeChainBySeries(e,C.ChainSeriesEnum.Hardcore)},getTimeframeKey:function(e){return"t"+T.getTimeframe(e)},convertScheduleKeyToLocalSeconds:function(e){var t=T.getScheduleSlotTime(e)*T.cSECONDS_IN_MINUTE-(new Date).getTimezoneOffset()*T.cSECONDS_IN_MINUTE;return t=T.wrapInteger(t,T.cSECONDS_IN_DAY)},getCurrentTimeframeElapsedTime:function(e){var t=new Date,n=t.getUTCMinutes(),i=t.getUTCSeconds();return e===T.UnitEnum.Minutes?n%T.cMINUTES_IN_TIMEFRAME:n%T.cMINUTES_IN_TIMEFRAME*T.cSECONDS_IN_MINUTE+i},getSecondsUntilChainStarts:function(e){var t=T.convertScheduleKeyToLocalSeconds(e.scheduleKeys[0]),n=T.getTimeOffsetSinceMidnight(T.ReferenceEnum.Local,T.UnitEnum.Seconds),i=T.cSECONDS_IN_TIMEFRAME*T.cNUM_TIMEFRAMES_IN_HOUR;return t>=T.cSECONDS_IN_DAY-i&&i>=n?T.cSECONDS_IN_DAY-t+n:n>=T.cSECONDS_IN_DAY-i&&i>=t?T.cSECONDS_IN_DAY-n+t:t-n},getTimeTillChainFormatted:function(e,t){var n=T.getSecondsUntilChainStarts(e),i=~~(n/T.cSECONDS_IN_MINUTE)%T.cSECONDS_IN_MINUTE,a=~~(n/T.cSECONDS_IN_HOUR),r=D.getPhrase("m"),o=D.getPhrase("h");return"speech"===t&&(r=" "+D.getSpeech("minute"),o=" "+D.getSpeech("hour"),Math.abs(i)>1&&(r=" "+D.getSpeech("minutes")),Math.abs(a)>1&&(o=" "+D.getSpeech("hours")),0===a&&30===Math.abs(i)&&(i=D.getSpeech("half an hour"),r="",o="")),o+=" ",i+=r,Math.abs(n)>=T.cSECONDS_IN_HOUR?a+=o:a="",0>n?" "+a+i+" "+D.getPhrase("ago"):" "+D.getPhrase("in")+" "+a+i},randIntRange:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},wrapInteger:function(e,t){var n=e;return n%=t,0>n&&(n=t+n),n},parseEventTime:function(e){var t=new Array;return-1!==e.indexOf("~")?(t=e.split("~"),T.parseEventTime(t[0])+~~(T.parseEventTime(t[1])/2)):"*"===e?0:-1===e.indexOf(":")?parseInt(e,T.cBASE_10):(t=e.split(":"),2===t.length?parseInt(t[0],T.cBASE_10)*T.cSECONDS_IN_MINUTE+parseInt(t[1],T.cBASE_10):3===t.length?parseInt(t[0])*T.cSECONDS_IN_HOUR+parseInt(t[1],T.cBASE_10)*T.cSECONDS_IN_MINUTE+parseInt(t[2],T.cBASE_10):0/0)},parseChainTime:function(e){var t=e.split(":");return parseInt(t[0],T.cBASE_10)*T.cMINUTES_IN_HOUR+parseInt(t[1],T.cBASE_10)},checkDST:function(){Date.prototype.stdTimezoneOffset=function(){var e=new Date(this.getFullYear(),0,1),t=new Date(this.getFullYear(),6,1);return Math.max(e.getTimezoneOffset(),t.getTimezoneOffset())},Date.prototype.dst=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()};var e=new Date;T.DST_IN_EFFECT=e.dst()&&O.Options.bol_detectDST===!1?1:0},getTimeFormatted:function(e){e=e||{},void 0===e.reference&&(e.reference=T.ReferenceEnum.Local),void 0===e.want24&&(e.want24=O.Options.bol_use24Hour),void 0===e.wantSeconds&&(e.wantSeconds=!0),void 0===e.wantHours&&(e.wantHours=!0),void 0===e.wantLetters&&(e.wantLetters=!1);var t,n,i,a=new Date;if(void 0===e.customTimeInSeconds)switch(e.reference){case T.ReferenceEnum.Local:t=a.getSeconds(),n=a.getMinutes(),i=a.getHours();break;case T.ReferenceEnum.Server:t=a.getSeconds(),n=a.getMinutes(),i=a.getUTCHours()+T.cUTC_OFFSET_SERVER+T.DST_IN_EFFECT,i=T.wrapInteger(i,T.cHOURS_IN_DAY);break;case T.ReferenceEnum.UTC:t=a.getUTCSeconds(),n=a.getUTCMinutes(),i=a.getUTCHours()}else e.customTimeInSeconds=T.wrapInteger(e.customTimeInSeconds,T.cSECONDS_IN_DAY),t=e.customTimeInSeconds%T.cSECONDS_IN_MINUTE,n=~~(e.customTimeInSeconds/T.cSECONDS_IN_MINUTE)%T.cMINUTES_IN_HOUR,i=~~(e.customTimeInSeconds/T.cSECONDS_IN_HOUR);var r="";if(r=e.wantSeconds?e.wantLetters?0===i&&0===n?t+"s":n+"m "+t+"s":e.wantHours===!1?n+":"+(t<T.cBASE_10?"0"+t:t):(n<T.cBASE_10?"0"+n:n)+":"+(t<T.cBASE_10?"0"+t:t):e.wantLetters?n+"m":n<T.cBASE_10?"0"+n:n,e.wantLetters)return 0===i||e.wantHours===!1?r:i+"h "+r;if(e.want24)return e.wantHours===!1?r:(i<T.cBASE_10?"0"+i:i)+":"+r;var o=" AM";return i>=T.cHOURS_IN_MERIDIEM?(i>T.cHOURS_IN_MERIDIEM&&(i%=T.cHOURS_IN_MERIDIEM),o=" PM"):0===i&&(i=T.cHOURS_IN_MERIDIEM),i+":"+r+o},getTimeOffsetSinceMidnight:function(e,t){t=t||T.UnitEnum.Seconds,e=e||T.ReferenceEnum.UTC;var n=new Date,i=n.getUTCHours(),a=n.getUTCMinutes(),r=n.getUTCSeconds();switch(e){case T.ReferenceEnum.Server:i=i+T.cUTC_OFFSET_SERVER+T.DST_IN_EFFECT;break;case T.ReferenceEnum.UTC:break;case T.ReferenceEnum.Local:i=n.getHours(),a=n.getMinutes(),r=n.getSeconds()}return i=T.wrapInteger(i,T.cHOURS_IN_DAY),t===T.UnitEnum.Hours?i:t===T.UnitEnum.Minutes?i*T.cMINUTES_IN_HOUR+a:i*T.cSECONDS_IN_HOUR+a*T.cSECONDS_IN_MINUTE+r},getUNIXSeconds:function(){return~~((new Date).getTime()/T.cMILLISECONDS_IN_SECOND)}},K={tickerFrequency:250,tickerSecondPrevious:null,awakeTimestampPrevious:0,awakeTimestampTolerance:5,currentFrameOffsetMinutes:0,iconOpacityChecked:.4,iconOpacitySpeed:200,oldQuadrantAngle:0,cDEGREES_IN_CIRCLE:360,cDEGREES_IN_QUADRANT:90,handSecond:{},handMinute:{},handHour:{},clockBackground:{},clockCircumference:{},timeLocal:{},timeServer:{},timeBoard:{},timestampUTC:{},timestampLocal:{},timestampServer:{},timestampReset:{},WpChain0:{},WpChain1:{},WpChain2:{},WpChain3:{},IconSD0:{},IconSD1:{},IconSD2:{},IconSD3:{},IconHC0:{},IconHC1:{},IconHC2:{},IconHC3:{},IconsStandard:new Array,IconsHardcore:new Array,wpClipboards:[],lsClipboards:[],cZeroClipboardDataAttribute:"data-clipboard-text",TickerTimeout:{},initializeClock:function(){K.handSecond=$("#clkSecondHand")[0],K.handMinute=$("#clkMinuteHand")[0],K.handHour=$("#clkHourHand")[0],K.clockBackground=$("#paneClockBackground")[0],K.clockCircumference=$("#clkCircumference")[0],K.timeLocal=$("#itemTimeLocalActual")[0],K.timeServer=$("#itemTimeServer")[0],K.timeBoard=$("#itemBoardTime")[0],K.timestampUTC=$("#optTimestampUTC")[0],K.timestampLocal=$("#optTimestampLocalReset")[0],K.timestampServer=$("#optTimestampServerReset")[0],K.timestampReset=$("#optTimeTillReset")[0],K.updateTimeFrame(new Date),K.tickFrequent(),K.initializeClipboard()},setClock:function(){var e=200,t=0;switch(O.Options.int_setClock){case O.IntEnum.Clock.Compact:$("#paneClock").show(),$("#itemTimeLocal, #itemTimeServer, #itemLanguage, #itemSocial").show(),I.bulkAnimate([{s:"#itemClock",p:{top:"0px",left:"70px",width:"220px",height:"220px"}},{s:"#paneClockFace",p:{width:"360px",height:"360px",top:"-70px",left:"0px"}},{s:"#paneClockIcons .iconSD",p:{"border-radius":"32px"}},{s:"#paneClockIcons .iconHC",p:{"border-radius":"24px"}},{s:"#itemClockIconSD0",p:{top:"4px",left:"290px"}},{s:"#itemClockIconSD1",p:{top:"148px",left:"290px"}},{s:"#itemClockIconSD2",p:{top:"148px",left:"4px"}},{s:"#itemClockIconSD3",p:{top:"4px",left:"4px"}},{s:"#itemClockIconHC0",p:{top:"52px",left:"306px"}},{s:"#itemClockIconHC1",p:{top:"132px",left:"306px"}},{s:"#itemClockIconHC2",p:{top:"132px",left:"20px"}},{s:"#itemClockIconHC3",p:{top:"52px",left:"20px"}},{s:"#itemClockWaypoint0",p:{top:"24px",left:"274px"}},{s:"#itemClockWaypoint1",p:{top:"164px",left:"274px"}},{s:"#itemClockWaypoint2",p:{top:"164px",left:"52px"}},{s:"#itemClockWaypoint3",p:{top:"24px",left:"52px"}},{s:"#itemClockStar0",p:{top:"-10px",left:"138px"}},{s:"#itemClockStar1",p:{top:"-10px",left:"190px"}}],e),$("#paneClockIcons .iconHC").css({width:"32px",height:"32px"}),$("#itemTimeLocal").css({width:"100%",right:"auto",bottom:"90px","text-align":"center",color:"#eee",opacity:.5}),$("#itemTimeServer").css({width:"100%",top:"90px",bottom:"auto",left:"auto","text-align":"center",color:"#eee",opacity:.5}),$("#itemLanguage").css({bottom:"72px",left:"10px"}),$("#itemSocial").css({bottom:"100px",right:"10px"}),t=I.cPANE_CLOCK_HEIGHT_COMPACT;
break;case O.IntEnum.Clock.Full:$("#paneClock").show(),$("#itemTimeLocal, #itemTimeServer, #itemLanguage, #itemSocial").show(),I.bulkAnimate([{s:"#itemClock",p:{top:"70px",left:"70px",width:"220px",height:"220px"}},{s:"#paneClockFace",p:{width:"360px",height:"360px",top:"0px",left:"0px"}},{s:"#paneClockIcons .iconSD",p:{"border-radius":"12px"}},{s:"#paneClockIcons .iconHC",p:{"border-radius":"12px"}},{s:"#itemClockIconSD0",p:{top:"4px",left:"148px"}},{s:"#itemClockIconSD1",p:{top:"148px",left:"290px"}},{s:"#itemClockIconSD2",p:{top:"290px",left:"148px"}},{s:"#itemClockIconSD3",p:{top:"148px",left:"4px"}},{s:"#itemClockIconHC0",p:{top:"12px",left:"212px"}},{s:"#itemClockIconHC1",p:{top:"212px",left:"298px"}},{s:"#itemClockIconHC2",p:{top:"298px",left:"100px"}},{s:"#itemClockIconHC3",p:{top:"100px",left:"12px"}},{s:"#itemClockWaypoint0",p:{top:"52px",left:"164px"}},{s:"#itemClockWaypoint1",p:{top:"164px",left:"274px"}},{s:"#itemClockWaypoint2",p:{top:"274px",left:"164px"}},{s:"#itemClockWaypoint3",p:{top:"164px",left:"52px"}},{s:"#itemClockStar0",p:{top:"280px",left:"286px"}},{s:"#itemClockStar1",p:{top:"280px",left:"328px"}}],e),$("#paneClockIcons .iconHC").css({width:"48px",height:"48px"}),$("#itemTimeLocal").css({width:"auto",right:"10px",bottom:"10px","text-align":"left",color:"#bbcc77",opacity:1}),$("#itemTimeServer").css({width:"auto",top:"auto",bottom:"10px",left:"10px","text-align":"left",color:"#bbcc77",opacity:1}),$("#itemLanguage").css({bottom:"0px",left:"10px"}),$("#itemSocial").css({bottom:"28px",right:"10px"}),t=I.cPANE_CLOCK_HEIGHT;break;case O.IntEnum.Clock.Bar:$("#paneClock").show(),$("#itemTimeLocal, #itemTimeServer, #itemLanguage, #itemSocial").hide(),I.bulkAnimate([{s:"#itemClock",p:{top:"0px",left:"0px",width:"85px",height:"85px"}},{s:"#paneClockFace",p:{width:"132px",height:"132px",top:"-24px",left:"-24px"}},{s:"#paneClockIcons .iconSD",p:{"border-radius":"32px"}},{s:"#paneClockIcons .iconHC",p:{"border-radius":"24px"}},{s:"#itemClockIconSD0",p:{top:"0px",left:"82px"}},{s:"#itemClockIconSD1",p:{top:"0px",left:"152px"}},{s:"#itemClockIconSD2",p:{top:"0px",left:"222px"}},{s:"#itemClockIconSD3",p:{top:"0px",left:"292px"}},{s:"#itemClockIconHC0",p:{top:"48px",left:"98px"}},{s:"#itemClockIconHC1",p:{top:"48px",left:"168px"}},{s:"#itemClockIconHC2",p:{top:"48px",left:"238px"}},{s:"#itemClockIconHC3",p:{top:"48px",left:"308px"}},{s:"#itemClockWaypoint0",p:{top:"-8px",left:"98px"}},{s:"#itemClockWaypoint1",p:{top:"-8px",left:"168px"}},{s:"#itemClockWaypoint2",p:{top:"-8px",left:"238px"}},{s:"#itemClockWaypoint3",p:{top:"-8px",left:"308px"}},{s:"#itemClockStar0",p:{top:"-16px",left:"0px"}},{s:"#itemClockStar1",p:{top:"-16px",left:"53px"}}],e),$("#paneClockIcons .iconHC").css({width:"32px",height:"32px"}),t=I.cPANE_CLOCK_HEIGHT_BAR;break;case O.IntEnum.Clock.None:$("#paneMenu").animate({top:0},e),$(I.cContentPane).animate({top:I.cPANE_MENU_HEIGHT,"min-height":I.cPANEL_HEIGHT-I.cPANE_MENU_HEIGHT+"px"},e,function(){$("#paneClock").hide()})}I.CLOCK_AND_MENU_HEIGHT=t+I.cPANE_MENU_HEIGHT,O.Options.int_setClock!==O.IntEnum.Clock.None&&($("#paneMenu").animate({top:t},e),$("#paneClock, #paneClockWall, #paneClockBackground, #paneClockIcons").animate({height:t},e),$(I.cContentPane).animate({top:t+I.cPANE_MENU_HEIGHT,"min-height":I.cPANEL_HEIGHT-(t+I.cPANE_MENU_HEIGHT)+"px"},e)),I.ModeCurrent===I.ModeEnum.Overlay&&$("#itemSocial").hide()},setMarkerAngle:function(e,t){$(e).attr("transform","rotate("+t/10+", 50, 50)")},rotateClockElement:function(e,t){e.setAttribute("transform","rotate("+t+", 50, 50)")},reapplyFilters:function(){if(I.BrowserCurrent===I.BrowserEnum.Firefox){var e=$("#clkCircumference"),t=$("#clkHands"),n="url(#clkFilterShadowOuter)",i="url(#clkGradientCircumference)",a="url(#clkFilterShadowHand)";e.removeAttr("filter").attr("filter",n),e.css("stroke",i),t.removeAttr("filter").attr("filter",a)}},initializeClockItems:function(){K.IconsStandard=null,K.IconsHardcore=null,K.IconsStandard=new Array(K.IconSD0,K.IconSD1,K.IconSD2,K.IconSD3),K.IconsHardcore=new Array(K.IconHC0,K.IconHC1,K.IconHC2,K.IconHC3);var e,t;for(e=0;e<T.cNUM_TIMEFRAMES_IN_HOUR;e++)$([K.IconsStandard[e],K.IconsHardcore[e]]).each(function(){$(this).unbind("dblclick").dblclick(function(){t=C.Chains[$(this).data(C.cIndexSynonym)].primaryEvents[0].path[0],M.goToView(t,M.PinEvent)}).unbind("click").click(function(){$("#chnCheck_"+C.Chains[$(this).data(C.cIndexSynonym)].nexus).trigger("click")})})},checkoffChainIcon:function(e){var t,n,i,a=C.Chains[e];if(a.series===C.ChainSeriesEnum.Standard||a.series===C.ChainSeriesEnum.Hardcore)for(t=0;t<T.cNUM_TIMEFRAMES_IN_HOUR;t++){switch(a.series){case C.ChainSeriesEnum.Standard:n=T.getStandardChain(t),i=K.IconsStandard[t];break;case C.ChainSeriesEnum.Hardcore:n=T.getHardcoreChain(t),i=K.IconsHardcore[t]}n&&e===n.nexus&&(X.getChainChecklistState(n)!==X.ChecklistEnum.Unchecked?i.css({opacity:1}).animate({opacity:K.iconOpacityChecked},K.iconOpacitySpeed):i.css({opacity:K.iconOpacityChecked}).animate({opacity:1},K.iconOpacitySpeed))}},tickFrequent:function(){var e=new Date,t=e.getSeconds();return K.tickerSecondPrevious===t?void(K.TickerTimeout=setTimeout(K.tickFrequent,K.tickerFrequency)):(K.tickerSecondPrevious=t,void K.tickSecond(e))},tickSecond:function(e){var t=e.getSeconds();T.TIMESTAMP_UNIX_SECONDS=T.getUNIXSeconds(),T.SECONDS_TILL_RESET=T.cSECONDS_IN_DAY-T.getTimeOffsetSinceMidnight(T.ReferenceEnum.UTC,T.UnitEnum.Seconds);var n=e.getMinutes(),i=e.getHours()%T.cHOURS_IN_MERIDIEM,a=60*n+t,r=6*t,o=6*n+t/10,s=30*i+n/60*30;K.rotateClockElement(K.clockCircumference,o),K.rotateClockElement(K.handSecond,r),K.rotateClockElement(K.handMinute,o),K.rotateClockElement(K.handHour,s);var c=1-(n%T.cMINUTES_IN_TIMEFRAME*60+t)/T.cSECONDS_IN_TIMEFRAME;if(n%T.cMINUTES_IN_TIMEFRAME===0&&0===t)0===O.Options.int_setDimming&&I.ModeCurrent!==I.ModeEnum.Simple&&I.ModeCurrent!==I.ModeEnum.Overlay&&$(K.clockBackground).fadeTo(800,1),K.updateTimeFrame(e);else{var l=T.TIMESTAMP_UNIX_SECONDS;K.awakeTimestampPrevious<l-K.awakeTimestampTolerance&&K.updateTimeFrame(e),K.awakeTimestampPrevious=l,0===O.Options.int_setDimming&&I.ModeCurrent!==I.ModeEnum.Simple&&(K.clockBackground.style.opacity=c)}C.CurrentChains.forEach(C.updateCurrentChainTimeHTML),0===t&&(O.Options.bol_useCountdown&&C.updateChainsTimeHTML(),K.updateWaypointsClipboard(),O.Options.int_setAlarm===O.IntEnum.Alarm.Subscription&&(K.doSubscribedSpeech(O.Options.int_alertSubscribedFirst),K.doSubscribedSpeech(O.Options.int_alertSubscribedSecond)),n%T.cMINUTES_IN_EVENTFRAME===0&&K.updateDryTopClipboard()),K.timeLocal.innerHTML=T.getTimeFormatted(),K.timeServer.innerHTML="("+T.getTimeFormatted({reference:T.ReferenceEnum.Server,wantSeconds:!1})+")",K.timeBoard.innerHTML=T.getTimeFormatted({want24:!0,wantHours:!1,wantLetters:!0,customTimeInSeconds:T.cSECONDS_IN_TIMEFRAME-T.getCurrentTimeframeElapsedTime()}),K.timestampUTC.innerHTML=T.TIMESTAMP_UNIX_SECONDS,K.timestampLocal.innerHTML=O.Utilities.lastLocalResetTimestamp.value,K.timestampServer.innerHTML=T.TIMESTAMP_UNIX_SECONDS+T.SECONDS_TILL_RESET,K.timestampReset.innerHTML=T.getTimeFormatted({customTimeInSeconds:T.SECONDS_TILL_RESET,want24:!0}),a>=K.currentFrameOffsetMinutes&&a<K.currentFrameOffsetMinutes+C.CurrentChainSD.minFinish?K.handMinute.style.stroke="lime":a>=K.currentFrameOffsetMinutes+C.CurrentChainSD.minFinish&&a<K.currentFrameOffsetMinutes+C.CurrentChainSD.avgFinish?K.handMinute.style.stroke="orange":a>=K.currentFrameOffsetMinutes+C.CurrentChainSD.avgFinish&&(K.handMinute.style.stroke="red"),K.TickerTimeout=setTimeout(K.tickFrequent,K.tickerFrequency)},doSubscribedSpeech:function(e){if(e>0){var t=T.cMINUTES_IN_TIMEFRAME-T.getCurrentTimeframeElapsedTime(T.UnitEnum.Minutes),n=C.NextChainSD1,i=C.NextChainHC1,a=!1,r=!1,o=D.getSpeech("world boss","subscribed")+" ",s=5;e>T.cMINUTES_IN_TIMEFRAME&&(n=C.NextChainSD2,i=C.NextChainHC2,t+=T.cMINUTES_IN_TIMEFRAME),a=O.objToBool(n)&&C.isChainSubscribed(n)&&C.isChainUnchecked(n),r=O.objToBool(i)&&C.isChainSubscribed(i)&&C.isChainUnchecked(i),e===t&&(a||r)&&(a&&r?(o+=D.getChainPronunciation(n)+" "+D.getSpeech("and")+" "+D.getChainPronunciation(i),s=6):a?o+=D.getChainPronunciation(n):r&&(o+=D.getChainPronunciation(i)),D.speak(o,s),D.speak(D.getSpeech("will start")+T.getTimeTillChainFormatted(n,"speech"),3))}},updateTimeFrame:function(e){if(O.checkResetTimestamp(),C.CurrentChainSD=T.getStandardChain(),C.NextChainSD1=T.getStandardChain(1),C.NextChainSD2=T.getStandardChain(2),C.NextChainSD3=T.getStandardChain(3),C.NextChainSD4=T.getStandardChain(4),C.CurrentChainHC=T.getHardcoreChain(),C.NextChainHC1=T.getHardcoreChain(1),C.NextChainHC2=T.getHardcoreChain(2),C.NextChainHC3=T.getHardcoreChain(3),C.NextChainHC4=T.getHardcoreChain(4),C.PreviousChains2=T.getTimeframeChains(-2),C.PreviousChains1=T.getTimeframeChains(-1),C.CurrentChains=T.getTimeframeChains(),C.NextChains1=T.getTimeframeChains(1),C.sortChainsListHTML(),C.CurrentChains.forEach(C.queueEventsHighlight),$("#itemBoardCurrentSD").text(D.getChainTitleAny(C.CurrentChainSD.nexus)),$("#itemBoardNextSD").text(D.getChainTitleAny(C.NextChainSD1.nexus)),$("#itemBoardCurrentHC").text(""),$("#itemBoardNextHC").text(""),C.CurrentChainHC||C.NextChainHC1?($("#itemBoardHC").show(),C.CurrentChainHC&&$("#itemBoardCurrentHC").text(D.getChainTitleAny(C.CurrentChainHC.nexus)),C.NextChainHC1&&$("#itemBoardNextHC").text(D.getChainTitleAny(C.NextChainHC1.nexus))):$("#itemBoardHC").hide(),O.Options.int_setAlarm===O.IntEnum.Alarm.Checklist&&O.Options.bol_alertAtEnd){var t=", "+D.getSpeech("checked"),n="",i="",a="",r="",o=O.objToBool(C.CurrentChainSD),s=O.objToBool(C.CurrentChainHC),c=O.objToBool(C.NextChainSD1),l=O.objToBool(C.NextChainHC1),u=D.getSpeech("world boss","current")+" "+D.getSpeech("is")+" ";C.CurrentChainSD&&!C.isChainUnchecked(C.CurrentChainSD)&&(n=t),C.CurrentChainHC&&!C.isChainUnchecked(C.CurrentChainHC)&&(a=t),C.NextChainSD1&&!C.isChainUnchecked(C.NextChainSD1)&&(i=t),C.NextChainHC1&&!C.isChainUnchecked(C.NextChainHC1)&&(r=t),O.Options.bol_alertChecked===!1&&(n.length>0&&(o=!1),a.length>0&&(s=!1),i.length>0&&(c=!1),r.length>0&&(l=!1)),o&&s?(D.speak(u+D.getChainPronunciation(C.CurrentChainSD)+n,5),D.speak(D.getSpeech("and")+", "+D.getChainPronunciation(C.CurrentChainHC)+a,4)):o?D.speak(u+D.getChainPronunciation(C.CurrentChainSD)+n,5):s&&D.speak(u+D.getChainPronunciation(C.CurrentChainHC)+a,5),(o||s)&&(c&&l?(D.speak(D.getSpeech("then")+", "+D.getChainPronunciation(C.NextChainSD1)+i,4),D.speak(D.getSpeech("and")+", "+D.getChainPronunciation(C.NextChainHC1)+r,4)):c?D.speak(D.getSpeech("then")+", "+D.getChainPronunciation(C.NextChainSD1)+i,4):l&&D.speak(D.getSpeech("then")+", "+D.getChainPronunciation(C.NextChainHC1)+r,4))}var h=e.getSeconds(),p=e.getMinutes(),d=60*p+h;$("#clkMarkers line").each(function(){$(this).attr("stroke","black")}),$("#paneClockIcons .iconSD").css({border:"1px solid black","box-shadow":"0px 0px 10px black"}),$("#paneClockIcons .iconHC").css({border:"1px solid black","box-shadow":"0px 0px 10px black"});var m=function(e,t,n,i,a,r,o,s,c,l,u,h,p,d){$([K.IconSD0,K.IconHC0]).each(function(){$(this).css({border:"1px solid lime","box-shadow":"0px 0px 10px lime"})}),$([K.IconSD1,K.IconHC1]).each(function(){$(this).css({border:"1px solid green","box-shadow":"0px 0px 10px green"})}),K.setMarkerAngle(t,C.CurrentChainSD.minFinish+u),K.setMarkerAngle(n,C.CurrentChainSD.avgFinish+u),K.setMarkerAngle(a,C.NextChainSD1.minFinish+h),K.setMarkerAngle(r,C.NextChainSD1.avgFinish+h),K.setMarkerAngle(o,C.NextChainSD2.minFinish+p),K.setMarkerAngle(s,C.NextChainSD2.avgFinish+p),K.setMarkerAngle(c,C.NextChainSD3.minFinish+d),K.setMarkerAngle(l,C.NextChainSD3.avgFinish+d);var m=function(e,t){e?(t.show(),t.attr("src","img/chain/"+e.alias.toLowerCase()+I.cPNG),t.data(C.cIndexSynonym,e.nexus),I.ModeCurrent===I.ModeEnum.Simple&&(t.attr("title",D.getChainTitleAny(e.nexus)),I.qTip.init(t)),t.css(X.getChainChecklistState(e)!==X.ChecklistEnum.Unchecked?{opacity:K.iconOpacityChecked}:{opacity:1})):t.hide()};m(C.CurrentChainSD,K.IconSD0),m(C.NextChainSD1,K.IconSD1),m(C.NextChainSD2,K.IconSD2),m(C.NextChainSD3,K.IconSD3),m(C.CurrentChainHC,K.IconHC0),m(C.NextChainHC1,K.IconHC1),m(C.NextChainHC2,K.IconHC2),m(C.NextChainHC3,K.IconHC3),$(e).attr("stroke","lime"),$(t).attr("stroke","orange"),$(n).attr("stroke","red"),$(i).attr("stroke","green")},g=function(e){var t,n,i,a;switch(e){case T.cSECS_MARK_0:t="0",n="1",i="2",a="3";break;case T.cSECS_MARK_1:t="1",n="2",i="3",a="0";break;case T.cSECS_MARK_2:t="2",n="3",i="0",a="1";break;case T.cSECS_MARK_3:t="3",n="0",i="1",a="2"}K.currentFrameOffsetMinutes=e,K.WpChain0=$("#itemClockWaypoint"+t)[0],K.IconSD0=$("#itemClockIconSD"+t),K.WpChain1=$("#itemClockWaypoint"+n)[0],K.IconSD1=$("#itemClockIconSD"+n),K.WpChain2=$("#itemClockWaypoint"+i)[0],K.IconSD2=$("#itemClockIconSD"+i),K.WpChain3=$("#itemClockWaypoint"+a)[0],K.IconSD3=$("#itemClockIconSD"+a),K.IconHC0=$("#itemClockIconHC"+t),K.IconHC1=$("#itemClockIconHC"+n),K.IconHC2=$("#itemClockIconHC"+i),K.IconHC3=$("#itemClockIconHC"+a),m($("#clkMarker"+t),$("#clkMarker"+t+"A"),$("#clkMarker"+t+"B"),$("#clkMarker"+n),$("#clkMarker"+n+"A"),$("#clkMarker"+n+"B"),$("#clkMarker"+i+"A"),$("#clkMarker"+i+"B"),$("#clkMarker"+a+"A"),$("#clkMarker"+a+"B"),T["cSECS_MARK_"+t],T["cSECS_MARK_"+n],T["cSECS_MARK_"+i],T["cSECS_MARK_"+a]);var r=document.getElementById("clkQuadrant"),o=parseInt(t)*K.cDEGREES_IN_QUADRANT;0===o&&0!==K.oldQuadrantAngle&&(o=K.cDEGREES_IN_CIRCLE),$({angle:K.oldQuadrantAngle}).animate({angle:o},{duration:600,step:function(){K.rotateClockElement(r,this.angle)},done:function(){K.rotateClockElement(r,o)}}),o===K.cDEGREES_IN_CIRCLE&&(o=0),K.oldQuadrantAngle=o};d>=T.cSECS_MARK_0&&d<T.cSECS_MARK_1?g(T.cSECS_MARK_0):d>=T.cSECS_MARK_1&&d<T.cSECS_MARK_2?g(T.cSECS_MARK_1):d>=T.cSECS_MARK_2&&d<T.cSECS_MARK_3?g(T.cSECS_MARK_2):d>=T.cSECS_MARK_3&&d<=T.cSECS_MARK_4&&g(T.cSECS_MARK_3),K.updateWaypointsClipboard(),K.updateDryTopClipboard(),K.initializeClockItems()},initializeClipboard:function(){ZeroClipboard.config({swfPath:"bin/ZeroClipboard.swf"});for(var e=0;e<T.cNUM_TIMEFRAMES_IN_HOUR;e++)K.wpClipboards.push(new ZeroClipboard(document.getElementById("itemClockWaypoint"+e))),K.wpClipboards[e].on("aftercopy",function(e){I.write("Chat link copied to clipboard :)<br />"+e.data["text/plain"],5)});if(C.DryTopChains.length>0)for(var e=0;2>e;e++)K.lsClipboards.push(new ZeroClipboard(document.getElementById("itemClockStar"+e))),K.lsClipboards[e].on("aftercopy",function(e){I.write("Chat link copied to clipboard :)<br />"+e.data["text/plain"],5)})},updateWaypointsClipboard:function(){var e=function(e,t,n,i,a){var r="";r+=t.waypoint+" "+D.getChainAlias(t.nexus),r+=n?" "+D.getPhrase("and")+" "+n.waypoint+" "+D.getChainAlias(n.nexus)+T.getTimeTillChainFormatted(n):T.getTimeTillChainFormatted(t),r+=", "+D.getPhrase("then")+" "+i.waypoint+" "+D.getChainAlias(i.nexus),r+=a?" "+D.getPhrase("and")+" "+a.waypoint+" "+D.getChainAlias(a.nexus)+T.getTimeTillChainFormatted(a):T.getTimeTillChainFormatted(i),r+=I.siteTagCurrent,e.setAttribute(K.cZeroClipboardDataAttribute,r)};e(K.WpChain0,C.CurrentChainSD,C.CurrentChainHC,C.NextChainSD1,C.NextChainHC1),e(K.WpChain1,C.NextChainSD1,C.NextChainHC1,C.NextChainSD2,C.NextChainHC2),e(K.WpChain2,C.NextChainSD2,C.NextChainHC2,C.NextChainSD3,C.NextChainHC3),e(K.WpChain3,C.NextChainSD3,C.NextChainHC3,C.NextChainSD4,C.NextChainHC4)},updateDryTopClipboard:function(){C.DryTopChains.length>0&&(document.getElementById("itemClockStar0").setAttribute(K.cZeroClipboardDataAttribute,T.getCurrentDryTopEvents()),document.getElementById("itemClockStar1").setAttribute(K.cZeroClipboardDataAttribute,T.getCurrentDryTopEvents(1)))}},I={cSiteName:"GW2Timer.com",cSiteURL:"http://gw2timer.com/",cPageURLMap:"mapsrc.html",cPageURLHelp:"helpsrc.html",cPageURLWvW:"wvwsrc.html",cImageHost:"http://i.imgur.com/",cGameName:"Guild Wars 2",cGameNick:"GW2",cPNG:".png",cTextDelimiterChar:"|",cTextDelimiterRegex:/[|]/g,consoleTimeout:{},siteTagDefault:" - gw2timer.com",siteTagCurrent:" - gw2timer.com",cPANEL_WIDTH:360,cPANEL_HEIGHT:580,cPANE_CLOCK_HEIGHT:360,cPANE_CLOCK_HEIGHT_COMPACT:220,cPANE_CLOCK_HEIGHT_BAR:85,cPANE_MENU_HEIGHT:48,cPANE_BEAM_LEFT:-41,cTOOLTIP_MAX_WIDTH:360,cTOOLTIP_DEFAULT_OFFSET_X:-180,cTOOLTIP_DEFAULT_OFFSET_Y:30,cTOOLTIP_ADD_OFFSET_Y:42,cTOOLTIP_ADD_OFFSET_X:36,cTOOLTIP_MOUSEMOVE_RATE:10,CLOCK_AND_MENU_HEIGHT:0,isProgramLoaded:!1,isProgramEmbedded:!1,ModeCurrent:null,ModeEnum:{Website:"Website",Simple:"Simple",Overlay:"Overlay"},cContentPane:"#paneContent",cContentPrefix:"#layer",cMenuPrefix:"#menu",PageCurrent:"",PageEnum:{Chains:"Chains",Map:"Map",WvW:"WvW",Help:"Help",Options:"Options"},SectionEnum:{Map:{Daily:"Daily",Resource:"Resource",JP:"JP",Collectible:"Collectible",TP:"TP",Notepad:"Notepad",Personal:"Personal"},Help:{FAQ:"FAQ",About:"About",Scheduled:"Scheduled",Legacy:"Legacy",Temples:"Temples",Dungeons:"Dungeons"}},ArticleCurrent:null,contentCurrentLayer:"",isContentLoaded_Map:!1,isContentLoaded_Help:!1,sectionPrefix:"sectionCurrent_",sectionCurrent_Map:"",sectionCurrent_Help:"",cHeaderPrefix:"#header",BrowserCurrent:"Unknown",BrowserEnum:{IE:0,Opera:1,Firefox:2,Chrome:3},isOnSmallDevice:!1,isOnBigDevice:!1,cSMALL_DEVICE_WIDTH:800,cSMALL_DEVICE_HEIGHT:600,cBIG_DISPLAY_HEIGHT:1200,initializeFirst:function(){D.stopSpeech(),window!==window.top&&(I.isProgramEmbedded=!0),U.enforceURLArgumentsFirst(),I.enforceProgramMode(),T.checkDST(),T.cUTC_OFFSET_USER=-((new Date).getTimezoneOffset()/T.cMINUTES_IN_HOUR),T.cUTC_OFFSET_USER<=T.cUTC_OFFSET_EASTERN&&T.cUTC_OFFSET_USER>=T.cUTC_OFFSET_HAWAII&&(O.Options.bol_use24Hour=!1);var e=T.getUNIXSeconds(),t=parseInt(localStorage[O.Utilities.lastLocalResetTimestamp.key]);void 0===localStorage[O.Utilities.lastLocalResetTimestamp.key]||isFinite(t)===!1||t>e?(O.Utilities.lastLocalResetTimestamp.value=e,localStorage[O.Utilities.lastLocalResetTimestamp.key]=O.Utilities.lastLocalResetTimestamp.value):O.Utilities.lastLocalResetTimestamp.value=t,K.awakeTimestampPrevious=e,screen.width<=I.cSMALL_DEVICE_WIDTH&&screen.height<=I.cSMALL_DEVICE_HEIGHT&&I.ModeCurrent===I.ModeEnum.Website&&(I.isOnSmallDevice=!0),window.innerHeight>I.cBIG_DISPLAY_HEIGHT&&(I.isOnBigDevice=!0);var n=navigator.userAgent;-1!==n.indexOf("MSIE")||-1!==n.indexOf("Trident")?I.BrowserCurrent=I.BrowserEnum.IE:-1!==n.indexOf("Chrome")?I.BrowserCurrent=I.BrowserEnum.Chrome:-1!==n.indexOf("Firefox")?I.BrowserCurrent=I.BrowserEnum.Firefox:-1!==n.indexOf("Opera")&&(I.BrowserCurrent=I.BrowserEnum.Opera),I.PageCurrent=I.PageEnum.Chains},initializeLast:function(){I.initializeTooltip(),I.bindHelpButtons("#layerOptions"),I.initializeUIforMenu(),I.initializeUIforChains(),I.initializeUIForHUD(),U.enforceURLArgumentsLast(),$("#paneWarning").remove(),$("#jsConsoleButtonClose").click(function(){I.clear()}),$("#jsConsoleButtonSelect").click(function(){I.selectText("#jsConsole")}),U.convertExternalLink(".linkExternal"),$(document).mouseup(function(e){var t=$(".jsRemovable");t.is(e.target)||0!==t.has(e.target).length||t.remove()}),$("#itemLanguage").hover(function(){$("#paneClock").css("z-index",3)},function(){$("#paneClock").css("z-index",0)}),I.initializeScrollbar($("body, #layerChains, #layerOptions")),O.cleanLocalStorage(),O.enforceProgramVersion(),D.translateAfter(),I.isProgramLoaded=!0},write:function(e,t,n){$("#jsConsoleButtons").show();var i=$("#jsConsole"),a=24;e=void 0===e||null===e?"emptystring":e.toString(),void 0===n&&(n=!1),n===!0&&i.empty(),isFinite(t)===!1&&(t=3+parseInt(e.length/a)),i.append(e+"<br />"),window.clearTimeout(I.consoleTimeout),I.consoleTimeout=setTimeout(function(){i.css({opacity:1}).animate({opacity:0},600,function(){$(this).empty().css({opacity:1}),$("#jsConsoleButtons").hide()})},t*T.cMILLISECONDS_IN_SECOND)},clear:function(){window.clearTimeout(I.consoleTimeout),$("#jsConsoleButtons").hide(),$("#jsConsole").empty()},log:function(e,t,n){void 0===t&&(t=30),I.write(e,t,n)},selectText:function(e){var t=document.querySelector(e),n=window.getSelection(),i=document.createRange();i.selectNodeContents(t),n.removeAllRanges(),n.addRange(i)},scrollToElement:function(e,t,n){var i=n||0;t.animate({scrollTop:e.offset().top-t.offset().top+t.scrollTop()},i)},bulkAnimate:function(e,t){var n,i;for(n in e)i=e[n],$(i.s).animate(i.p,{duration:t,queue:!1})},initializeScrollbar:function(e){var t=1;switch(I.BrowserCurrent){case I.BrowserEnum.Opera:t=3;break;case I.BrowserEnum.Firefox:t=3}$(e).perfectScrollbar({wheelSpeed:t,suppressScrollX:!0})},generateTableOfContent:function(e){if($(e+" .jsTableOfContents").hasClass("jsTableOfContents")){var t=e.substring(1,e.length);$(e+" .jsTableOfContents").append("<h2>Table of Contents</h2><ol></ol>"),$(e+" h1").each(function(){var n=$(this).text(),i=U.stripToAlphanumeric(n);$(this).html(n+"<span class='tocTop'> ↑</span>"),$(this).click(function(){I.scrollToElement($("#jsTOC_"+I.PageCurrent),$(I.contentCurrentLayer),"fast")}).attr("id","toc_"+t+"_"+i),$("<li>"+n+"</li>").appendTo($(e+" .jsTableOfContents ol")).click(function(){I.scrollToElement($("#toc_"+t+"_"+i),$(I.contentCurrentLayer),"fast")})})}},generateSectionMenu:function(e){if(!($(e+" header.jsSection").length<=0)){var t=e.substring(I.cContentPrefix.length,e.length),n="menuBeam_"+t,i=$("<div class='menuBeam' id='"+n+"'></div>").prependTo(e);I.ModeCurrent===I.ModeEnum.Website?(i.css({right:I.cPANEL_WIDTH,top:I.CLOCK_AND_MENU_HEIGHT}),$(I.cMenuPrefix+t).click(function(){$("#menuBeam_"+I.PageCurrent).css({right:I.cPANEL_WIDTH+I.cPANE_BEAM_LEFT,top:I.CLOCK_AND_MENU_HEIGHT}).animate({right:I.cPANEL_WIDTH},"fast")})):i.hide(),$(e+" header.jsSection").each(function(){var n=$(this),a=$(this).children("var").first(),r=a.data(O.Options.enu_Language)||n.text();a.text(r),n.next().hide(),n.wrapInner("<span></span>"),n.append("<sup>[+]</sup>"),n.click(function(){var n=U.getSubstringFromHTMLID($(this));$(e+" .menuBeamIcon").removeClass("menuBeamIconActive"),$(this).next().is(":visible")?($(this).children("sup").text("[+]"),M.displayIcons(n,!1),I[I.sectionPrefix+t]=""):($(this).children("sup").text("[-]"),$(e+" .menuBeamIcon[data-section='"+n+"']").addClass("menuBeamIconActive"),I[I.sectionPrefix+t]=n),U.updateQueryString(),"true"!==$(this).data("donotanimate")?($(this).next().toggle("fast"),I.scrollToElement($(this),$(e),"fast")):$(this).next().toggle(),$(this).removeData("donotanimate")}),n.one("click",function(){I.loadSectionImg($(this))}),$("<div class='jsSectionDone'><img src='img/ui/close.png' />"+r+"</div>").appendTo(n.next()).click(function(){$(this).parent().prev().trigger("click")});var o=U.getSubstringFromHTMLID(n),s=n.find("img:eq(0)").attr("src");$("<img class='menuBeamIcon' data-section='"+o+"' src='"+s+"' title='&lt;dfn&gt;"+D.getSentence("section")+": &lt;/dfn&gt;"+r+"' />").appendTo(i).click(function(){$(e+" header.jsSection").each(function(){$(this).next().is(":visible")&&$(this).attr("id")!==n.attr("id")&&($(this).data("donotanimate","true"),$(this).trigger("click"))}),n.trigger("click")})}),$("<img class='menuBeamIcon' src='img/ui/exit.png' title='&lt;dfn&gt;Close All Sections&lt;/dfn&gt;' />").appendTo(i).click(function(){$(e+" header.jsSection").each(function(){$(this).next().is(":visible")&&$(this).trigger("click")}),$(e+" .menuBeamIcon").removeClass("menuBeamIconActive")}),I.qTip.init(e+" .menuBeamIcon")}},loadSectionImg:function(e){e.next().find("img").each(function(){$(this).attr("data-src")&&($(this)[0].src=$(this).data("src"))})},bindHelpButtons:function(e){$(e+" .jsHelpCollapsible").each(function(){$(this).text("[?+]").attr("title","<dfn>More Info</dfn>"),$(this).next().hide(),$(this).click(function(){$(this).next().toggle(),$(this).text($(this).next().is(":visible")?"[?-]":"[?+]")})}),$(e+" .jsHelpTooltip").each(function(){var e="<dfn>Info:</dfn> "+$(this).attr("title");$(this).text("[?]").attr("title",e)}),I.qTip.init(e+" .jsHelpCollapsible"),I.qTip.init(e+" .jsHelpTooltip")},initializeUIforMenu:function(){!function(){var e=200,t=.5;$("#paneMenu").hover(function(){$(".menuButton").each(function(){$(this).is(":hover")||$(this).animate({opacity:t},e)})},function(){$(".menuButton").finish().each(function(){$(this).animate({opacity:1},e)})}),$(".menuButton").hover(function(){$(this).animate({opacity:1},e)},function(){$(this).animate({opacity:t},e)}).mousedown(function(){$(this).finish().css({opacity:t})}).mouseup(function(){$(this).finish().css({opacity:1})})}(),$(".menuButton").each(function(){$(this).click(function(){var e=$(this).attr("id");switch(I.PageCurrent=e.substring(I.cMenuPrefix.length-1,e.length),I.contentCurrentLayer=I.cContentPrefix+I.PageCurrent,I.PageCurrent){case I.PageEnum.Chains:$("#jsTop").hide(),O.Options.bol_tourPrediction&&!O.Options.bol_followCharacter&&$("#chnEvent_"+C.CurrentChainSD.nexus+"_"+C.CurrentChainSD.CurrentPrimaryEvent.num).trigger("click");break;case I.PageEnum.Map:$("#jsTop").show(),M.goToDefault(),M.movePin(M.PinEvent);break;case I.PageEnum.WvW:$("#jsTop").hide();break;case I.PageEnum.Help:$("#jsTop").show();break;default:$("#jsTop").hide()}$("#paneContent article").hide(),$(I.contentCurrentLayer+" .cntHeader").css({opacity:0}).animate({opacity:1},400),$(I.contentCurrentLayer).animate({width:"show"},200),U.updateQueryString(),O.Options.bol_showChainPaths&&(I.PageCurrent===I.PageEnum.Map?(M.setEntityGroupDisplay(M.ChainPathEntities,"hide"),M.setEntityGroupDisplay(M.DryTopEventIcons,"hide"),M.setEntityGroupDisplay(M.DryTopEventRings,"hide")):(M.setEntityGroupDisplay(M.ChainPathEntities,"show"),M.setEntityGroupDisplay(M.DryTopEventActive,"show")))})}),$("#menuMap").one("click",I.loadMapLayer),$("#menuHelp").one("click",I.loadHelpLayer),$("#jsTop").click(function(){$(I.contentCurrentLayer).animate({scrollTop:0},"fast")})},bindAfterAJAXContent:function(e){I.generateTableOfContent(e),I.generateSectionMenu(e),I.initializeScrollbar($(e)),I.bindHelpButtons(e),M.bindMapLinks(e),U.convertExternalLink(e+" a"),I.qTip.init("button")},loadHelpLayer:function(){$("#layerHelp").load(I.cPageURLHelp,function(){I.bindAfterAJAXContent("#layerHelp"),$(".jsCopyCode").click(function(){$(this).select()}),U.openSectionFromURL(),D.translatePageHeader(I.PageEnum.Help),I.isContentLoaded_Help=!0})},loadMapLayer:function(){$("#layerMap").load(I.cPageURLMap,function(){I.bindAfterAJAXContent("#layerMap"),$("#headerMap_Daily").one("click",function(){P.generateAndInitializeDailies()}),$("#headerMap_Resource").one("click",function(){P.generateAndInitializeResourceNodes()}),$("#headerMap_JP").one("click",function(){P.generateAndInitializeJPs(),P.generateAndInitializeJPChecklistHTML()}),$("#headerMap_Personal").one("click",function(){X.initializeDungeonChecklist(),X.initializeCustomChecklist()}),$("#headerMap_TP").one("click",function(){E.initializeCalculator(),E.initializeTrading(),E.initializeExchange()}),$("#headerMap_Notepad").one("click",function(){X.initializeNotepad()}),$("#headerMap_Collectible").one("click",function(){P.generateAndInitializeCollectibles()}),$("#headerMap_Daily, #headerMap_Resource, #headerMap_JP, #headerMap_Collectible").each(function(){$(this).click(function(){"[-]"===$(this).children("sup").text()&&M.displayIcons(U.getSubstringFromHTMLID($(this)),!0)})}),$("<img class='menuBeamIcon menuBeamIconCenter' src='img/ui/star.png' title='&lt;dfn&gt;Map Center&lt;/dfn&gt;' />").appendTo("#menuBeam_Map").click(function(){M.goToDefault()}),I.qTip.init("#layerMap .menuBeamIconCenter, #layerMap label"),U.openSectionFromURL(),D.translatePageHeader(I.PageEnum.Map),I.isContentLoaded_Map=!0})},initializeUIforChains:function(){$("#layerChains header").click(function(){$(this).next().slideToggle("fast",function(){if($(this).is(":visible")){var e=$(I.cContentPrefix+I.PageEnum.Chains),t=$(this).prev();t.find("ins").html("[-]"),I.scrollToElement(t,e,"fast"),"listChainsDryTop"===$(this).attr("id")&&M.goToZone("dry",M.ZoomLevelEnum.Sky)}else $(this).prev().find("ins").html("[+]")})}),$("#layerChains header:not(:first)").each(function(){$(this).next().toggle(0),$(this).find("ins").html("[+]")}),$("#layerChains header:first").each(function(){$(this).find("ins").html("[-]")}),$("#listChainsLegacy").prev().one("click",function(){C.LegacyChains.forEach(C.styleBarIcon)}),$("#listChainsTemple").prev().one("click",function(){C.TempleChains.forEach(C.styleBarIcon)}),$(".chnTitle h1").click(function(){$(this).parent().next().slideToggle(100)}),$("#headerTimetable").one("click",function(){C.initializeTimetableHTML()})},initializeUIForHUD:function(){var e=200;$("#mapOptions, #mapZones, #mapGPS").each(function(){$(this).hover(function(){$(this).find(".cntComposition").show().animate({opacity:.8},e)},function(){$(this).find(".cntComposition").animate({opacity:0},e)})})},enforceProgramMode:function(){switch(I.ModeCurrent){case I.ModeEnum.Overlay:$("#paneWarning").remove(),$(".itemMapLinks a, .itemMapLinks span, #itemSocial").hide(),$("#jsConsole").css({top:"12px",left:"12px","font-size":"12px"}),$("#jsConsoleButtons").css({right:"0px",left:"auto",bottom:"0px"}),$("#itemLanguagePopup a").each(function(){var e=$(this).attr("href");$(this).attr("href",e+"&mode="+I.ModeEnum.Overlay)});break;case I.ModeEnum.Simple:$("#panelLeft, #paneMenu, #paneContent").hide(),$("#panelRight").css({background:"radial-gradient(ellipse at center, #333 0%, #222 50%, #111 100%)"}),$("#paneClock").css({top:"auto",right:"auto",bottom:"auto",left:"auto",border:"none","box-shadow":"none"}),I.readjustSimpleClock(),$(window).resize(function(){I.readjustSimpleClock()}),$("#paneClockWall, #paneClockBackground").css({opacity:0}),$("#itemTimeServer, #itemSocial").hide(),$("#itemLanguage").css({position:"fixed",top:"10px",right:"10px",bottom:"auto",left:"auto"}),$("#itemClockStar0").css({top:"68px",left:"122px"}),$("#itemClockStar1").css({top:"68px",left:"206px"}),$("#itemLanguage span").css({opacity:.7}),$("#itemLanguagePopup a").each(function(){var e=$(this).attr("href");$(this).attr("href",e+"&mode="+I.ModeEnum.Simple)}),$("#itemTimeLocal").css({position:"fixed",bottom:"0px",color:"#eee",opacity:.5}),I.qTip.init($("<a title='&lt;dfn&gt;Shortcut to this page&lt;/dfn&gt;: gw2timer.com/m' href='./'> <img id='iconSimpleHome' src='img/ui/about.png' /></a>").appendTo("#itemTimeLocalExtra")),$("#paneBoard").show();break;case I.ModeEnum.Website:$("#mapGPSButton").hide()}I.isProgramEmbedded&&($("#paneWarning").remove(),$(".itemMapLinks a, .itemMapLinks span").hide())},readjustSimpleClock:function(){var e=$(window).height()/2,t=$(window).width()/2,n=I.cPANE_CLOCK_HEIGHT/2;$("#paneBoard").css({"margin-top":e-n-72}),$("#paneClock").css({"margin-top":e-n,"margin-left":t-n})},initializeTooltip:function(){I.qTip.init("a, ins, span, img, fieldset, label, input, button, .menuButton"),$("#panelRight").mousemove($.throttle(I.cTOOLTIP_MOUSEMOVE_RATE,function(e){I.qTip.offsetY=$("#qTip").height()+e.pageY+I.cTOOLTIP_ADD_OFFSET_Y>$(window).height()?-$("#qTip").height()-I.cTOOLTIP_ADD_OFFSET_Y:I.cTOOLTIP_DEFAULT_OFFSET_Y,I.qTip.offsetX=I.ModeCurrent===I.ModeEnum.Overlay&&$(window).width()-e.pageX>I.cPANEL_WIDTH/2?$(window).width()-e.pageX-I.cPANEL_WIDTH:I.cTOOLTIP_DEFAULT_OFFSET_X})),$("#panelLeft").mousemove($.throttle(I.cTOOLTIP_MOUSEMOVE_RATE,function(e){I.qTip.offsetX=e.pageX+I.cTOOLTIP_ADD_OFFSET_X>$(window).width()?-(I.cTOOLTIP_MAX_WIDTH/2)-I.cTOOLTIP_ADD_OFFSET_X:24,I.qTip.offsetY=$("#qTip").height()-24+e.pageY>$(window).height()?-$("#qTip").height()-I.cTOOLTIP_ADD_OFFSET_Y:e.pageY<42?32:-42}))},qTip:{name:"qTip",offsetX:-180,offsetY:15,a:null,init:function(e){if(!t)var t="qTip";var n=document.getElementById(t);n||(n=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml","div"):document.createElement("div"),n.setAttribute("id",t),document.getElementsByTagName("body").item(0).appendChild(n)),document.getElementById&&(this.a=document.getElementById(this.name),this.a&&(document.onmousemove=function(e){I.qTip.move(e)}),$(e).each(function(){t=$(this)[0],n=t.getAttribute("title"),t&&n&&(t.setAttribute("tiptitle",n),t.removeAttribute("title"),t.removeAttribute("alt"),t.onmouseover=function(){I.qTip.show(this.getAttribute("tiptitle"))
},t.onmouseout=function(){I.qTip.hide()})}))},move:function(e){var t=0,n=0;document.all?(t=document.documentElement&&document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft,n=document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,t+=window.event.clientX,n+=window.event.clientY):(t=e.pageX,n=e.pageY),this.a.style.left=t+this.offsetX+"px",this.a.style.top=n+this.offsetY+"px"},show:function(e){this.a&&(this.a.innerHTML=e,this.a.style.display="block")},hide:function(){this.a&&(this.a.innerHTML="",this.a.style.display="none")}}},I.initializeFirst(),O.initializeOptions(),T.initializeSchedule(),M.initializeMap(),K.initializeClock(),I.initializeLast()});